(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-092a"],{BooC:function(e,t,a){"use strict";var i=a("HaFv");a.n(i).a},HaFv:function(e,t,a){},MW5T:function(e,t,a){"use strict";var i=a("ecw5");a.n(i).a},"XT/o":function(e,t,a){"use strict";a.r(t);var i=a("FyfS"),n=a.n(i),s=a("wk8/"),l=a("Yfch"),o={data:function(){return{activeNames:[],checkedGoods:[],tableData:[],searData:{},dialogVisibleWechatJie:!1,jiebangId:"",wechatImg:"",showWechat:!1,allPage:1,currentPage:1,inputPage:"",plTotalPage:"5",perPage:5,delId:"",showDel:!1,showEditUser:!1,oneData:{},active:0,statusList:[{label:"启用",value:1},{label:"禁用",value:0}],rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],phone:[{required:!0,message:"请输入用户名",trigger:"blur"},{validator:l.e,trigger:"blur"}],password:[{min:6,max:50,message:"密码不能小于6位",trigger:"blur"}],passwords:[{min:6,max:50,message:"密码不能小于6位",trigger:"blur"}],dep_ids:[{required:!0,message:"请选择部门",trigger:"change"}],pr_id:[{required:!0,message:"请选择权限",trigger:"change"}]},departList:[],roleList:[],editname:"添加操作人员",listShow:!1}},methods:{clearSear:function(){this.searData={},this.searData.page=1},initData:function(e){var t=this;Object(s.b)(e).then(function(e){t.tableData=e.data.data,t.allPage=e.data.last_page,t.plTotalPage=e.data.last_page+"页",t.currentPage=e.data.current_page,t.perPage=e.data.per_page,t.tableData.length?t.listShow=!1:t.listShow=!0}).catch(function(e){console.log(e)})},initDepart:function(){var e=this;this.departList=[],Object(s.a)().then(function(t){var a=!0,i=!1,s=void 0;try{for(var l,o=n()(t.data);!(a=(l=o.next()).done);a=!0){var r=l.value,c={};c.value=r.id,c.label=r.depname,e.departList.push(c)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}}).catch(function(e){console.log(e)})},initRoleList:function(){var e=this;this.roleList=[],this.tableData2=[],Object(s.c)().then(function(t){var a=!0,i=!1,s=void 0;try{for(var l,o=n()(t.data);!(a=(l=o.next()).done);a=!0){var r=l.value,c={};c.label=r.name,c.value=r.id,e.roleList.push(c)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}}).catch(function(e){console.log(e)})},handleCurrentPage:function(e){this.searData.page=Number(e),this.initData(this.searData)},inputCurrentPage:function(e){this.currentPage=Number(e),this.searData.page=this.currentPage,this.initData(this.searData)},handleDelete:function(e){this.showDel=!0,this.delId=e.id},addUser:function(){this.showEditUser=!0,this.editname="添加操作人员",this.oneData={status:1},void 0!==this.$refs.ruleForm&&this.$refs.ruleForm.resetFields()},handleXiugai:function(e){var t=this,a=e.id;this.editname="修改操作人员",void 0!==this.$refs.ruleForm&&this.$refs.ruleForm.resetFields(),Object(s.i)(a).then(function(e){t.oneData=e.data,t.showEditUser=!0}).catch(function(e){console.log(e,"修改用户信息获取失败")})},nullpassword:function(e){e||delete this.oneData.password},handleDialogEdit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$toast("请根据提示来填写"),!1;"添加操作人员"==t.editname?t.oneData.password?t.oneData.password==t.oneData.passwords?Object(s.e)(t.oneData).then(function(e){t.$toast.success("添加成功"),t.initData(t.searData),t.showEditUser=!1}).catch(function(e){var a=e.response.data.errors;a.name?t.$toast({message:"名称已存在"}):a.phone?t.$toast({message:"手机号码已存在"}):t.$toast({message:e.response.data.errors})}):t.$toast("密码不一致"):t.$toast("密码不能为空"):void 0===t.oneData.password?t.editUserSure():t.oneData.password&&t.oneData.password==t.oneData.passwords?t.editUserSure():t.$toast("密码不一致")})},editUserSure:function(){var e=this,t=this.oneData.id;this.oneData.submit=1,Object(s.i)(t,this.oneData).then(function(t){e.$toast.success("修改成功"),e.showEditUser=!1,e.initData(e.searData)}).catch(function(t){var a=t.response.data.errors;a.name?e.$toast({message:"名称已存在"}):a.phone?e.$toast({message:"手机号码已存在"}):e.$toast({message:t.response.data.errors}),console.log("修改失败")})},checkedSelect:function(){},handleWechat:function(e){var t=this;this.wechatImg="";var a={};a.uid=e.id,Object(s.k)(a).then(function(e){t.wechatImg=e.data.message,t.showWechat=!0}).catch(function(e){})},handleWechatJieBang:function(e){this.jiebangId=e.id,this.dialogVisibleWechatJie=!0},beforeCloseWejiebang:function(e,t){var a=this;if("confirm"===e){var i={};i.uid=this.jiebangId,Object(s.l)(i).then(function(e){a.$toast.success("解绑成功"),t(),a.initData(a.searData)}).catch(function(e){console.log("解绑失败")})}else t()},beforeCloseWechat:function(e,t){t()},beforeCloseDel:function(e,t){var a=this;if("confirm"===e){var i={duid:this.delId};Object(s.g)(i).then(function(e){a.$toast.success("删除成功"),a.searData.page=1,a.initData(a.searData),t()}).catch(function(e){console.log(e,"删除失败")})}else t()},onSubmit:function(){this.searData.page=1,this.initData(this.searData)}},created:function(){this.searData.page=1,this.initData(this.searData),this.initRoleList(),this.initDepart()}},r=(a("BooC"),a("KHd+")),c=Object(r.a)(o,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[a("van-collapse-item",{attrs:{title:"搜索",name:"1"}},[a("el-form",{staticClass:"center",attrs:{model:e.searData}},[a("el-form-item",[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入客户名称"},model:{value:e.searData.sear,callback:function(t){e.$set(e.searData,"sear",t)},expression:"searData.sear"}})],1),e._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择部门"},model:{value:e.searData.depa,callback:function(t){e.$set(e.searData,"depa",t)},expression:"searData.depa"}},e._l(e.departList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择权限"},model:{value:e.searData.prim,callback:function(t){e.$set(e.searData,"prim",t)},expression:"searData.prim"}},e._l(e.roleList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择状态"},model:{value:e.searData.status,callback:function(t){e.$set(e.searData,"status",t)},expression:"searData.status"}},e._l(e.statusList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("div",[a("sapn",[a("el-button",{attrs:{size:"small"},on:{click:e.clearSear}},[e._v("清空")])],1),e._v("\n\t\t\t\t\t\t \n\t\t\t\t\t\t"),a("span",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.onSubmit}},[e._v("查询")])],1),e._v("\n\t\t\t\t\t\t   \n\t\t\t\t\t")],1)],1)],1)],1),e._v(" "),a("van-row",[a("el-button",{staticStyle:{"margin-top":"8px"},attrs:{type:"success",size:"small"},on:{click:e.addUser}},[e._v("添加")])],1),e._v(" "),e.listShow?a("div",{staticStyle:{"margin-top":"10px"}},[e._v("暂无用户")]):e._e(),e._v(" "),a("van-row",{staticStyle:{"padding-left":"5px","margin-top":"8px","border-bottom":"1px solid rgb(229, 229, 229)",display:"flex","align-items":"center"}}),e._v(" "),a("van-checkbox-group",{staticClass:"card-goods",on:{change:e.checkedSelect},model:{value:e.checkedGoods,callback:function(t){e.checkedGoods=t},expression:"checkedGoods"}},e._l(e.tableData,function(t,i){return a("van-row",{key:t.index,staticStyle:{"margin-top":"10px",padding:"5px","border-bottom":"1px solid #e5e5e5"}},[a("van-row",[a("van-col",{attrs:{span:"2"}},[a("van-checkbox",{key:t.id,staticClass:"card-goods__item",attrs:{name:t.id}})],1),e._v(" "),a("van-col",{staticClass:"list_main_k",attrs:{span:"22"}},[a("div",[e._v("用户名 : "+e._s(t.name))]),e._v(" "),a("div",[e._v("手机号 : "+e._s(t.phone))]),e._v(" "),a("div",[e._v("所属部门 : "+e._s(t.depname))]),e._v(" "),a("div",[e._v("权限 : "+e._s(t.prname))]),e._v(" "),a("div",[e._v("状态 : "+e._s(0==t.status?"禁用":"启用"))])])],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"100%","padding-bottom":"5px"}},[t.openid?a("span",[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleWechatJieBang(t)}}},[e._v("微信解绑")])],1):e._e(),e._v(" "),t.openid?e._e():a("span",[a("el-button",{attrs:{size:"small"},on:{click:function(a){e.handleWechat(t)}}},[e._v("微信绑定")])],1),e._v("  \n\t\t\t\t\t"),a("span",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.handleXiugai(t)}}},[e._v("修改")])],1),e._v("  \n\t\t\t\t\t"),"2"!=t.status?a("span",[a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"small"},on:{click:function(a){e.handleDelete(t)}}},[e._v("删除")])],1):e._e()])],1)})),e._v(" "),a("div",{staticStyle:{height:"30px"}}),e._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"","before-close":e.beforeCloseWejiebang,title:"提示"},model:{value:e.dialogVisibleWechatJie,callback:function(t){e.dialogVisibleWechatJie=t},expression:"dialogVisibleWechatJie"}},[a("div",{staticStyle:{"text-align":"center","font-size":"0.9rem","margin-top":"1.2rem","margin-bottom":"1rem"}},[e._v("你确定要解绑微信")])]),e._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"","before-close":e.beforeCloseDel,title:"提示"},model:{value:e.showDel,callback:function(t){e.showDel=t},expression:"showDel"}},[a("div",{staticStyle:{"text-align":"center","font-size":"0.9rem","margin-top":"1.2rem","margin-bottom":"1rem"}},[e._v("你确定要删除该操作人员")])]),e._v(" "),a("van-dialog",{attrs:{"cancel-button-text":"","before-close":e.beforeCloseWechat,title:"微信绑定"},model:{value:e.showWechat,callback:function(t){e.showWechat=t},expression:"showWechat"}},[a("div",{staticStyle:{width:"100%","text-align":"center"}},[a("img",{staticStyle:{width:"80%"},attrs:{src:e.wechatImg,alt:""}}),e._v(" "),a("div",{staticStyle:{width:"100%","text-align":"center","font-size":"0.8rem",padding:"0.5rem"}},[e._v("二维码有效期10分钟，请在有效期内完成操作")]),e._v(" "),a("div",{staticStyle:{width:"100%","text-align":"center","font-size":"0.8rem",padding:"0.5rem"}},[e._v("二维码截图发给该用户，用户扫码或识别即可完成绑定。")])])]),e._v(" "),a("van-tabbar",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("van-row",{staticStyle:{display:"flex","align-items":"center"}},[a("van-col",{staticStyle:{"padding-left":"5px"},attrs:{span:"19"}},[a("van-pagination",{attrs:{"page-count":e.allPage,"show-page-size":3,"items-per-page":e.perPage,"force-ellipses":""},on:{change:e.handleCurrentPage},model:{value:e.currentPage,callback:function(t){e.currentPage=t},expression:"currentPage"}})],1),e._v(" "),a("van-col",{staticStyle:{"padding-left":"5px","padding-right":"5px"},attrs:{span:"5"}},[a("el-input",{attrs:{placeholder:e.plTotalPage,onkeyup:"this.value=this.value.replace(/[^0-9-]+/,'')"},on:{change:function(t){e.inputCurrentPage(t)}},model:{value:e.inputPage,callback:function(t){e.inputPage=t},expression:"inputPage"}})],1)],1)],1),e._v(" "),a("van-actionsheet",{attrs:{title:e.editname},model:{value:e.showEditUser,callback:function(t){e.showEditUser=t},expression:"showEditUser"}},[a("div",{staticStyle:{width:"90%",margin:"10px auto 0"}},[a("el-form",{ref:"ruleForm",attrs:{"label-width":"30%",model:e.oneData,rules:e.rules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{staticStyle:{width:"190px"},model:{value:e.oneData.name,callback:function(t){e.$set(e.oneData,"name",t)},expression:"oneData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[a("el-input",{staticStyle:{width:"190px"},model:{value:e.oneData.phone,callback:function(t){e.$set(e.oneData,"phone",t)},expression:"oneData.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门",prop:"dep_ids"}},[a("el-select",{staticStyle:{width:"190px"},attrs:{placeholder:"请选择"},model:{value:e.oneData.dep_ids,callback:function(t){e.$set(e.oneData,"dep_ids",t)},expression:"oneData.dep_ids"}},e._l(e.departList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"密码 ",prop:"password"}},[a("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"添加操作人员"==e.editname?"":"如果需要修改,请填写",type:"password"},on:{change:e.nullpassword},model:{value:e.oneData.password,callback:function(t){e.$set(e.oneData,"password",t)},expression:"oneData.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"重复密码 ",prop:"passwords"}},[a("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"添加操作人员"==e.editname?"":"请再次输入要修改的密码",type:"password"},model:{value:e.oneData.passwords,callback:function(t){e.$set(e.oneData,"passwords",t)},expression:"oneData.passwords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限",prop:"pr_id"}},[a("el-select",{staticStyle:{width:"190px"},attrs:{placeholder:"请选择"},model:{value:e.oneData.pr_id,callback:function(t){e.$set(e.oneData,"pr_id",t)},expression:"oneData.pr_id"}},e._l(e.roleList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-radio-group",{model:{value:e.oneData.status,callback:function(t){e.$set(e.oneData,"status",t)},expression:"oneData.status"}},[a("el-radio",{attrs:{label:1}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("禁用")])],1)],1)],1)],1),e._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","padding-right":"1rem","margin-top":"1rem"}},[a("el-button",{on:{click:function(t){e.showEditUser=!1}}},[e._v("取消")]),e._v("  "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleDialogEdit("ruleForm")}}},[e._v("确定")])],1)])],1)},[],!1,null,"7b38e67d",null);c.options.__file="userOne.vue";var d=c.exports,u={data:function(){return{tableData2:[],isIndeterminate:!0,isIndeterminateDep:!0,departList:[],departCodeList:[],checkAll:!1,checkAllDep:!1,checkedCities:[],checkedDep:[],cities:[{value:"add",label:"添加"},{value:"edit",label:"修改"},{value:"list",label:"查看"},{value:"delete",label:"删除"},{value:"check",label:"审核"}],showDel:!1,showAdd:!1,oneDataRole:{}}},methods:{initRoleList:function(){var e=this;this.tableData2=[],Object(s.c)().then(function(t){var a=!0,i=!1,s=void 0;try{for(var l,o=n()(t.data);!(a=(l=o.next()).done);a=!0){var r=l.value;e.tableData2.push(r)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}}).catch(function(e){console.log(e)})},initDepart:function(){var e=this;this.departCodeList=[],Object(s.a)().then(function(t){var a=!0,i=!1,s=void 0;try{for(var l,o=n()(t.data);!(a=(l=o.next()).done);a=!0){var r=l.value,c={};c.value=r.depcode,c.label=r.depname,c.id=r.id,e.departCodeList.push(c)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}}).catch(function(e){console.log(e)})},handleCurrentChangeQ:function(e){var t=this,a={};a.rid=e.id,Object(s.j)(a).then(function(a){t.$set(e,"name",a.data.name),t.oneDataRole=a.data,t.oneDataRole.depcode=JSON.parse(t.oneDataRole.depcode),t.oneDataRole.action=JSON.parse(t.oneDataRole.action),t.checkedCities=t.oneDataRole.action,t.checkedDep=t.oneDataRole.depcode}).catch(function(e){})},handleCheckAllChange:function(e){this.checkedCities=e?["add","edit","delete","list","check"]:[],this.isIndeterminate=!1,"0"==this.checkedCities.length?(this.isIndeterminate=!0,this.surePostEditRoletApi()):this.surePostEditRoletApi()},handleCheckAllChangeDep:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var l,o=n()(this.departCodeList);!(a=(l=o.next()).done);a=!0){var r=l.value;t.push(r.value)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}this.checkedDep=e?t:[],this.isIndeterminateDep=!1,"0"==this.checkedDep.length?(this.surePostEditRoletApi(),this.isIndeterminateDep=!0):this.surePostEditRoletApi()},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.cities.length,this.isIndeterminate=t>0&&t<this.cities.length,this.surePostEditRoletApi()},surePostEditRoletApi:function(){var e=this,t=this.oneDataRole;t.submit=1,t.rid=t.id,t.action=this.checkedCities,t.depcode=this.checkedDep,t.rid&&(t.action.length>0&&t.depcode.length>0?Object(s.h)(t).then(function(a){e.$message({message:"修改权限成功",type:"success",duration:1500}),e.handleCurrentChangeQ(t)}).catch(function(e){}):this.$message({message:"修改失败,权限和部门都不能为空，请重新勾选下",type:"warning"}))},handleCheckedDepChange:function(e){var t=e.length;this.checkAllDep=t===this.departCodeList.length,this.isIndeterminateDep=t>0&&t<this.departCodeList.length,this.surePostEditRoletApi()},handleRoleName:function(e){var t=this;if(e==this.oneDataRole.name);else{this.oneDataRole.name=e;var a=this.oneDataRole;a.submit="1",a.rid=this.oneDataRole.id,Object(s.h)(a).then(function(e){t.$message({message:"修改权限成功",type:"success",duration:1500}),t.handleCurrentChangeQ(a)}).catch(function(e){t.initRoleList(),e.response.data.errors.name?t.$message({message:"权限组名称已存在",type:"warning",duration:2e3}):t.$message({message:e.response.data.errors,type:"warning",duration:2e3})})}},addQuanxian:function(){this.checkedCities.length>0&&this.checkedDep.length?this.showAdd=!0:this.$message({message:"部门和权限都不能为空，请勾选部门和权限",type:"warning"}),this.oneDataRole.name="",this.$refs.singleTable1.setCurrentRow()},beforeCloseAdd:function(e,t){var a=this;if("confirm"===e){var i=this.oneDataRole;i.name?Object(s.d)(i).then(function(e){a.$toast.success("添加成功"),a.initRoleList(),a.oneDataRole={action:[],depcode:[]},a.cancelSelectList(),t()}).catch(function(e){e.response.data.errors.name?a.$message({message:"权限组名称已存在",type:"warning",duration:2e3}):a.$message({message:e.response.data.errors,type:"warning",duration:2e3}),t()}):this.$toast("添加失败，权限名称不能为空")}else t()},delQuanxian:function(){this.showDel=!0},beforeCloseDel:function(e,t){var a=this;if("confirm"===e){var i=this.oneDataRole;i.submit=1,i.rid=i.id,Object(s.f)(i).then(function(e){a.$toast.success("删除成功"),a.initRoleList(),a.oneDataRole={action:[],depcode:[]},a.cancelSelectList(),t()}).catch(function(e){a.$message({message:e.response.data.message,type:"warning",duration:1500}),t()})}else t()},cancelSelectList:function(){this.$refs.singleTable1.setCurrentRow(),this.checkedCities=[],this.checkedDep=[],this.oneDataQ={}}},created:function(){this.initRoleList(),this.initDepart()}},h=(a("xM+T"),Object(r.a)(u,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-row",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addQuanxian}},[e._v("添加")]),e._v("   "),a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"small"},on:{click:e.delQuanxian}},[e._v("删除")]),e._v("   ")],1),e._v(" "),a("van-row",{staticStyle:{border:"1px solid #d6d6d6",padding:"5px","margin-top":"10px"}},[a("van-col",{attrs:{span:"10"}},[a("el-table",{ref:"singleTable1",staticClass:"tb-edit",staticStyle:{},attrs:{data:e.tableData2,border:"","tooltip-effect":"dark","highlight-current-row":""},on:{"row-click":e.handleCurrentChangeQ}},[a("el-table-column",{attrs:{property:"name",label:"权限组(单击选中)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"date-show"},[t.row.tenat_id?e._e():a("span",{style:{fontWeight:t.row.tenat_id?"":"bold"}},[e._v(e._s(t.row.name))]),e._v(" "),t.row.tenat_id?a("el-input",{on:{change:function(t){e.handleRoleName(t)}},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}}):e._e()],1),e._v(" "),a("span",{style:{fontWeight:t.row.tenat_id?"":"bold"}},[e._v(e._s(t.row.name))])]}}])})],1)],1),e._v(" "),a("van-col",{attrs:{span:"2"}},[e._v("  ")]),e._v(" "),a("van-col",{attrs:{span:"12"}},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("选择权限")]),e._v(" "),a("span",{staticStyle:{display:"inline-block",float:"right"}})]),e._v(" "),a("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("部门")]),e._v(" "),a("div",[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminateDep},on:{change:e.handleCheckAllChangeDep},model:{value:e.checkAllDep,callback:function(t){e.checkAllDep=t},expression:"checkAllDep"}},[e._v("全选")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedDepChange},model:{value:e.checkedDep,callback:function(t){e.checkedDep=t},expression:"checkedDep"}},e._l(e.departCodeList,function(t){return a("span",{staticStyle:{display:"inline-block",width:"48%","padding-bottom":"0.5rem"}},[a("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])],1)}))],1),e._v(" "),a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[e._v("权限")]),e._v(" "),a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t){return a("span",{staticStyle:{display:"inline-block",width:"48%","padding-bottom":"0.5rem"}},[a("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])],1)}))],1)],1),e._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"","before-close":e.beforeCloseDel,title:"提示"},model:{value:e.showDel,callback:function(t){e.showDel=t},expression:"showDel"}},[a("div",{staticStyle:{"text-align":"center","font-size":"0.9rem","margin-top":"1.2rem","margin-bottom":"1rem"}},[e._v("你确定要删出该权限")])]),e._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"","before-close":e.beforeCloseAdd,title:"提示"},model:{value:e.showAdd,callback:function(t){e.showAdd=t},expression:"showAdd"}},[a("div",{staticStyle:{"text-align":"center","font-size":"0.9rem","margin-top":"1.2rem","margin-bottom":"1rem"}},[e._v("权限组名称   "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入权限组名称"},model:{value:e.oneDataRole.name,callback:function(t){e.$set(e.oneDataRole,"name",t)},expression:"oneDataRole.name"}})],1)])],1)},[],!1,null,null,null));h.options.__file="userTwo.vue";var p={data:function(){return{show1:!0,show2:!0,activeName:"first"}},methods:{handleClick:function(e){"用户管理"==e.label?(this.show1=!0,this.show2=!1):(this.show1=!1,this.show2=!0)}},created:function(){},mounted:function(){},components:{userOne:d,userTwo:h.exports}},v=Object(r.a)(p,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("用户管理")])]),e._v(" "),a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"用户管理",name:"first"}},[e.show1?a("div",[a("userOne")],1):e._e()]),e._v(" "),a("el-tab-pane",{attrs:{label:"权限设置",name:"second"}},[e.show2?a("div",[a("userTwo")],1):e._e()])],1)],1)],1)},[],!1,null,null,null);v.options.__file="index.vue";var m=v.exports,g=a("p46w"),f=a.n(g),b={name:"manager",data:function(){return{activeName2:"first",quanXianTitle:"添加权限组",editname:"添加操作人员",searchData:{dpt:"1"},setPTitle:"添加权限",visible2:!1,searchName:"",jurEditStatus:1,setPstatus:1,editshowQ:!1,addshowQ:!1,delshowQ:!1,tableData:[],options:[{value:"1",label:"经理"},{value:"2",label:"工程师"}],tableData2:[],options3:[{value:1,label:"删除"},{value:2,label:"添加"}],dialogVisible:!1,dialogVisible1:!1,dialogVisible2:!1,dialogVisible4:!1,labelPosition:"right",oneData:{id:"",user:"",access:""},oneDataP:{},oneDataQ:{},currentRow:null,rules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],phone:[{required:!0,message:"请输入用户名",trigger:"blur"},{validator:l.e,trigger:"blur"}],password:[{min:6,max:50,message:"密码不能小于6位",trigger:"blur"}],passwords:[{min:6,max:50,message:"密码不能小于6位",trigger:"blur"}],dep_ids:[{required:!0,message:"请选择部门",trigger:"change"}],pr_id:[{required:!0,message:"请选择权限",trigger:"change"}]},checkAll:!1,checkAllDep:!1,checkedCities:[],checkedDep:[],cities:[{value:"add",label:"添加"},{value:"edit",label:"修改"},{value:"list",label:"查看"},{value:"delete",label:"删除"},{value:"check",label:"审核"}],isIndeterminate:!0,isIndeterminateDep:!0,searData:{},departList:[],departCodeList:[],roleList:[],statusList:[{label:"启用",value:1},{label:"禁用",value:0}],currentPage:1,pageSize:5,linmitTotal:20,delId:"",oneDataRole:{},dialogVisibleWechat:!1,wechatImg:"",dialogVisibleWechatJie:!1,jiebangId:"",pcDuan:!0}},components:{mobileUser:m},created:function(){var e=f.a.get("pr_idArr");e=JSON.parse(e);var t=!1,a=!0,i=!1,s=void 0;try{for(var l,o=n()(e);!(a=(l=o.next()).done);a=!0){"admin"==l.value&&(t=!0)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}t||this.$router.push({path:"/404"}),/Android|webOS|iPhone|BlackBerry/i.test(navigator.userAgent)?this.pcDuan=!1:(this.pcDuan=!0,this.searData.page=1,this.initData(this.searData),this.initDepart(),this.initRoleList())},methods:{initData:function(e){var t=this;Object(s.b)(e).then(function(e){t.currentPage=e.data.current_page,t.linmitTotal=e.data.total,t.tableData=e.data.data}).catch(function(e){console.log(e)})},initDepart:function(){var e=this;this.departList=[],Object(s.a)().then(function(t){var a=!0,i=!1,s=void 0;try{for(var l,o=n()(t.data);!(a=(l=o.next()).done);a=!0){var r=l.value,c={},d={};c.value=r.id,c.label=r.depname,d.value=r.depcode,d.label=r.depname,d.id=r.id,e.departList.push(c),e.departCodeList.push(d)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}}).catch(function(e){console.log(e)})},initRoleList:function(){var e=this;this.roleList=[],this.tableData2=[],Object(s.c)().then(function(t){var a=!0,i=!1,s=void 0;try{for(var l,o=n()(t.data);!(a=(l=o.next()).done);a=!0){var r=l.value,c={};c.label=r.name,c.value=r.id,e.roleList.push(c),e.tableData2.push(r)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}}).catch(function(e){console.log(e)})},handleClick:function(e,t){"用户管理"==e.label||(this.options3=[])},addUser:function(){this.dialogVisible=!0,this.editname="添加操作人员",this.oneData={status:1},void 0!==this.$refs.ruleForm&&this.$refs.ruleForm.resetFields()},delUser:function(){this.delId.length>0?this.dialogVisible1=!0:this.$message({message:"请选择操作人员",type:"warning"})},nullpassword:function(e){e||delete this.oneData.password},handleDialogEdit:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.$message({message:"请根据提示来填写",type:"warning",duration:1500}),!1;"添加操作人员"==t.editname?t.oneData.password?t.oneData.password==t.oneData.passwords?Object(s.e)(t.oneData).then(function(e){t.$message({message:"添加成功",type:"success"}),t.initData(t.searData),t.dialogVisible=!1}).catch(function(e){var a=e.response.data.errors;console.log(a.name),a.name?t.$message({message:"该名称已存在",type:"warning"}):a.phone?t.$message({message:"该手机号码已存在",type:"warning"}):t.$message({message:e.response.data.errors,type:"warning"})}):t.$message({message:"密码不一致",type:"warning"}):t.$message({message:"密码不能为空",type:"warning"}):void 0===t.oneData.password?t.editUserSure():t.oneData.password&&t.oneData.password==t.oneData.passwords?t.editUserSure():t.$message({message:"密码不一致",type:"warning",duration:1500})})},handleCurrentChangePage:function(e){this.searData.page=e,this.initData(this.searData)},handleSearSure:function(){this.initData(this.searData)},editUserSure:function(){var e=this,t=this.oneData.id;this.oneData.submit=1,Object(s.i)(t,this.oneData).then(function(t){e.$message({message:"修改成功",type:"success"}),e.dialogVisible=!1,e.initData(e.searData)}).catch(function(t){var a=t.response.data.errors;console.log(a.name),a.name?e.$message({message:"该名称已存在",type:"warning"}):a.phone?e.$message({message:"该手机号码已存在",type:"warning"}):e.$message({message:t.response.data.errors,type:"warning"})})},handleSelectionChange:function(e){this.delId=[];var t=!0,a=!1,i=void 0;try{for(var s,l=n()(e);!(t=(s=l.next()).done);t=!0){var o=s.value;this.delId.push(o.id)}}catch(e){a=!0,i=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw i}}},asyncAddG:function(){var e=this,t=this.oneData;addList(t).then(function(t){e.initData(),e.$message({message:"添加成功",type:"success",duration:1500})})},asyncEditG:function(){var e=this,t=this.oneData;editList(t).then(function(t){e.initData(),e.$message({message:"编辑成功",type:"success",duration:1500})})},handleXiugai:function(e,t){var a=this,i=t.id;this.editname="修改操作人员",this.dialogVisible=!0,void 0!==this.$refs.ruleForm&&this.$refs.ruleForm.resetFields(),Object(s.i)(i).then(function(e){a.oneData=e.data}).catch(function(e){console.log(e,"修改用户信息获取失败")})},handleDelete:function(e,t){this.dialogVisible1=!0,this.delId=t.id},handleDialogDel:function(){var e=this,t={duid:this.delId};Object(s.g)(t).then(function(t){e.$message({message:"删除成功",type:"success"}),e.searData.page=1,e.initData(e.searData),e.dialogVisible1=!1}).catch(function(e){console.log(e,"删除失败")}),this.dialogVisible1=!1},handleClose:function(e){this.dialogVisible=!1,this.dialogVisible1=!1,this.dialogVisible2=!1,this.dialogVisible4=!1,this.dialogVisibleWechat=!1,this.dialogVisibleWechatJie=!1},addQuanxian:function(){this.checkedCities.length>0&&this.checkedDep.length>0?this.dialogVisible2=!0:this.$message({message:"部门和权限都不能为空，请勾选部门和权限",type:"warning"}),this.oneDataRole.name="",this.jurEditStatus=1,this.editshowQ=!1,this.addshowQ=!0,this.delshowQ=!1,this.quanXianTitle="添加权限组",this.$refs.singleTable1.setCurrentRow()},editQuanxian:function(e){"del"==e&&(this.jurEditStatus=3,this.editshowQ=!1,this.delshowQ=!0,this.addshowQ=!1,this.dialogVisible2=!0,this.quanXianTitle="删除权限组")},handleDialogQ:function(){var e=this;if(1==this.jurEditStatus){var t=this.oneDataRole;t.name?Object(s.d)(t).then(function(t){e.$message({message:"添加权限组成功",type:"success",duration:1500}),e.initRoleList(),e.oneDataRole={action:[],depcode:[]}}).catch(function(t){t.response.data.errors.name?e.$message({message:"添加失败,权限组名称已存在",type:"warning",duration:2e3}):e.$message({message:t.response.data.errors,type:"warning",duration:2e3})}):this.$message({message:"添加失败,名称不能为空",type:"warning"})}else if(2==this.jurEditStatus){var a=this.oneDataRole;a.submit=1,a.rid=a.id,Object(s.h)(a).then(function(t){e.$message({message:"修改权限组成功",type:"success",duration:1500}),e.initRoleList(),e.oneDataRole={action:[],depcode:[]}}).catch(function(e){})}else{var i=this.oneDataRole;i.submit=1,i.rid=i.id,Object(s.f)(i).then(function(t){e.$message({message:"删除成功",type:"success",duration:1500}),e.initRoleList(),e.oneDataRole={action:[],depcode:[]}}).catch(function(t){e.$message({message:t.response.data.message,type:"warning",duration:1500})})}this.cancelSelectList(),this.dialogVisible2=!1},cancelSelectList:function(){this.$refs.singleTable1.setCurrentRow(),this.checkedCities=[],this.checkedDep=[],this.oneDataQ={}},handleCurrentChangeQ:function(e){var t=this,a={};a.rid=e.id,Object(s.j)(a).then(function(a){t.$set(e,"name",a.data.name),t.oneDataRole=a.data,t.oneDataRole.depcode=JSON.parse(t.oneDataRole.depcode),t.oneDataRole.action=JSON.parse(t.oneDataRole.action),t.checkedCities=t.oneDataRole.action,t.checkedDep=t.oneDataRole.depcode}).catch(function(e){})},handleCheckAllChange:function(e){this.checkedCities=e?["add","edit","delete","list","check"]:[],this.isIndeterminate=!1,"0"==this.checkedCities.length?(this.isIndeterminate=!0,this.surePostEditRoletApi()):this.surePostEditRoletApi()},handleCheckAllChangeDep:function(e){var t=[],a=!0,i=!1,s=void 0;try{for(var l,o=n()(this.departCodeList);!(a=(l=o.next()).done);a=!0){var r=l.value;t.push(r.value)}}catch(e){i=!0,s=e}finally{try{!a&&o.return&&o.return()}finally{if(i)throw s}}this.checkedDep=e?t:[],this.isIndeterminateDep=!1,"0"==this.checkedDep.length?(this.surePostEditRoletApi(),this.isIndeterminateDep=!0):this.surePostEditRoletApi()},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.cities.length,this.isIndeterminate=t>0&&t<this.cities.length,this.surePostEditRoletApi()},surePostEditRoletApi:function(){var e=this,t=this.oneDataRole;t.submit=1,t.rid=t.id,t.action=this.checkedCities,t.depcode=this.checkedDep,t.rid&&(t.action.length>0&&t.depcode.length>0?Object(s.h)(t).then(function(a){e.$message({message:"修改权限成功",type:"success",duration:1500}),e.handleCurrentChangeQ(t)}).catch(function(e){}):this.$message({message:"修改失败,权限和部门都不能为空，请重新勾选下",type:"warning"}))},handleCheckedDepChange:function(e){var t=e.length;this.checkAllDep=t===this.departCodeList.length,this.isIndeterminateDep=t>0&&t<this.departCodeList.length,this.surePostEditRoletApi()},handleSetP:function(){},editSetP:function(e){this.setPstatus=e,this.setPTitle="add"==e?"添加":"edit"==e?"修改":"删除",this.dialogVisible4=!0},handleWechat:function(e,t){var a=this;this.wechatImg="";var i={};i.uid=t.id,Object(s.k)(i).then(function(e){a.wechatImg=e.data.message,a.dialogVisibleWechat=!0}).catch(function(e){})},handleWechatJieBang:function(e,t){this.jiebangId=t.id,this.dialogVisibleWechatJie=!0},jiebangSure:function(){var e=this,t={};t.uid=this.jiebangId,Object(s.l)(t).then(function(t){e.$message({message:"解绑成功",type:"success"}),e.dialogVisibleWechatJie=!1,e.initData(e.searData)}).catch(function(e){console.log("解绑失败")})},handleRoleName:function(e){var t=this;if(e==this.oneDataRole.name);else{this.oneDataRole.name=e;var a=this.oneDataRole;a.submit="1",a.rid=this.oneDataRole.id,Object(s.h)(a).then(function(e){t.$message({message:"修改权限成功",type:"success",duration:1500}),t.handleCurrentChangeQ(a)}).catch(function(e){t.initRoleList(),e.response.data.errors.name?t.$message({message:"添加失败,权限组名称已存在",type:"warning",duration:2e3}):t.$message({message:e.response.data.errors,type:"warning",duration:2e3})})}}}},D=(a("MW5T"),Object(r.a)(b,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"managers"},[e.pcDuan?a("div",[a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisibleWechatJie,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisibleWechatJie=t}}},[a("span",[e._v("你确定要解绑微信")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.jiebangSure}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"微信绑定二维码",visible:e.dialogVisibleWechat,width:"550px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisibleWechat=t}}},[a("div",{staticStyle:{"text-align":"center"}},[a("img",{staticStyle:{width:"250px"},attrs:{src:e.wechatImg,alt:""}})]),e._v(" "),a("div",{staticStyle:{"text-align":"center","font-size":"18px"}},[e._v("二维码有效期10分钟，请在有效期内完成操作")]),e._v(" "),a("div",{staticStyle:{"text-align":"center","font-size":"18px","margin-top":"10px"}},[e._v("二维码截图发给该用户，用户扫码或识别即可完成绑定。")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisibleWechat=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisibleWechat=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.setPTitle,visible:e.dialogVisible4,width:"350px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible4=t}}},["add"==e.setPstatus?a("el-row",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.oneDataP,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"权限名字"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入权限名字"},model:{value:e.oneDataP.name,callback:function(t){e.$set(e.oneDataP,"name",t)},expression:"oneDataP.name"}})],1)],1)],1):"edit"==e.setPstatus?a("el-row",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.oneDataP,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"原权限名字"}},[a("el-select",{staticClass:"input-width",attrs:{placeholder:"请选择"},model:{value:e.oneDataP.name,callback:function(t){e.$set(e.oneDataP,"name",t)},expression:"oneDataP.name"}},e._l(e.options3,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"新权限名字"}},[a("el-input",{attrs:{placeholder:"请输入权限名字"},model:{value:e.oneDataP.name,callback:function(t){e.$set(e.oneDataP,"name",t)},expression:"oneDataP.name"}})],1)],1)],1):a("el-row",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.oneDataP,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"权限名字"}},[a("el-select",{staticClass:"input-width",attrs:{placeholder:"请选择"},model:{value:e.oneDataP.name,callback:function(t){e.$set(e.oneDataP,"name",t)},expression:"oneDataP.name"}},e._l(e.options3,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible4=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleSetP}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.quanXianTitle,visible:e.dialogVisible2,width:"430px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible2=t}}},[e.editshowQ?a("div",[e._v("\n\t\t\t\t\t权限组名称   "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入权限组名称"},model:{value:e.oneDataRole.name,callback:function(t){e.$set(e.oneDataRole,"name",t)},expression:"oneDataRole.name"}})],1):e._e(),e._v(" "),e.addshowQ?a("div",[e._v("\n\t\t\t\t\t权限组名称   "),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入权限组名称"},model:{value:e.oneDataRole.name,callback:function(t){e.$set(e.oneDataRole,"name",t)},expression:"oneDataRole.name"}})],1):e._e(),e._v(" "),e.delshowQ?a("div",[e._v("\n\t\t\t\t\t你确定要删除\n\t\t\t\t")]):e._e(),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible2=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleDialogQ()}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"删除操作人员",visible:e.dialogVisible1,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible1=t}}},[e._v("\n\t\t \t你确定要删除操作人员\n\t\t  "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible1=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogDel}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.editname,visible:e.dialogVisible,width:"450px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{"label-position":e.labelPosition,"label-width":"125px",model:e.oneData,rules:e.rules}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{staticClass:"input-widths",model:{value:e.oneData.name,callback:function(t){e.$set(e.oneData,"name",t)},expression:"oneData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[a("el-input",{staticClass:"input-widths",model:{value:e.oneData.phone,callback:function(t){e.$set(e.oneData,"phone",t)},expression:"oneData.phone"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"部门",prop:"dep_ids"}},[a("el-select",{staticClass:"input-widths",attrs:{placeholder:"请选择"},model:{value:e.oneData.dep_ids,callback:function(t){e.$set(e.oneData,"dep_ids",t)},expression:"oneData.dep_ids"}},e._l(e.departList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"密码 ",prop:"password"}},[a("el-input",{staticClass:"input-widths",attrs:{placeholder:"添加操作人员"==e.editname?"":"如果需要修改,请填写",type:"password"},on:{change:e.nullpassword},model:{value:e.oneData.password,callback:function(t){e.$set(e.oneData,"password",t)},expression:"oneData.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"重复密码 ",prop:"passwords"}},[a("el-input",{staticClass:"input-widths",attrs:{placeholder:"添加操作人员"==e.editname?"":"请再次输入要修改的密码",type:"password"},model:{value:e.oneData.passwords,callback:function(t){e.$set(e.oneData,"passwords",t)},expression:"oneData.passwords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"权限",prop:"pr_id"}},[a("el-select",{staticClass:"input-widths",attrs:{placeholder:"请选择"},model:{value:e.oneData.pr_id,callback:function(t){e.$set(e.oneData,"pr_id",t)},expression:"oneData.pr_id"}},e._l(e.roleList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-radio-group",{model:{value:e.oneData.status,callback:function(t){e.$set(e.oneData,"status",t)},expression:"oneData.status"}},[a("el-radio",{attrs:{label:1}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("禁用")])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleDialogEdit("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("用户管理")])]),e._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeName2,callback:function(t){e.activeName2=t},expression:"activeName2"}},[a("el-tab-pane",{attrs:{label:"用户管理",name:"first"}},[a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:6}},[a("el-button",{attrs:{type:"success"},on:{click:e.addUser}},[e._v("添加")]),e._v(" "),a("el-button",{staticStyle:{"background-color":"#d6d6d6"},on:{click:e.delUser}},[e._v("删除")])],1),e._v(" "),a("el-col",{staticClass:"box_rights",attrs:{span:18}},[e._v("\n\t\t\t\t          \n\t\t\t\t         "),a("el-input",{staticClass:"input-width",attrs:{placeholder:"用户名,手机"},model:{value:e.searData.sear,callback:function(t){e.$set(e.searData,"sear",t)},expression:"searData.sear"}},[a("i",{staticClass:"el-input__icon el-icon-search ",attrs:{slot:"prefix"},slot:"prefix"})]),e._v("\n\t\t\t\t\t\t   \n\t\t\t\t\t \t"),a("el-select",{staticClass:"input-width",attrs:{placeholder:"请选择部门",clearable:""},model:{value:e.searData.depa,callback:function(t){e.$set(e.searData,"depa",t)},expression:"searData.depa"}},e._l(e.departList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v("\n\t\t\t\t\t    \n\t\t\t\t\t  "),a("el-select",{staticClass:"input-width",attrs:{placeholder:"请选择权限",clearable:""},model:{value:e.searData.prim,callback:function(t){e.$set(e.searData,"prim",t)},expression:"searData.prim"}},e._l(e.roleList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v("\n\t\t\t\t\t\t  \n\t\t\t\t\t\t"),a("el-select",{staticClass:"input-width",attrs:{placeholder:"请选择状态",clearable:""},model:{value:e.searData.status,callback:function(t){e.$set(e.searData,"status",t)},expression:"searData.status"}},e._l(e.statusList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v("\n\t\t\t\t\t\t  \n\t\t\t\t\t\t"),a("el-button",{on:{click:e.handleSearSure}},[e._v("搜索")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"depname",label:"所属部门",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"prname",label:"权限",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(1==t.row.status?"启用":"禁用")+"\n\t\t\t\t\t\t\t\t")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"action",label:"操作",width:"250",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.openid?a("span",[1!=t.row.id?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleWechatJieBang(t.$index,t.row)}}},[e._v("微信解绑")]):e._e()],1):e._e(),e._v(" "),t.row.openid?e._e():a("span",[1!=t.row.id?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleWechat(t.$index,t.row)}}},[e._v("微信绑定")]):e._e()],1),e._v("\n\t\t\t\t\t\t  \n\t\t\t\t\t\t"),a("span",[1!=t.row.id?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleXiugai(t.$index,t.row)}}},[e._v("修改")]):e._e()],1),e._v("  \n\t\t\t\t\t\t\t"),a("span",[1!=t.row.id?a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"mini"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除\n\t\t\t\t\t\t\t\t\t")]):e._e()],1)]}}])})],1),e._v(" "),a("el-row",{staticClass:"mt"},[a("el-col",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"10px"},attrs:{span:24}},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,total:e.linmitTotal,layout:"total, prev, pager, next, jumper",background:""},on:{"current-change":e.handleCurrentChangePage}})],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"权限设置",name:"second"}},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addQuanxian}},[e._v("添加权限组")]),e._v(" "),a("el-button",{staticStyle:{"background-color":"#d6d6d6"},on:{click:function(t){e.editQuanxian("del")}}},[e._v("删除权限组")])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"movemouse"},[a("el-table",{ref:"singleTable1",staticClass:"tb-edit",staticStyle:{},attrs:{data:e.tableData2,border:"","tooltip-effect":"dark","highlight-current-row":""},on:{"row-click":e.handleCurrentChangeQ}},[a("el-table-column",{attrs:{property:"name",label:"权限组(单击选中)",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"date-show"},[t.row.tenat_id?e._e():a("span",{style:{fontWeight:t.row.tenat_id?"":"bold"}},[e._v(e._s(t.row.name))]),e._v(" "),t.row.tenat_id?a("el-input",{on:{change:function(t){e.handleRoleName(t)}},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}}):e._e()],1),e._v(" "),a("span",{style:{fontWeight:t.row.tenat_id?"":"bold"}},[e._v(e._s(t.row.name))])]}}])})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:1}},[e._v("  ")]),e._v(" "),a("el-col",{attrs:{span:16}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("选择权限")]),e._v(" "),a("span",{staticStyle:{display:"inline-block",float:"right"}})]),e._v(" "),a("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("部门")]),e._v(" "),a("div",[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminateDep},on:{change:e.handleCheckAllChangeDep},model:{value:e.checkAllDep,callback:function(t){e.checkAllDep=t},expression:"checkAllDep"}},[e._v("全选")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedDepChange},model:{value:e.checkedDep,callback:function(t){e.checkedDep=t},expression:"checkedDep"}},e._l(e.departCodeList,function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[e._v("权限")]),e._v(" "),a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"checkedCities"}},e._l(e.cities,function(t){return a("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}))],1)],1)],1)],1)],1)],1)],1):a("div",[a("mobileUser")],1)])},[],!1,null,null,null));D.options.__file="index.vue";t.default=D.exports},ecw5:function(e,t,a){},fUIq:function(e,t,a){},"wk8/":function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"i",function(){return s}),a.d(t,"g",function(){return l}),a.d(t,"e",function(){return o}),a.d(t,"a",function(){return r}),a.d(t,"c",function(){return c}),a.d(t,"j",function(){return d}),a.d(t,"d",function(){return u}),a.d(t,"h",function(){return h}),a.d(t,"f",function(){return p}),a.d(t,"k",function(){return v}),a.d(t,"l",function(){return m});var i=a("t3Un");function n(e){return Object(i.a)({url:"api/manage/depuser/list",method:"get",params:e})}function s(e,t){var a=t;return Object(i.a)({url:"api/manage/depuser/edit/"+e,method:"post",data:a})}function l(e){var t=e;return Object(i.a)({url:"api/manage/depuser/del",method:"post",data:t})}function o(e){var t=e;return Object(i.a)({url:"api/manage/depuser/add",method:"post",data:t})}function r(e){return Object(i.a)({url:"api/manage/depart/list",method:"get",params:e})}function c(e){return Object(i.a)({url:"api/manage/userrole/list",method:"get",params:e})}function d(e){var t=e;return Object(i.a)({url:"api/manage/userrole/get",method:"post",data:t})}function u(e){var t=e;return Object(i.a)({url:"api/manage/userrole/add",method:"post",data:t})}function h(e){var t=e;return Object(i.a)({url:"api/manage/userrole/get",method:"post",data:t})}function p(e){var t=e;return Object(i.a)({url:"api/manage/userrole/del",method:"post",data:t})}function v(e){var t=e;return Object(i.a)({url:"api/wechat/bind",method:"post",data:t})}function m(e){var t=e;return Object(i.a)({url:"api/wechat/untying",method:"post",data:t})}},"xM+T":function(e,t,a){"use strict";var i=a("fUIq");a.n(i).a}}]);
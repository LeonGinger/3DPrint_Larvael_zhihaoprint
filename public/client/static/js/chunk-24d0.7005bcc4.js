(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-24d0"],{"/Y8H":function(t,e,a){},"/bHb":function(t,e,a){"use strict";var i=a("pOOa");a.n(i).a},"0ias":function(t,e,a){},"3Vum":function(t,e,a){},"3oGs":function(t,e,a){t.exports=a.p+"static/img/msheng1.871957d.png"},"3wbD":function(t,e,a){"use strict";var i=a("cZQI");a.n(i).a},"4+cv":function(t,e,a){"use strict";var i=a("zF47");a.n(i).a},"71V4":function(t,e,a){t.exports=a.p+"static/img/mxiao1.452a6f9.png"},"8GNM":function(t,e,a){},"8Wt5":function(t,e,a){},BMdL:function(t,e,a){"use strict";var i=a("PFDm");a.n(i).a},EOgP:function(t,e,a){},"ESs/":function(t,e,a){"use strict";var i=a("SLIR");a.n(i).a},"F/pr":function(t,e,a){t.exports=a.p+"static/img/msheng4.d3efe21.png"},GBIW:function(t,e,a){"use strict";a.r(e);var i=a("GQeE"),n=a.n(i),o=a("FyfS"),l=a.n(o),s=a("P2sY"),r=a.n(s),c=a("gDS+"),d=a.n(c),u=a("Pjfh"),p=a("ac2h"),h=a("glbJ"),v=a("uXAG"),m=a("p46w"),f=a.n(m),_={data:function(){return{listShow:!1,activeNames:[],searData:{},statusList:[{label:"等待审核",value:0},{label:"通过",value:1}],tableData:[],quoData:{},showQuo:!1,TinymceShow:!0,allprice:"",allPage:1,currentPage:1,inputPage:"",plTotalPage:"5",perPage:5,active:0,showPart:!1,oneData:{parts:[]},showRiQiSear:!1,currentDateSear:new Date,shengheShow:!1,showSH:!1,shenheData:{}}},methods:{clearSear:function(){this.searData={},this.searData.page=1},init:function(t){var e=this;this.tableData=[],Object(u.c)(t).then(function(t){e.allPage=t.data.last_page,e.plTotalPage=t.data.last_page+"页",e.currentPage=t.data.current_page,e.perPage=Number(t.data.per_page),e.tableData=t.data.data,e.tableData.length?e.listShow=!1:e.listShow=!0}).catch(function(t){})},handleSH:function(t){this.showSH=!0,this.shenheData={},this.shenheData.rid=t.id,this.$set(this.shenheData,"status","1")},shenHeSure:function(t,e){var a=this;if("confirm"===t){console.log(this.shenheData);var i={};1==this.shenheData.status?((i=this.shenheData).status=1,Object(u.b)(i).then(function(t){a.init(a.searData),a.$toast.success("审核成功"),e()}).catch(function(t){e()})):this.shenheData.message?((i=this.shenheData).status=2,Object(u.b)(i).then(function(t){a.init(a.searData),a.$toast.success("提交成功"),e()}).catch(function(t){e()})):(e(!1),this.$toast("请输入不通过原因"))}else e()},getQuotation:function(t){var e=this;this.allprice=0,Object(p.g)(t).then(function(t){e.quoData=t.data,e.quoData.status?e.quoData.status="通过":e.quoData.status="不通过";var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.quoData.parts);!(a=(o=s.next()).done);a=!0){var r=o.value;r.due_date&&(r.due_date=r.due_date.split(" ")[0]),r.start_date&&(r.start_date=r.start_date.split(" ")[0]);var c;c=Number(r.product_num)*Number(r.price),e.allprice=c+Number(e.allprice)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}e.quoData.freight=Number(e.quoData.freight).toFixed(2),e.quoData.taxation=Number(e.quoData.taxation).toFixed(2),e.allprice=Number(e.allprice)+Number(e.quoData.freight)+Number(e.quoData.taxation)}).catch(function(t){console.log(t)})},handleQuo:function(t){this.showQuo=!0,this.getQuotation(t.orderid)},onSubmit:function(){this.searData.page=1,this.init(this.searData)},handleCurrentPage:function(t){this.searData.page=t,this.init(this.searData)},seePart:function(t){this.oneData=t,this.$nextTick(function(){this.showPart=!0})},jinzhiJianpan:function(){document.activeElement.blur()},seeDaPicture:function(t){Object(v.a)({images:[t],asyncClose:!0})},riqiSureSear:function(t){if(t){var e=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate();this.$set(this.searData,"edat",e),this.showRiQiSear=!1}else this.showRiQiSear=!1,this.$set(this.searData,"edat","")}},created:function(){this.init(this.searData);var t=f.a.get("actionArr");t=JSON.parse(t);var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){"check"==n.value&&(this.shengheShow=!0)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}},mounted:function(){},components:{Tinymce:h.a}},g=(a("R8/t"),a("KHd+")),b=Object(g.a)(_,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"moReturnGood"},[a("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("van-collapse-item",{attrs:{title:"搜索",name:"1"}},[a("el-form",{staticStyle:{width:"70%",margin:"0 auto"},attrs:{model:t.searData}},[a("el-form-item",[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入客户名称"},model:{value:t.searData.sear,callback:function(e){t.$set(t.searData,"sear",e)},expression:"searData.sear"}})],1),t._v(" "),a("el-form-item",[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"请输入订单编号"},model:{value:t.searData.orde,callback:function(e){t.$set(t.searData,"orde",e)},expression:"searData.orde"}})],1),t._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择状态"},model:{value:t.searData.stat,callback:function(e){t.$set(t.searData,"stat",e)},expression:"searData.stat"}},t._l(t.statusList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请选择日期",readonly:""},on:{focus:function(e){t.showRiQiSear=!0}},model:{value:t.searData.edat,callback:function(e){t.$set(t.searData,"edat",e)},expression:"searData.edat"}})],1),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("span",[a("el-button",{attrs:{size:"small"},on:{click:t.clearSear}},[t._v("清空")])],1),t._v("\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t"),a("span",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSubmit}},[t._v("查询")])],1)])],1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.init(t.searData)}}},[t._v("刷新列表")])],1),t._v(" "),t.listShow?a("div",{staticStyle:{"margin-top":"10px"}},[t._v("暂无退换货订单")]):t._e(),t._v(" "),t._l(t.tableData,function(e,i){return a("van-row",{key:e.index,staticStyle:{"font-size":"0.9rem","line-height":"1.3rem","margin-top":"10px",padding:"5px","border-bottom":"1px solid #e5e5e5"}},[a("van-col",{attrs:{span:"3"}},[t._v("\n\t\t\t\t\t  \n\t\t\t\t")]),t._v(" "),a("van-col",{staticClass:"maindiv",attrs:{span:"21"}},[a("div",[t._v("\n\t\t\t\t\t\t客户名称 : "+t._s(e.cusname)+"   \n\t\t\t\t\t")]),t._v(" "),a("div",[t._v("订单编号 : "+t._s(e.orderno))]),t._v(" "),a("div",[t._v("退换货类型: "+t._s(0==e.returned_type?"取消订单":"零件重做"))]),t._v(" "),a("div",[t._v("申请原因 :"+t._s(e.remark))]),t._v(" "),a("div",[t._v("提交日期 :"+t._s(e.created_at))]),t._v(" "),a("div",[t._v("状态 : "+t._s(0==e.status?"等待审核":"通过"))]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"100%",padding:"10px 0 5px"}},[1==e.returned_type?a("el-button",{attrs:{size:"small"},on:{click:function(a){t.seePart(e)}}},[t._v("查看零件")]):t._e(),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(a){t.handleQuo(e)}}},[t._v("查看订单")]),t._v(" "),t._v(" "),t.shengheShow?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.handleSH(e)}}},[t._v("审核")]):t._e()],1)])],1)}),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("div",{staticClass:"quanping"},[a("van-actionsheet",{attrs:{title:"订单"},model:{value:t.showQuo,callback:function(e){t.showQuo=e},expression:"showQuo"}},[a("div",{staticClass:"quoMain"},[a("h3",[t._v("供需方信息区域")]),t._v(" "),a("div",{staticStyle:{border:"1px solid #d6d6d6",padding:"10px"}},[a("div",[t._v("报价单号 : "+t._s(t.quoData?t.quoData.no:""))]),t._v(" "),a("div",[t._v("报价日期 : "+t._s(t.quoData?t.quoData.updated_at:""))]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("img",{staticStyle:{width:"120px"},attrs:{src:t.quoData.qrcode_url,alt:""}})])]),t._v(" "),a("div",{staticStyle:{border:"1px solid #d6d6d6",padding:"10px","margin-top":"10px"}},[a("div",[t._v("购买方名称 : "+t._s(t.quoData?t.quoData.cusname:""))]),t._v(" "),t.quoData.ticket_info?a("div",[t.quoData.ticket_info.taxno?a("div",[t._v("统一社会信用代码 : "+t._s(t.quoData.ticket_info?t.quoData.ticket_info.taxno:""))]):t._e(),t._v(" "),t.quoData.ticket_info.bank?a("div",[t._v("开户银行 : "+t._s(t.quoData.ticket_info?t.quoData.ticket_info.bank:""))]):t._e(),t._v(" "),t.quoData.ticket_info.bankno?a("div",[t._v("银行账号 : "+t._s(t.quoData.ticket_info?t.quoData.ticket_info.bankno:""))]):t._e()]):t._e(),t._v(" "),a("div",[t._v("联系人 : "),t._l(t.quoData.linkmans,function(e){return a("span",[t._v(t._s(e)+"  ")])})],2),t._v(" "),t.quoData.postaddr?a("div",[t._v("零件收货地址 : \n\t\t\t\t\t"+t._s(t.quoData.postaddr.province)+"/"+t._s(t.quoData.postaddr.city)+"/"+t._s(t.quoData.postaddr.area)+"/"+t._s(t.quoData.postaddr.lk_address)+"\n\t\t\t\t\t")]):t._e(),t._v(" "),t.quoData.invoaddr?a("div",[t._v("发票地址地址 : \n\t\t\t\t\t"+t._s(t.quoData.invoaddr.province)+"/"+t._s(t.quoData.invoaddr.city)+"/"+t._s(t.quoData.invoaddr.area)+"/"+t._s(t.quoData.invoaddr.lk_address)+"\n\t\t\t\t\t")]):t._e()]),t._v(" "),a("div",{staticStyle:{border:"1px solid #d6d6d6",padding:"10px","margin-top":"10px"}},[a("div",[t._v("制作方")]),t._v(" "),a("div",[t._v("销售工程师 :"+t._s(t.quoData.saler?t.quoData.saler.name:"")+","+t._s(t.quoData.saler?t.quoData.saler.phone:""))]),t._v(" "),a("div",[t._v("项目工程师 :"+t._s(t.quoData.pojer?t.quoData.pojer.name:"")+","+t._s(t.quoData.pojer?t.quoData.pojer.phone:""))]),t._v(" "),a("div",[t._v("项目经理 :"+t._s(t.quoData.manger?t.quoData.manger.name:"")+","+t._s(t.quoData.manger?t.quoData.manger.phone:""))])]),t._v(" "),a("h3",[t._v("零件清单区域")]),t._v(" "),a("ul",t._l(t.quoData.parts,function(e){return a("li",[a("van-row",{staticStyle:{"margin-bottom":"3px"}},[t._v(t._s(e.name))]),t._v(" "),a("van-row",[a("van-col",{attrs:{span:10}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.diagram,alt:""},on:{click:function(a){t.seeDaPicture(e.diagram)}}})]),t._v(" "),a("van-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),a("van-col",{attrs:{span:13}},[a("p",{staticStyle:{"word-wrap":"break-word","word-break":"break-all"}},[t._v(t._s(e.matname)+" , "+t._s(e.modname)+" , "+t._s(e.surname)+" , "+t._s(e.equname)+" ")]),t._v(" "),a("p",[t._v("数量:"+t._s(e.product_num)+"个 单价:"+t._s(Number(e.price).toFixed(2))+"元")]),t._v(" "),a("p",[t._v("小计:"+t._s((Number(e.price)*Number(e.product_num)).toFixed(2)||"")+"元")])])],1),t._v(" "),a("p",[t._v("备注 : "+t._s(e.remark))]),t._v(" "),a("p",[t._v("拟启动时刻 :"+t._s(e.start_date)+", 拟到货时刻 :"+t._s(e.due_date))])],1)})),t._v(" "),a("div",{staticStyle:{border:"1px solid #d6d6d6","font-size":"0.9rem",padding:"10px",margin:"10px 0"}},[t._v("税费 : "+t._s(t.quoData.taxation)+" 运费 : "+t._s(t.quoData.freight)+" 合计: "+t._s(t.allprice?t.allprice.toFixed(2):""))]),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-bottom":"0.5rem"}},[t._v("零件质量检验标准")]),t._v(" "),a("div",[t.TinymceShow?a("div",{staticClass:"hidebutton"},[a("Tinymce",{ref:"editor",attrs:{height:200},model:{value:t.quoData.qs,callback:function(e){t.$set(t.quoData,"qs",e)},expression:"quoData.qs"}})],1):t._e()]),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"1rem","margin-bottom":"0.5rem"}},[t._v("货物交付以及结算区域")]),t._v(" "),a("div",[t.TinymceShow?a("div",{staticClass:"hidebutton"},[a("Tinymce",{ref:"editor",attrs:{height:200},model:{value:t.quoData.qt,callback:function(e){t.$set(t.quoData,"qt",e)},expression:"quoData.qt"}})],1):t._e()]),t._v(" "),a("div",{staticClass:"sure"},[a("el-button",{on:{click:function(e){t.showQuo=!1}}},[t._v("关闭")]),t._v("  \n\t   \t\t")],1)])])],1),t._v(" "),a("div",{staticClass:"quanping"},[a("van-actionsheet",{attrs:{title:"查看零件"},model:{value:t.showPart,callback:function(e){t.showPart=e},expression:"showPart"}},[a("div",{staticClass:"quoMain"},[a("h3",[t._v("零件清单区域")]),t._v(" "),t.oneData.parts?a("ul",t._l(t.oneData.parts,function(e){return a("li",[a("van-row",[a("van-col",{attrs:{span:8}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.diagram,alt:""},on:{click:function(a){t.seeDaPicture(e.diagram)}}})]),t._v(" "),a("van-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),a("van-col",{attrs:{span:13}},[a("p",[t._v("零件名:"+t._s(e.name))]),t._v(" "),a("p",[t._v("重做数量:"+t._s(e.product_num)+"个 ")])])],1)],1)})):t._e(),t._v(" "),a("div",{staticClass:"sure"},[a("el-button",{on:{click:function(e){t.showPart=!1}}},[t._v("关闭")]),t._v("  \n\t   \t")],1)])])],1),t._v(" "),a("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-row",{staticStyle:{display:"flex","align-items":"center"}},[a("van-col",{staticStyle:{"padding-left":"5px"},attrs:{span:"19"}},[a("van-pagination",{attrs:{"page-count":t.allPage,"show-page-size":3,"items-per-page":t.perPage,"force-ellipses":""},on:{change:t.handleCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("van-col",{staticStyle:{"padding-left":"5px","padding-right":"5px"},attrs:{span:"5"}},[a("el-input",{attrs:{placeholder:t.plTotalPage,onkeyup:"this.value=this.value.replace(/[^0-9-]+/,'')"},on:{change:function(e){t.InputCurrentPage(e)}},model:{value:t.inputPage,callback:function(e){t.inputPage=e},expression:"inputPage"}})],1)],1)],1),t._v(" "),a("van-actionsheet",{attrs:{title:"选择日期"},model:{value:t.showRiQiSear,callback:function(e){t.showRiQiSear=e},expression:"showRiQiSear"}},[a("van-datetime-picker",{attrs:{type:"date"},on:{confirm:t.riqiSureSear,cancel:function(e){t.riqiSureSear()}},model:{value:t.currentDateSear,callback:function(e){t.currentDateSear=e},expression:"currentDateSear"}})],1),t._v(" "),a("van-dialog",{attrs:{title:"审核退换货","show-cancel-button":"","before-close":t.shenHeSure},model:{value:t.showSH,callback:function(e){t.showSH=e},expression:"showSH"}},[a("div",{staticStyle:{margin:"15px auto",width:"90%"}},[a("div",[t._v("审核 : "),a("el-radio",{attrs:{label:"1"},model:{value:t.shenheData.status,callback:function(e){t.$set(t.shenheData,"status",e)},expression:"shenheData.status"}},[t._v("通过")]),t._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:t.shenheData.status,callback:function(e){t.$set(t.shenheData,"status",e)},expression:"shenheData.status"}},[t._v("不通过")])],1),t._v(" "),2==t.shenheData.status?a("div",{staticStyle:{"margin-top":"10px"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入审核不通过的原因"},model:{value:t.shenheData.message,callback:function(e){t.$set(t.shenheData,"message",e)},expression:"shenheData.message"}})],1):t._e()])])],2)},[],!1,null,null,null);b.options.__file="index.vue";var y,w,D,x,k,S=b.exports,C=a("lD00"),P=a("Yfch"),$={data:function(){return{editPCData:{},editPartCopyShow:!1,hdSPartId:[],orderCopyShow:!1,copyOid:"",CopyorderTable:[],tabShow:"first",tabShow1:!0,tabShow2:!1,daoruData:{},dialogDaoRu:!1,checkedGoods:[],checked:!1,qiyuShow:!1,qiyuData:{},kusuData:{},slideprice:"",kusuaddpartshow:!1,addShowQ:!1,editShowQ:!1,delShowQ:!1,partTitle:"添加零件",labelPosition:"left",addOrderShow:!1,addPartsShow:!1,activeNames:[],active:0,tableData:[],searData:{},options:[{value:1,label:"已生成"},{value:0,label:"未生成"}],options1:[{value:1,label:"通过"},{value:0,label:"等待审核"}],options2:[{label:"确认合同",value:1}],allPage:1,currentPage:1,inputPage:"",plTotalPage:"5",perPage:5,showQuo:!1,quoData:{parts:[]},koptions:[],consignee:[],linkman:[],rules:{customer_id:[{required:!0,message:"请选择客户",trigger:"change"}],invoaddr:[{required:!0,message:"请选择发票地址",trigger:"change"}],manger:[{required:!0,message:"请选择项目经理",trigger:"change"}],pojer:[{required:!0,message:"请选择项目工程师",trigger:"change"}],saler:[{required:!0,message:"请选择销售工程师",trigger:"change"}],freight:[{required:!0,message:"请输入运费",trigger:"blur"},{validator:P.d,trigger:"blur"}],postaddr:[{required:!0,message:"请选择邮寄地址",trigger:"change"}],taxation:[{required:!0,message:"请输入税费",trigger:"blur"},{validator:P.d,trigger:"blur"}]},quoSureData:{},delOrderDialog:!1,delId:"",TinymceShow:!0,allprice:"",orderStatus:[{value:0,label:"等待审核"},{value:1,label:"待客户确认"},{value:2,label:"准备生产"},{value:3,label:"生产中"},{value:4,label:"生产完成"},{value:5,label:"已发货"},{value:6,label:"完成"}],onePart:{},materialList:[],technologyList:[],equipmentList:[],depusers:[],surfaceList:[],materialListPrice:[],oneData:{parts:[]},orderTitle:"添加订单",onepartsIndex:"",rulesPart:{name:[{required:!0,message:"请输入零件名称",trigger:"blur"}],volume_size:[{required:!0,message:"零件尺寸不能为空",trigger:"blur"}],molding_process_id:[{required:!0,message:"请选择成型工艺",trigger:"change"}],equipment_id:[{required:!0,message:"请选择成型设备",trigger:"change"}],material_id:[{required:!0,message:"请选择成型材质",trigger:"change"}],surface_id:[{required:!0,message:"请选择表面处理",trigger:"change"}],product_num:[{required:!0,message:"请输入零件数量",trigger:"blur"},{validator:P.c,trigger:"blur"},{validator:P.b,trigger:"blur"}],coefficient:[{required:!0,message:"价格系数不能为空",trigger:"blur"},{validator:P.a,trigger:"blur"}],start_date:[{required:!0,message:"开始日期不能为空",trigger:"change"}],due_date:[{required:!0,message:"结束日期不能为空",trigger:"change"}]},dialogVisibleDelpart:!1,showRiQi:!1,currentDate:new Date,riqiStatus:"",itemData:{},showRiQiSear:!1,currentDateSear:new Date,shengheShow:!1,showKuSu:!1,kusuStatus:1,uploadLoading:!1,materialAllList:[],kusupartArr:[],kusupartshowTitle:"添加零件",kusuAllprice:0,kusuPath:"",kusuOrderShengshow:!1,orderStatusSH:"",partEditMAId:"",listShow:!1}},methods:{deloneCPart:function(t){var e=this;this.$dialog.confirm({message:"你确定要删除"}).then(function(){for(var a=0;a<e.CopyorderTable.length;a++)e.CopyorderTable[a].id==t.id&&e.CopyorderTable.splice(a,1)}).catch(function(){})},editoneCPart:function(){this.onePart={},this.editPartCopyShow=!0},editoneCPartSure:function(t,e){if("confirm"===t){var a=!1,i=!0,n=!1,o=void 0;try{for(var s,r=l()(this.CopyorderTable);!(i=(s=r.next()).done);i=!0){var c=s.value,d=!0,u=!1,p=void 0;try{for(var h,v=l()(this.hdSPartId);!(d=(h=v.next()).done);d=!0){var m=h.value;if(c.id==m)this.onePart.product_num&&this.$set(c,"product_num",this.onePart.product_num),this.onePart.start_date&&this.onePart.due_date?(c.start_date=this.onePart.start_date,c.due_date=this.onePart.due_date):(this.onePart.start_date||this.onePart.due_date)&&(a=!0)}}catch(t){u=!0,p=t}finally{try{!d&&v.return&&v.return()}finally{if(u)throw p}}}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}a?(this.$toast("请选择订单拟启动时刻 和 拟到货时刻"),e(!1)):e()}else e()},copyOneOrder:function(t){var e=this;this.orderStatusSH="等待审核",console.log(this.orderStatusSH);var a=t.id;this.copyOid=t.id;var i={oid:a},n=new Date,o=n.getMonth()+1,s=n.getFullYear()+"/"+o+"/"+n.getDate(),r=new Date(n.getTime()+864e5),c=r.getFullYear(),d=r.getMonth()+1;if(d<10)var u="0"+String(u);var h=c+"/"+d+"/"+r.getDate();Object(p.p)(i).then(function(t){e.CopyorderTable=t.data;var a=!0,i=!1,n=void 0;try{for(var o,r=l()(e.CopyorderTable);!(a=(o=r.next()).done);a=!0){var c=o.value;c.start_date=s,c.due_date=h,c.volume_size=JSON.parse(c.volume_size)}}catch(t){i=!0,n=t}finally{try{!a&&r.return&&r.return()}finally{if(i)throw n}}}).catch(function(t){}),this.orderCopyShow=!0,this.hdSPartId=[]},copyOneOrderSure:function(){var t=this,e={oid:this.copyOid,parts:this.CopyorderTable};Object(p.q)(e).then(function(e){t.$toast.success("再次下单成功");var a={id:e.data.order_id};t.handleQuo(a),t.initOrder(t.searData)}).catch(function(e){t.$toast("再次下单失败")}),this.orderCopyShow=!1},tofixeds:function(t,e,a){var i=Number(Number(t).toFixed(2));this.$set(e,a,i)},tofixedsd:function(t,e,a){var i=Number(Number(t).toFixed(2));this.$set(e,a,i),this.kusuAllJSPrice()},handleClick:function(t){"订单管理"==t.label?(this.tabShow1=!0,this.tabShow2=!1):(this.tabShow2=!0,this.tabShow1=!1)},clearSear:function(){this.searData={},this.searData.page=1},daoruPart:function(){this.daoruData={},this.dialogDaoRu=!0},beforeCloseDaoRu:function(t,e){"confirm"===t?this.daoruPartSure(e):e()},daoruPartSure:function(t){var e=this;Object(p.b)(this.daoruData).then(function(t){if("无快速报价单信息"==t.data.message)e.$toast("无快速报价单信息");else{var a=!0,i=!1,n=void 0;try{for(var o,s=l()(t.data);!(a=(o=s.next()).done);a=!0){var r=o.value;r.material_id="",r.price="",r.product_num=1,r.coefficient=1;for(var c=!1,d=0;d<e.oneData.parts.length;d++)r.name==e.oneData.parts[d].name&&(c=!0,e.$set(e.oneData.parts,d,r));c||e.oneData.parts.push(r)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}}).catch(function(t){}),t()},manyShenHe:function(){var t=this;this.checkedGoods>0?this.$dialog.confirm({title:"提示",message:"你确定要进行批量审核"}).then(function(){var e={};e.qid=t.checkedGoods,Object(p.n)(e).then(function(e){t.$message({message:"批量审核成功",type:"success"}),t.initOrder(t.searData),t.checked=!1,t.checkedGoods=[]}).catch(function(t){console.log(t)})}).catch(function(){}):this.$message({message:"请选择审核的订单",type:"warning"})},quanxuanCheck:function(t){if(this.checkedGoods=[],t){var e=!0,a=!1,i=void 0;try{for(var n,o=l()(this.tableData);!(e=(n=o.next()).done);e=!0){var s=n.value;this.checkedGoods.push(s.id)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}}},checkedSelect:function(t){t.length==this.tableData.length?this.checked=!0:this.checked=!1},formatTooltip:function(t){return t/10},kusuPathSure:function(){this.kusuOrderShengshow=!1,window.location.href=this.kusuPath},linkselectChanage:function(t,e){var a=[];return t.forEach(function(t,i){var n={};n.value=t.id,n.label=t[e],n.defvue=t.defvue,a.push(n)}),a},selectName:function(t,e){var a="",i=!0,n=!1,o=void 0;try{for(var s,r=l()(e);!(i=(s=r.next()).done);i=!0){var c=s.value;c.value==t&&(a=c.label)}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}return a},selectChanage:function(t,e){var a=[];return t.forEach(function(t,i){var n={};n.value=t.id,n.label=t[e],a.push(n)}),a},init:function(){var t=this;Object(p.a)().then(function(e){t.koptions=[];var a=e.data;t.koptions=t.selectChanage(a,"name")}).catch(function(t){console.log(t)})},initAllMateria:function(){var t=this;Object(C.d)().then(function(e){t.materialAllList=[];e.data;var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.data);!(a=(o=s.next()).done);a=!0){var r=o.value,c=parseFloat(Number(r.price).toFixed(2)),d={};d.price=r.price*r.density,d.label=r.name+" (￥"+c+"/g )",d.value=r.id,t.materialAllList.push(d)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}).catch(function(t){console.log(t),console.log("获取材质列表失败")})},initDepusers:function(){var t=this;Object(p.c)().then(function(e){t.depusers=[];var a=e.data;t.depusers=t.selectChanage(a,"name")}).catch(function(t){console.log("获取用户失败")})},initTechnology:function(){var t=this;Object(C.f)().then(function(e){t.technologyList=[];var a=e.data;t.technologyList=t.selectChanage(a,"name")}).catch(function(t){console.log("获取生产工艺列表失败")})},initMateria:function(t){var e=this;Object(p.j)(t).then(function(t){e.materialList=[];var a=t.data;e.materialListPrice=t.data;var i=!0,n=!1,o=void 0;try{for(var s,r=l()(e.materialListPrice);!(i=(s=r.next()).done);i=!0){var c=s.value,d=c.price*c.density;e.$set(c,"price",d)}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}e.materialList=e.selectChanage(a,"name")}).catch(function(t){console.log("获取材质列表失败")})},kusuSelectMate:function(t){var e=!0,a=!1,i=void 0;try{for(var n,o=l()(this.materialAllList);!(e=(n=o.next()).done);e=!0){var s=n.value;s.value==t&&(this.kusuData.price=s.price,this.kusuData.matname=s.label)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}},showKuSuClick:function(){this.showKuSu=!0,this.kusupartArr=[],this.qiyuShow=!1,this.qiyuData={taxation:0,freight:0}},kusuaddpartSure:function(){this.kusuData.material_id?this.kusuData.product_num&&this.kusuData.product_num>=1?String(this.kusuData.product_num).indexOf(".")<0?("添加零件"==this.kusupartshowTitle?(this.kusupartArr.push(this.kusuData),this.kusuaddpartshow=!1,this.kusuAllJSPrice()):(this.kusuaddpartshow=!1,this.kusuAllJSPrice()),this.qiyuShow=!0):this.$toast("零件数量要为整数"):this.$toast("请输入数量，最小为1"):this.$toast("请选择材质")},kusupartEdit:function(t){this.kusuData=t,this.kusuaddpartshow=!0,this.kusupartshowTitle="修改零件"},kusupartDel:function(t,e){var a=this;this.$dialog.confirm({title:"提示",message:"你确定要删掉该零件"}).then(function(){a.kusupartArr.splice(e,1),a.kusuAllJSPrice()}).catch(function(){})},kusuAllJSPrice:function(){this.qiyuData.taxation&&this.qiyuData.taxation>0||(this.qiyuData.taxation=0),this.qiyuData.freight&&this.qiyuData.freight>0||(this.qiyuData.freight=0),this.kusuAllprice=0;var t=!0,e=!1,a=void 0;try{for(var i,n=l()(this.kusupartArr);!(t=(i=n.next()).done);t=!0){var o=i.value,s=(Number(o.volume_size.volume)*Number(o.price)*Number(o.coefficient/10)/1e3).toFixed(2)*Number(o.product_num);this.kusuAllprice+=s}}catch(t){e=!0,a=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw a}}this.qiyuData&&(this.qiyuData.taxation&&(this.kusuAllprice=Number(this.qiyuData.taxation)+Number(this.kusuAllprice)),this.qiyuData.freight&&(this.kusuAllprice=Number(this.qiyuData.freight)+Number(this.kusuAllprice))),this.kusuAllprice=parseFloat(this.kusuAllprice.toFixed(2))},kusuBaojiadan:function(){var t=this,e={};(e=this.qiyuData).parts=JSON.parse(d()(this.kusupartArr));var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.parts);!(a=(o=s.next()).done);a=!0){var r=o.value;r.price=Number((Number(r.price)*Number(r.volume_size.volume)*Number(r.coefficient/10)/1e3).toFixed(2))}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}var c=this.$loading({lock:!0,text:"提交中，请等待",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:document.querySelector(".kusuOrderB")});Object(p.h)(e).then(function(e){t.kusuOrderShengshow=!0,t.kusuPath=e.data.path,t.$toast.success("报价单生成成功"),t.showKuSu=!1,c.close()}).catch(function(e){c.close(),t.$toast({message:e.response.data.message,type:"warning"})})},addOne:function(t){t.product_num=Number(t.product_num),t.product_num=t.product_num+1,this.kusuAllJSPrice()},reduceOne:function(t){t.product_num=Number(t.product_num),t.product_num=t.product_num-1,t.product_num<=0&&(t.product_num=1,this.$toast("最小值为1")),this.kusuAllJSPrice()},initEquipment:function(t){var e=this;Object(p.d)(t).then(function(t){e.equipmentList=[];var a=t.data;e.equipmentList=e.selectChanage(a,"mname")}).catch(function(t){console.log("获取设备列表失败")})},initManage:function(){var t=this;Object(C.c)().then(function(e){t.surfaceList=[];var a=e.data;t.surfaceList=t.selectChanage(a,"name")}).catch(function(t){console.log("获取表面处理列表失败")})},selectMold:function(t,e){var a="";1==t?(a=e.molding_process_id,this.$set(e,"equipment_id",""),this.$set(e,"material_id",""),this.initMateria(a),this.initEquipment(a),e.modname=this.selectName(e.molding_process_id,this.technologyList),e.equname="",e.matname=""):(a=this.onePart.molding_process_id,this.$set(this.onePart,"equipment_id",""),this.$set(this.onePart,"material_id",""),this.initMateria(a),this.initEquipment(a))},selectOrderStatus:function(t){var e="",a=!0,i=!1,n=void 0;try{for(var o,s=l()(this.orderStatus);!(a=(o=s.next()).done);a=!0){var r=o.value;r.value==t&&(e=r.label)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}return e},initOrder:function(t){var e=this;Object(p.f)(t).then(function(t){e.tableData=[],e.perPage=Number(t.data.per_page),e.currentPage=t.data.current_page,e.tableData=t.data.data,e.allPage=t.data.last_page,e.plTotalPage=t.data.last_page+"页";var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.tableData);!(a=(o=s.next()).done);a=!0){var r=o.value;r.status=e.selectOrderStatus(r.status)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}e.tableData.length?e.listShow=!1:e.listShow=!0}).catch(function(t){console.log(t,"获取客户列表失败")})},selectMPrice:function(t){var e=!0,a=!1,i=void 0;try{for(var n,o=l()(this.materialListPrice);!(e=(n=o.next()).done);e=!0){var s=n.value;s.id==t&&(this.onePart.price=s.price)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}},handleEndtime:function(t){new Date(t).getTime()<new Date(this.onePart.start_date).getTime()&&(this.$message({message:"交货日期要大于启动日期",duration:3e3,type:"warning"}),this.$set(this.onePart,"due_date",""))},handleStarttime:function(t){if(this.onePart.due_date){var e=new Date(t).getTime();new Date(this.onePart.due_date).getTime()<e&&(this.$message({message:"交货日期要大于启动日期",duration:3e3,type:"warning"}),this.$set(this.onePart,"start_date",""))}},selectLinkman:function(t){var e=this;this.$set(this.oneData,"postaddr",""),this.$set(this.oneData,"invoaddr",""),this.$set(this.oneData,"linkmans",[]),Object(p.i)(t).then(function(t){e.oneData.coefficient=t.data.coefficient,e.oneData.saveinfo=t.data.saveinfo,e.linkman=[],e.consignee=[];var a=t.data.linkman;if(0==a.length)e.linkman=[];else{e.linkman=e.linkselectChanage(a,"linkman_name");var i=!0,n=!1,o=void 0;try{for(var s,r=l()(e.linkman);!(i=(s=r.next()).done);i=!0){var c=s.value;1==c.defvue&&e.oneData.linkmans.push(c.value)}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}}var d=t.data.consignee;e.consignee=e.linkselectChanage(d,"lk_address");var u=!0,p=!1,h=void 0;try{for(var v,m=l()(e.consignee);!(u=(v=m.next()).done);u=!0){var f=v.value;1==f.defvue&&(e.$set(e.oneData,"invoaddr",f.value),e.$set(e.oneData,"postaddr",f.value))}}catch(t){p=!0,h=t}finally{try{!u&&m.return&&m.return()}finally{if(p)throw h}}}).catch(function(t){console.log(t)})},gengxingqro:function(){var t=this,e={};e.oid=this.quoData.order_id,Object(p.e)(e).then(function(e){t.quoData.qrcode_url=e.data.message,t.$toast.success("二维码更新成功")}).catch(function(t){})},handleCheckedCitiesChange:function(t){this.oneData.linkmans=t},handleCloseOnePart:function(){this.addPartsShow=!1},handleClose:function(){this.addOrderShow=!1},handleCloseDelPart:function(){this.dialogVisibleDelpart=!1},baojiadan:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var a=[],i=(a=e.oneData.linkmans).join(",");e.oneData.lkmans=i;var n=e.oneData;if(e.oneData.parts.length>0&&a.length>0)if("添加订单"==e.orderTitle){var o=e.$loading({lock:!0,text:"提交中，请等待",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:document.querySelector(".shengOrder")});Object(p.k)(n).then(function(t){if("ok"==t.data.success){e.$message({message:"添加成功",type:"success"}),e.addOrderShow=!1,e.showQuo=!0;var a=t.data.order_id;e.getQuotation(a),e.searData.page=1,e.initOrder(e.searData),o.close()}else e.$message({message:t.data.success,type:"warning"}),e.addOrderShow=!0,o.close()}).catch(function(t){e.$message({message:t.response.data.message,type:"warning"}),o.close()})}else{var l=e.$loading({lock:!0,text:"提交中，请等待",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:document.querySelector(".shengOrder")});n.submit="1";var s=e.delId;Object(p.m)(s,n).then(function(t){e.$message({message:"修改成功",type:"success"}),e.addOrderShow=!1,e.showQuo=!0,e.getQuotation(s),l.close()}).catch(function(t){l.close()})}else e.$message({message:"联系人,零件 不能为空",type:"warning"}),loading.close()})},handleEditOrder:function(t){var e=this;this.orderStatusSH="等待审核",this.orderTitle="修改订单",this.delId=t.id,Object(p.m)(t.id).then(function(t){e.addOrderShow=!0,e.oneData=r()({},t.data),e.selectLinkman(e.oneData.customer_id);var a=e.oneData.lkmans.split(",");setTimeout(function(){e.oneData.linkmans=[];var t=!0,i=!1,n=void 0;try{for(var o,s=l()(a);!(t=(o=s.next()).done);t=!0){var r=o.value,c=Number(r);e.oneData.linkmans.push(c)}}catch(t){i=!0,n=t}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}var d=!0,u=!1,p=void 0;try{for(var h,v=l()(e.oneData.parts);!(d=(h=v.next()).done);d=!0){var m={};(m=h.value).volume_size=JSON.parse(m.volume_size),m.start_date=m.start_date.replace(/-/g,"/").split(" ")[0],m.due_date=m.due_date.replace(/-/g,"/").split(" ")[0]}}catch(t){u=!0,p=t}finally{try{!d&&v.return&&v.return()}finally{if(u)throw p}}},500),e.$set(e.oneData,"postaddr",t.data.postaddr),e.$set(e.oneData,"invoaddr",t.data.invoaddr)}).catch(function(t){console.log(t)})},jinzhiJianpan:function(){document.activeElement.blur(),setTimeout(function(){window.scrollTo(0,0)},100)},selectRiQi:function(t){this.showRiQi=!0,this.riqiStatus=t},riqiSure:function(t){var e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();if("start_date"==this.riqiStatus){var n=e+"/"+a+"/"+i;this.$set(this.onePart,"start_date",n)}else{var o=e+"/"+a+"/"+i;this.$set(this.onePart,"due_date",o)}var l=new Date(this.onePart.start_date).getTime(),s=new Date(this.onePart.due_date).getTime();l<=s?this.showRiQi=!1:s?(this.$dialog.alert({message:"启动日期要小于结束日期"}),"start_date"==this.riqiStatus?this.$set(this.onePart,"start_date",""):this.$set(this.onePart,"due_date","")):this.showRiQi=!1},riqiCancel:function(){this.showRiQi=!1},handleCurrentPage:function(t){this.searData.page=t,this.initOrder(this.searData)},InputCurrentPage:function(t){this.currentPage=Number(t),this.searData.page=t,this.initOrder(this.searData)},handleQuo:function(t){t.status?this.orderStatusSH=t.status:this.orderStatusSH="等待审核",this.showQuo=!0,this.getQuotation(t.id)},getQuotation:function(t){var e=this;this.allprice=0,Object(p.g)(t).then(function(t){e.quoData=t.data,e.quoData.status?e.quoData.status="通过":e.quoData.status="不通过";var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.quoData.parts);!(a=(o=s.next()).done);a=!0){var r,c=o.value;r=Number((Number(c.product_num)*Number(c.price)).toFixed(2)),e.allprice=r+Number(e.allprice),c.start_date&&(c.start_date=c.start_date.replace(/-/g,"/").split(" ")[0]),c.due_date&&(c.due_date=c.due_date.replace(/-/g,"/").split(" ")[0])}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}e.quoData.freight&&(e.quoData.freight=Number(e.quoData.freight).toFixed(2)),e.quoData.taxation&&(e.quoData.taxation=Number(e.quoData.taxation).toFixed(2)),e.allprice=Number(e.allprice)+Number(e.quoData.freight)+Number(e.quoData.taxation)}).catch(function(t){console.log(t)})},baojiadanSure:function(){var t=this,e=this.quoData.order_id,a={};"通过"==this.quoData.status?a.status=1:a.status=0,a.qt=this.quoData.qt,a.qs=this.quoData.qs,Object(p.o)(e,a).then(function(e){t.$toast.success({duration:2e3,message:"报价单确认成功"}),t.initOrder(t.searData),t.showQuo=!1}).catch(function(t){console.log("报价单提交失败")})},onSubmit:function(){this.searData.page=1,this.initOrder(this.searData)},riqiSureSear:function(t){if(t){var e=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate();this.$set(this.searData,"edat",e),this.showRiQiSear=!1}else this.showRiQiSear=!1,this.$set(this.searData,"edat",""),console.log("没有值")},delOrder:function(t){this.delId=t.id,this.delOrderDialog=!0},beforeOrderCustomer:function(t,e){var a=this;"confirm"==t?Object(p.l)(this.delId).then(function(t){a.$toast.success({duration:2e3,message:"删除成功"}),e(),a.searData.page=1,a.initOrder(a.searData)}).catch(function(t){console.log(t,"删除订单失败")}):e()},contract:function(t){window.location.href=t.contract},addOrder:function(){this.orderStatusSH="等待审核",this.addOrderShow=!0,this.orderTitle="添加订单",this.linkman=[],this.consignee=[],this.oneData={linkmans:[],taxation:"",freight:"",parts:[]},void 0!==this.$refs.ruleForm&&this.$refs.ruleForm.resetFields()},addParts:function(){var t=this;this.partTitle="添加零件",void 0!==this.$refs.ruleFormPart&&this.$refs.ruleFormPart.resetFields();var e=new Date,a=e.getMonth()+1,i=e.getFullYear()+"/"+a+"/"+e.getDate(),n=new Date(e.getTime()+864e5),o=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate();if(this.onePart={start_date:i,due_date:o,product_num:1,coefficient:1},this.oneData.coefficient?this.$set(this.onePart,"coefficient",this.oneData.coefficient):this.$set(this.onePart,"coefficient",1),this.oneData.saveinfo){var l=this.oneData.saveinfo.molding_process_id,s=this.oneData.saveinfo;this.initMateria(l),this.initEquipment(l),this.$nextTick(function(){t.$set(t.onePart,"equipment_id",s.equipment_id),t.$set(t.onePart,"molding_process_id",s.molding_process_id),t.$set(t.onePart,"material_id",s.material_id),t.$set(t.onePart,"surface_id",s.surface_id)})}else this.materialList=[],this.equipmentList=[];this.$nextTick(function(){this.addPartsShow=!0,null==document.getElementById("stlImg")||(document.getElementById("stlImg").src="")})},onePartEdit:function(t,e){this.onepartsIndex=e,this.addPartsShow=!0,this.partTitle="修改零件",this.onePart=r()({},t),this.onePart.priceCopy=Number(this.onePart.price)/Number(this.onePart.coefficient),this.$nextTick(function(){document.getElementById("stlImg").src=this.onePart.diagram}),this.onePart.volume_size1="长:"+t.volume_size.xx+"mm  宽:"+t.volume_size.zz+"mm  高:"+t.volume_size.yy+"mm\n体积:"+t.volume_size.volume+"mm³",this.partEditMAId=this.onePart.material_id;var a=this.onePart.molding_process_id;this.initMateria(a),this.initEquipment(a)},onePartDel:function(t){this.onepartsIndex=t,this.dialogVisibleDelpart=!0},onePartDelSure:function(){for(var t=0;t<this.oneData.parts.length;t++)this.onepartsIndex==t&&this.oneData.parts.splice(t,1);this.dialogVisibleDelpart=!1},seePicture:function(t){Object(v.a)({images:[t],asyncClose:!0})},addPartSure:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("提交失败"),!1;e.onePart.modname=e.selectName(e.onePart.molding_process_id,e.technologyList),e.onePart.equname=e.selectName(e.onePart.equipment_id,e.equipmentList),e.onePart.matname=e.selectName(e.onePart.material_id,e.materialList),e.onePart.surname=e.selectName(e.onePart.surface_id,e.surfaceList),e.onePart.diagram=document.getElementById("stlImg").src,e.selectMPrice(e.onePart.material_id);var a=r()({},e.onePart);if("添加零件"==e.partTitle){a.priceCopy=Number(a.price)*Number(a.volume_size.volume)/1e3,a.price=Number(a.price)*Number(a.volume_size.volume),a.price=Number((Number(a.price)*Number(a.coefficient)/1e3).toFixed(2));for(var i=!1,n=0;n<e.oneData.parts.length;n++)a.name==e.oneData.parts[n].name&&(i=!0);i?e.$toast("该零件名已存在"):(e.addPartsShow=!1,e.oneData.parts.push(a))}else{e.addPartsShow=!1;for(var o=0;o<e.oneData.parts.length;o++)o==e.onepartsIndex&&(e.oneData.parts[o]={},e.partEditMAId==a.material_id?a.price=Number((Number(a.priceCopy)*Number(a.coefficient)).toFixed(2)):(console.log(a.price),a.priceCopy=Number(a.price)*Number(a.volume_size.volume)/1e3,a.price=Number(a.price)*Number(a.volume_size.volume),a.price=Number((Number(a.price)*Number(a.coefficient)/1e3).toFixed(2))),e.oneData.parts[o]=r()({},a))}})},stlStartS:function(t){if(this.kusuStatus=t,1==this.kusuStatus){var e=document.getElementById("stlFile");document.getElementById("stlFile").value=null,e.click()}else{this.kusupartshowTitle="添加零件";var a=document.getElementById("stlFile2");document.getElementById("stlFile2").value=null,a.click()}},selectDate:function(){},stlStart:function(t){var e=(t.target||window.event.srcElement).value;if("stl"==e.substring(e.lastIndexOf(".")+1))if(1==this.kusuStatus)if(document.getElementById("load").style.display="",(k=document.getElementById("stlFile").files[0]).size/1024<=51200){var a=k.name.split(".")[0];this.$set(this.onePart,"name",a),this.initStl()}else this.$toast("文件要小于50MB");else if((k=document.getElementById("stlFile2").files[0]).size/1024<=51200){var i=k.name.split(".")[0];this.kusuData={},this.$set(this.kusuData,"product_num",1),this.$set(this.kusuData,"name",i);var n=this.materialAllList[0].value;this.$set(this.kusuData,"material_id",n),this.kusuSelectMate(n),this.initStl()}else this.$toast("文件要小于50MB");else alert("请选择STL格式文件！")},initStl:function(){this.uploadLoading=!0,(y=0==z?new THREE.OrthographicCamera(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,1,1e4):new THREE.PerspectiveCamera(q,800/600,1.5,1e4)).position.set(T,O,j),y.up.set(V,E,L),w=new THREE.Vector3(N,Q,I),y.lookAt(w),(D=new THREE.Scene).fog=new THREE.Fog(16777215,1,1e4);var t=this;(new THREE.STLLoader).load(k,function(e){e.computeBoundingBox(),e.center();for(var a=new THREE.MeshPhongMaterial({color:8421504,specular:1118481,shininess:200}),i=new THREE.Mesh(e,a),n=0,o=(new THREE.Geometry).fromBufferGeometry(i.geometry),l=0;l<o.faces.length;l++){var s=o.faces[l].a,r=o.faces[l].b,c=o.faces[l].c,d=new THREE.Vector3(o.vertices[s].x,o.vertices[s].y,o.vertices[s].z),u=new THREE.Vector3(o.vertices[r].x,o.vertices[r].y,o.vertices[r].z),p=new THREE.Vector3(o.vertices[c].x,o.vertices[c].y,o.vertices[c].z);new THREE.Triangle(p,u,d);n+=F(p,u,d)}var h,v,m;h=e.boundingBox.max.x-e.boundingBox.min.x,v=e.boundingBox.max.y-e.boundingBox.min.y,m=e.boundingBox.max.z-e.boundingBox.min.z;var f=parseInt(v),_=parseInt(h),g=parseInt(m),b=Math.abs(parseInt(n)),x={xx:_,yy:f,zz:g,volume:b},k="长:"+_+"mm  宽:"+g+"mm  高:"+f+"mm",S=b+"mm³";t.$set(t.kusuData,"volume_size1",k),t.$set(t.kusuData,"volume_size2",S),t.$set(t.kusuData,"volume_size",x);var C="长:"+_+"mm  宽:"+g+"mm  高:"+f+"mm\n体积:"+b+"mm³";t.$set(t.onePart,"volume_size1",C),t.$set(t.onePart,"volume_size",x),i.castShadow=!0,i.receiveShadow=!0,D.add(i),function(t,e,a,i){var n=Math.max(3*i.boundingBox.max.x,3*i.boundingBox.max.y,3*i.boundingBox.max.z);(y=new THREE.PerspectiveCamera(45,4/3,.1,1e4)).position.set(0,0,n),y.up.set(1,0,1),y.up.set(V,E,L),w=new THREE.Vector3(N,Q,I),y.lookAt(w)}(0,0,0,e),1==t.kusuStatus&&(document.getElementById("load").style.display="none"),t.animate()}),D.add(new THREE.AmbientLight(3355443)),A(-1,1,1,16777215,1.35),A(1,-1,-1,16777215,1),(x=new THREE.WebGLRenderer({antialias:!0})).setClearColor(D.fog.color),x.setSize(800,600),x.gammaInput=!0,x.gammaOutput=!0,x.shadowMapEnabled=!0,x.shadowMapCullFace=THREE.CullFaceBack;new THREE.OrbitControls(y,x.domElement);window.addEventListener("resize",B,!1)},animate:function(){M(this)}},components:{Tinymce:h.a,returnGoods:S},created:function(){var t=f.a.get("actionArr");t=JSON.parse(t);var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;"check"==s&&(this.shengheShow=!0),"add"==s&&(this.addShowQ=!0),"edit"==s&&(this.editShowQ=!0),"delete"==s&&(this.delShowQ=!0)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}this.init(),this.initDepusers(),this.initTechnology(),this.initManage(),this.initAllMateria(),this.initOrder(this.searData)},computed:{isRed:function(){return this.$store.state.stlData.returnGoodscount}},mounted:function(){this.searData.page=1}},z=1,q=45,T=200,O=200,j=200,N=0,Q=0,I=0,V=0,E=1,L=0;function F(t,e,a){return 1/6*(t.x*e.y*a.z+a.x*t.y*e.z+e.x*a.y*t.z-a.x*e.y*t.z-e.x*t.y*a.z-t.x*a.y*e.z)}function A(t,e,a,i,n){var o=new THREE.DirectionalLight(i,n);o.position.set(t,e,a),D.add(o)}function B(){y.aspect=window.innerWidth/window.innerHeight,y.updateProjectionMatrix(),x.setSize(window.innerWidth,window.innerHeight)}function M(t){t.uploadLoading=!1;var e=new Image;x.render(D,y);var a=x.domElement.toDataURL("image/jpeg");e.src=a,a,1==t.kusuStatus?document.getElementById("stlImg").src=a:(t.kusuData.diagram=a,t.kusuaddpartshow=!0),x.render(D,y)}var R=$,H=(a("i5Dx"),Object(g.a)(R,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"moOrder"},[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.tabShow,callback:function(e){t.tabShow=e},expression:"tabShow"}},[a("el-tab-pane",{attrs:{label:"订单管理",name:"first"}},[t.tabShow1?a("div",[a("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("van-collapse-item",{attrs:{title:"搜索",name:"1"}},[a("el-form",{staticClass:"center",attrs:{model:t.searData}},[a("el-form-item",{attrs:{label:""}},[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"客户名称"},model:{value:t.searData.sear,callback:function(e){t.$set(t.searData,"sear",e)},expression:"searData.sear"}})],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"订单号"},model:{value:t.searData.order,callback:function(e){t.$set(t.searData,"order",e)},expression:"searData.order"}})],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"是否有合同",clearable:""},model:{value:t.searData.cont,callback:function(e){t.$set(t.searData,"cont",e)},expression:"searData.cont"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"订单状态",clearable:""},model:{value:t.searData.stat,callback:function(e){t.$set(t.searData,"stat",e)},expression:"searData.stat"}},t._l(t.orderStatus,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:""}},[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择日期",readonly:""},on:{focus:function(e){t.showRiQiSear=!0}},model:{value:t.searData.edat,callback:function(e){t.$set(t.searData,"edat",e)},expression:"searData.edat"}})],1),t._v(" "),a("div",[a("span",[a("el-button",{attrs:{size:"small"},on:{click:t.clearSear}},[t._v("清空")])],1),t._v("\n\t\t\t\t\t\t \n\t\t\t\t\t\t"),a("span",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSubmit}},[t._v("查询")])],1)])],1)],1)],1),t._v(" "),t.addShowQ?a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.addOrder()}}},[t._v("添加")]),t._v("\n\t\t\t\t "),a("el-button",{attrs:{size:"small",type:"success"},on:{click:t.showKuSuClick}},[t._v("快速生成报价单")]),t._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(e){t.initOrder(t.searData)}}},[t._v("刷新列表")])],1):t._e(),t._v(" "),a("van-row",{staticStyle:{"padding-left":"5px","margin-top":"15px","padding-bottom":"10px","border-bottom":"1px solid rgb(229, 229, 229)",display:"flex","align-items":"center"}},[a("van-col",{attrs:{span:"6"}},[a("van-checkbox",{on:{change:t.quanxuanCheck},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("全选")])],1),t._v(" "),a("van-col",{staticStyle:{"vertical-align":"top"},attrs:{span:"18"}},[a("el-button",{attrs:{size:"mini"},on:{click:t.manyShenHe}},[t._v("批量审核")])],1)],1),t._v(" "),t.listShow?a("div",{staticStyle:{"margin-top":"10px"}},[t._v("暂无订单")]):t._e(),t._v(" "),a("van-checkbox-group",{staticClass:"card-goods",on:{change:t.checkedSelect},model:{value:t.checkedGoods,callback:function(e){t.checkedGoods=e},expression:"checkedGoods"}},t._l(t.tableData,function(e,i){return a("van-row",{key:e.index,staticStyle:{"margin-top":"10px",padding:"5px","border-bottom":"1px solid #e5e5e5"}},[a("van-col",{attrs:{span:"3"}},[a("van-checkbox",{key:e.id,staticClass:"card-goods__item",attrs:{name:e.id}})],1),t._v(" "),a("van-col",{attrs:{span:"21"}},[a("div",{staticClass:"list_main_div"},[t._v("\n\t\t\t\t\t\t客户名称 : "+t._s(e.cusname)+"  \n\t\t\t\t\t")]),t._v(" "),a("div",{staticClass:"list_main_div"},[t._v("订单编号 : "+t._s(e.no))]),t._v(" "),a("div",{staticClass:"list_main_div"},[t._v("状态 : "+t._s(e.status))]),t._v(" "),a("div",{staticClass:"list_main_div"})]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"100%","padding-top":"10px"}},["完成"==e.status?a("span",[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.copyOneOrder(e)}}},[t._v("再次下单")]),t._v(" \n\t\t\t\t\t")],1):t._e(),t._v(" "),"等待审核"==e.status?a("span",[t.editShowQ?a("span",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.handleEditOrder(e)}}},[t._v("修改")])],1):t._e()]):t._e(),t._v("  \n\t\t\t\t\t"),e.contract?a("span",[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.contract(e)}}},[t._v("合同")]),t._v("\n\t\t\t\t\t\t \n\t\t\t\t\t")],1):t._e(),t._v(" "),a("span",[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.handleQuo(e)}}},[t._v("报价单")])],1),t._v("\n\t\t\t\t\t \n\t\t\t\t\t"),t.delShowQ?a("span",[t._v(" "),a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"small"},on:{click:function(a){t.delOrder(e)}}},[t._v("删除")])],1):t._e()])],1)})),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-row",{staticStyle:{display:"flex","align-items":"center"}},[a("van-col",{staticStyle:{"padding-left":"5px"},attrs:{span:"19"}},[a("van-pagination",{attrs:{"page-count":t.allPage,"show-page-size":3,"items-per-page":t.perPage,"force-ellipses":""},on:{change:t.handleCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("van-col",{staticStyle:{"padding-left":"5px","padding-right":"5px"},attrs:{span:"5"}},[a("el-input",{attrs:{placeholder:t.plTotalPage,onkeyup:"this.value=this.value.replace(/[^0-9-]+/,'')"},on:{change:t.InputCurrentPage},model:{value:t.inputPage,callback:function(e){t.inputPage=e},expression:"inputPage"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"quanping"},[a("van-actionsheet",{attrs:{title:"报价单"},model:{value:t.showQuo,callback:function(e){t.showQuo=e},expression:"showQuo"}},[a("div",{staticClass:"quoMain"},[a("h3",[t._v("供需方信息区域")]),t._v(" "),a("div",{staticStyle:{border:"1px solid #d6d6d6",padding:"10px"}},[a("div",[t._v("报价单号 : "+t._s(t.quoData?t.quoData.no:""))]),t._v(" "),a("div",[t._v("报价日期 : "+t._s(t.quoData?t.quoData.updated_at:""))]),t._v(" "),a("div",[t._v("订单二维码  "),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.gengxingqro()}}},[t._v("更新订单二维码")])],1),t._v(" "),a("div",{staticStyle:{"text-align":"center","line-height":"0","padding-top":"5px"}},[a("img",{staticStyle:{width:"120px"},attrs:{src:t.quoData.qrcode_url,alt:""}})])]),t._v(" "),a("div",{staticStyle:{border:"1px solid #d6d6d6",padding:"10px","margin-top":"10px"}},[a("div",[t._v("购买方名称 : "+t._s(t.quoData?t.quoData.cusname:""))]),t._v(" "),t.quoData.ticket_info?a("div",[t.quoData.ticket_info.taxno?a("div",[t._v("统一社会信用代码 : "+t._s(t.quoData.ticket_info?t.quoData.ticket_info.taxno:""))]):t._e(),t._v(" "),t.quoData.ticket_info.bank?a("div",[t._v("开户银行 : "+t._s(t.quoData.ticket_info?t.quoData.ticket_info.bank:""))]):t._e(),t._v(" "),t.quoData.ticket_info.bankno?a("div",[t._v("银行账号 : "+t._s(t.quoData.ticket_info?t.quoData.ticket_info.bankno:""))]):t._e()]):t._e(),t._v(" "),a("div",[t._v("联系人 : "),t._l(t.quoData.linkmans,function(e){return a("span",[t._v(t._s(e)+"  ")])})],2),t._v(" "),t.quoData.postaddr?a("div",[t._v("零件收货地址 : \n\t\t\t\t\t "+t._s(t.quoData.postaddr.province)+"/"+t._s(t.quoData.postaddr.city)+"/"+t._s(t.quoData.postaddr.area)+"/"+t._s(t.quoData.postaddr.lk_address)+"\n\t\t\t\t\t ")]):t._e(),t._v(" "),t.quoData.invoaddr?a("div",[t._v("发票收件地址 : \n\t\t\t\t\t "+t._s(t.quoData.invoaddr.province)+"/"+t._s(t.quoData.invoaddr.city)+"/"+t._s(t.quoData.invoaddr.area)+"/"+t._s(t.quoData.invoaddr.lk_address)+"\n\t\t\t\t\t ")]):t._e()]),t._v(" "),a("div",{staticStyle:{border:"1px solid #d6d6d6",padding:"10px","margin-top":"10px"}},[a("div",[t._v("制作方")]),t._v(" "),a("div",[t._v("销售工程师 :"+t._s(t.quoData.saler?t.quoData.saler.name:"")+","+t._s(t.quoData.saler?t.quoData.saler.phone:""))]),t._v(" "),a("div",[t._v("项目工程师 :"+t._s(t.quoData.pojer?t.quoData.pojer.name:"")+","+t._s(t.quoData.pojer?t.quoData.pojer.phone:""))]),t._v(" "),a("div",[t._v("项目经理 :"+t._s(t.quoData.manger?t.quoData.manger.name:"")+","+t._s(t.quoData.manger?t.quoData.manger.phone:""))])]),t._v(" "),a("h3",[t._v("零件清单区域")]),t._v(" "),a("ul",t._l(t.quoData.parts,function(e){return a("li",[a("van-row",{staticStyle:{"margin-bottom":"3px"}},[t._v(t._s(e.name))]),t._v(" "),a("van-row",[a("van-col",{attrs:{span:10}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.diagram,alt:""},on:{click:function(a){t.seePicture(e.diagram)}}})]),t._v(" "),a("van-col",{attrs:{span:14}},[a("p",{staticStyle:{"word-wrap":"break-word","word-break":"break-all"}},[t._v(t._s(e.matname)+" , "+t._s(e.modname)+" , "+t._s(e.surname)+" , "+t._s(e.equname)+" ")]),t._v(" "),a("p",[t._v("数量: "),a("span",{style:{color:e.cproduct?"red":"#444"}},[t._v(t._s(e.product_num))]),t._v("个 单价:"+t._s(Number(e.price).toFixed(2))+"元")]),t._v(" "),a("p",[t._v("小计:"+t._s(Number((Number(e.price)*Number(e.product_num)).toFixed(2)))+"元")])])],1),t._v(" "),a("p",[t._v("备注 : "),a("span",{style:{color:e.cremark?"red":"#444"}},[t._v(t._s(e.remark))])]),t._v(" "),a("p",[t._v("订单拟启动时刻 :"+t._s(e.start_date))]),t._v(" "),a("p",[t._v("拟到货时刻 :"+t._s(e.due_date))])],1)})),t._v(" "),a("div",{staticStyle:{border:"1px solid #d6d6d6","font-size":"0.9rem",padding:"10px",margin:"10px 0"}},[t._v("税费 : "+t._s(Number(t.quoData.taxation).toFixed(2))+" 运费 : "+t._s(Number(t.quoData.freight).toFixed(2))+" 合计: "+t._s(t.allprice?t.allprice.toFixed(2):""))]),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-bottom":"0.5rem"}},[t._v("零件质量检验标准")]),t._v(" "),a("div",[t.TinymceShow?a("div",{staticClass:"hidebutton"},[a("Tinymce",{ref:"editor",attrs:{height:100},model:{value:t.quoData.qs,callback:function(e){t.$set(t.quoData,"qs",e)},expression:"quoData.qs"}})],1):t._e()]),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"1rem","margin-bottom":"0.5rem"}},[t._v("货物交付以及结算区域")]),t._v(" "),a("div",[t.TinymceShow?a("div",{staticClass:"hidebutton"},[a("Tinymce",{ref:"editor",attrs:{height:100},model:{value:t.quoData.qt,callback:function(e){t.$set(t.quoData,"qt",e)},expression:"quoData.qt"}})],1):t._e()]),t._v(" "),t.quoData.log?a("div",{staticClass:"b-row-m "},[a("div",{staticClass:"b-title",staticStyle:{"padding-top":"25px","padding-bottom":"10px"}},[t._v("修改记录")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"修改记录"},model:{value:t.quoData.log,callback:function(e){t.$set(t.quoData,"log",e)},expression:"quoData.log"}})],1):t._e(),t._v(" "),"等待审核"==t.orderStatusSH?a("div",[t.shengheShow?a("div",{staticStyle:{"margin-top":"1rem"}},[t._v("\t审核   \n\t\t\t\t\t "),a("el-radio-group",{model:{value:t.quoData.status,callback:function(e){t.$set(t.quoData,"status",e)},expression:"quoData.status"}},[a("el-radio",{attrs:{label:"通过"}}),t._v(" "),a("el-radio",{attrs:{label:"不通过"}})],1)],1):t._e()]):t._e(),t._v(" "),"等待审核"==t.orderStatusSH?a("div",{staticClass:"sure"},[a("el-button",{on:{click:function(e){t.showQuo=!1}}},[t._v("取消")]),t._v("  "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.baojiadanSure()}}},[t._v("确定")])],1):t._e(),t._v(" "),"等待审核"!=t.orderStatusSH?a("div",{staticClass:"sure"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showQuo=!1}}},[t._v("关闭")])],1):t._e()])])],1),t._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeOrderCustomer,title:"删除",message:"你确定要删除"},model:{value:t.delOrderDialog,callback:function(e){t.delOrderDialog=e},expression:"delOrderDialog"}}),t._v(" "),a("div",{staticClass:"quanping"},[a("van-actionsheet",{attrs:{title:t.orderTitle},model:{value:t.addOrderShow,callback:function(e){t.addOrderShow=e},expression:"addOrderShow"}},[a("div",{staticStyle:{width:"80%",margin:"10px auto 0"}},[a("van-row",[a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{"label-width":"110px",model:t.oneData,rules:t.rules,"label-position":t.labelPosition}},[a("van-row",[a("el-form-item",{attrs:{label:"客户",prop:"customer_id"}},[a("el-select",{staticClass:"select-widths",staticStyle:{width:"100%"},attrs:{placeholder:"客户",filterable:""},on:{change:t.selectLinkman},model:{value:t.oneData.customer_id,callback:function(e){t.$set(t.oneData,"customer_id",e)},expression:"oneData.customer_id"}},t._l(t.koptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"23px"}},[a("span",{staticStyle:{color:"#f56c6c"}},[t._v("*")]),t._v(" "),a("span",{staticStyle:{"font-size":"14px",color:"#606266","font-weight":"bold"}},[t._v("联系人(请先选择客户)")]),t._v(" "),a("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.oneData.linkmans,callback:function(e){t.$set(t.oneData,"linkmans",e)},expression:"oneData.linkmans"}},[a("van-row",{staticStyle:{"margin-top":"3px"}},t._l(t.linkman,function(e,i){return a("van-col",{key:i,attrs:{span:8}},[a("el-checkbox",{key:e.value,staticClass:"liankboxClass",attrs:{label:e.value}},[t._v(t._s(e.label))])],1)}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"零件邮寄地址",prop:"postaddr"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"邮寄地址"},model:{value:t.oneData.postaddr,callback:function(e){t.$set(t.oneData,"postaddr",e)},expression:"oneData.postaddr"}},t._l(t.consignee,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"发票邮寄地址",prop:"invoaddr"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"发票地址"},model:{value:t.oneData.invoaddr,callback:function(e){t.$set(t.oneData,"invoaddr",e)},expression:"oneData.invoaddr"}},t._l(t.consignee,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"销售工程师",prop:"saler"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"销售工程师"},model:{value:t.oneData.saler,callback:function(e){t.$set(t.oneData,"saler",e)},expression:"oneData.saler"}},t._l(t.depusers,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"项目工程师",prop:"pojer"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"项目工程师"},model:{value:t.oneData.pojer,callback:function(e){t.$set(t.oneData,"pojer",e)},expression:"oneData.pojer"}},t._l(t.depusers,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"项目经理",prop:"manger"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"项目经理"},model:{value:t.oneData.manger,callback:function(e){t.$set(t.oneData,"manger",e)},expression:"oneData.manger"}},t._l(t.depusers,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"税费(元)",prop:"taxation"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入税费"},on:{change:function(e){t.tofixeds(e,t.oneData,"taxation")}},model:{value:t.oneData.taxation,callback:function(e){t.$set(t.oneData,"taxation",e)},expression:"oneData.taxation"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"运费(元)",prop:"freight"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入运费"},on:{change:function(e){t.tofixeds(e,t.oneData,"freight")}},model:{value:t.oneData.freight,callback:function(e){t.$set(t.oneData,"freight",e)},expression:"oneData.freight"}})],1)],1)],1)],1),t._v(" "),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:t.addParts}},[t._v("添加零件")]),t._v(" "),a("el-button",{on:{click:t.daoruPart}},[t._v("导入快速报价单零件")])],1),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-top":"10px","margin-bottom":"10px"}},[t._v("零件列表")]),t._v(" "),t._l(t.oneData.parts,function(e,i){return a("div",{staticStyle:{border:"1px solid #d6d6d6",padding:"10px","margin-bottom":"10px"}},[a("van-row",[a("van-row",[a("van-col",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"},attrs:{span:"8"}},[a("img",{staticStyle:{width:"90%"},attrs:{src:e.diagram,alt:""},on:{click:function(a){t.seePicture(e.diagram)}}})]),t._v(" "),a("van-col",{attrs:{span:"2"}},[t._v("  ")]),t._v(" "),a("van-col",{attrs:{span:"14"}},[a("div",[t._v(t._s(e.name))]),t._v(" "),a("div",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[e.matname?a("span",[t._v(t._s(e.matname)+" ,")]):t._e(),t._v(" "+t._s(e.modname))]),t._v(" "),a("div",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[e.surname?a("span",[t._v(t._s(e.surname)+" ,")]):t._e(),t._v(" "+t._s(e.equname))])])],1),t._v(" "),a("van-row",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[t._v("数量: "+t._s(e.product_num)+"个 , 单价:"+t._s(Number(Number(e.price).toFixed(2)))+"元 , ")]),t._v(" "),a("van-row",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[t._v("价格系数: "+t._s(Number(Number(e.coefficient).toFixed(2))))]),t._v(" "),a("van-row",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[t._v("合计: \n\t\t\t\t\t\t"),e.price&&e.product_num&&e.coefficient?a("span",[t._v("\n\t\t\t\t\t\t\t"+t._s(Number((Number(e.price)*Number(e.product_num)).toFixed(2)))+"\n\t\t\t\t\t\t")]):t._e(),t._v(" "),e.price&&e.product_num&&e.coefficient?t._e():a("span")]),t._v(" "),a("van-row",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[t._v("订单拟启动时刻: "+t._s(e.start_date))]),t._v(" "),a("van-row",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[t._v("拟到货时刻: "+t._s(e.due_date))]),t._v(" "),a("van-row",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[t._v("备注: "+t._s(e.remark))]),t._v(" "),a("van-row",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[t._v("尺寸: 长 : "+t._s(e.volume_size.xx)+"mm 宽 : "+t._s(e.volume_size.zz)+"mm 高 : "+t._s(e.volume_size.yy)+"mm 体积 : "+t._s(e.volume_size.volume)+"mm³")])],1),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"0.5rem"}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.onePartEdit(e,i)}}},[t._v("修改")]),a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"small"},on:{click:function(e){t.onePartDel(i)}}},[t._v("删除")])],1)],1)}),t._v(" "),a("div",{staticClass:"shengOrder",staticStyle:{display:"flex","justify-content":"flex-end","margin-bottom":"10px","margin-top":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.baojiadan("ruleForm")}}},[t._v("生成报价单")])],1)],2)])],1),t._v(" "),a("div",{staticClass:"quanping"},[a("van-actionsheet",{attrs:{title:t.partTitle},model:{value:t.addPartsShow,callback:function(e){t.addPartsShow=e},expression:"addPartsShow"}},[a("div",{staticStyle:{width:"90%",margin:"10px auto 0",position:"relative"}},[t.uploadLoading?a("div",{staticStyle:{position:"absolute","z-index":"100",height:"100%",width:"100%",display:"flex","align-items":"center","justify-content":"center",top:"-150px"}},[a("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","background-color":"rgba(0,0,0,0.7)",padding:"20px","border-radius":"5px"}},[a("van-loading",{attrs:{type:"spinner",size:"40px"}}),t._v("  "),a("p",{staticStyle:{color:"#ffffff","vertical-align":"middle",padding:"0"}},[t._v("加载stl中")])],1)]):t._e(),t._v(" "),"修改零件"!=t.partTitle?a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{on:{click:function(e){t.stlStartS(1)}}},[t._v("读取stl")]),t._v(" "),a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"stlFile"},on:{change:function(e){t.stlStart(e)}}})],1):t._e(),t._v(" "),a("div",{staticStyle:{display:"none","margin-bottom":"10px"},attrs:{id:"load"}},[t._v("  加载中!请不要关闭窗口....")]),t._v(" "),a("div",{staticStyle:{width:"90%",margin:"0 auto"}},[a("el-form",{ref:"ruleFormPart",staticClass:"demo-form-inline",attrs:{model:t.onePart,"label-width":"120px",rules:t.rulesPart,"label-position":t.labelPosition}},[a("el-row",{staticStyle:{"margin-bottom":"10px"}},[t._v("产品信息:")]),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{placeholder:"名称"},model:{value:t.onePart.name,callback:function(e){t.$set(t.onePart,"name",e)},expression:"onePart.name"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"尺寸",prop:"volume_size"}},[a("el-input",{staticStyle:{width:"100%","white-space":"nowrap","font-size":"13px","word-wrap":"break-word","word-break":"break-all"},attrs:{type:"textarea",rows:3,disabled:"",placeholder:"尺寸"},model:{value:t.onePart.volume_size1,callback:function(e){t.$set(t.onePart,"volume_size1",e)},expression:"onePart.volume_size1"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"简图"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:"",alt:"",id:"stlImg"}})])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"10px"}},[t._v("生产信息:")]),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"成型工艺",prop:"molding_process_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:function(e){t.selectMold("2")}},model:{value:t.onePart.molding_process_id,callback:function(e){t.$set(t.onePart,"molding_process_id",e)},expression:"onePart.molding_process_id"}},t._l(t.technologyList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"成型设备",prop:"equipment_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.onePart.equipment_id,callback:function(e){t.$set(t.onePart,"equipment_id",e)},expression:"onePart.equipment_id"}},t._l(t.equipmentList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"成型材质",prop:"material_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:t.selectMPrice},model:{value:t.onePart.material_id,callback:function(e){t.$set(t.onePart,"material_id",e)},expression:"onePart.material_id"}},t._l(t.materialList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"表面处理",prop:"surface_id"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:t.onePart.surface_id,callback:function(e){t.$set(t.onePart,"surface_id",e)},expression:"onePart.surface_id"}},t._l(t.surfaceList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"数量",prop:"product_num"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入零件数量"},model:{value:t.onePart.product_num,callback:function(e){t.$set(t.onePart,"product_num",e)},expression:"onePart.product_num"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"价格系数",prop:"coefficient"}},[a("el-input",{attrs:{type:"number",placeholder:"请输入价格系数"},model:{value:t.onePart.coefficient,callback:function(e){t.$set(t.onePart,"coefficient",e)},expression:"onePart.coefficient"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{staticStyle:{width:"100%"},attrs:{size:"small",type:"textarea",rows:2,placeholder:"请输入备注"},model:{value:t.onePart.remark,callback:function(e){t.$set(t.onePart,"remark",e)},expression:"onePart.remark"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"订单拟启动时刻",prop:"start_date"}},[a("el-input",{attrs:{placeholder:"请选择订单拟启动时刻",readonly:""},on:{focus:function(e){t.selectRiQi("start_date")}},model:{value:t.onePart.start_date,callback:function(e){t.$set(t.onePart,"start_date",e)},expression:"onePart.start_date"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"拟到货时刻",prop:"due_date"}},[a("el-input",{attrs:{placeholder:"请选择拟到货时刻",readonly:""},on:{focus:function(e){t.selectRiQi("due_date")}},model:{value:t.onePart.due_date,callback:function(e){t.$set(t.onePart,"due_date",e)},expression:"onePart.due_date"}})],1)],1)],1)],1),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","padding-bottom":"15px"}},[a("el-button",{on:{click:function(e){t.addPartsShow=!1}}},[t._v("取消")]),t._v("  "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addPartSure("ruleFormPart")}}},[t._v("确定")])],1)])])],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisibleDelpart,width:"80%","before-close":t.handleCloseDelPart},on:{"update:visible":function(e){t.dialogVisibleDelpart=e}}},[a("span",[t._v("你确定要删除这个零件")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleDelpart=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.onePartDelSure}},[t._v("确 定")])],1)]),t._v(" "),a("van-actionsheet",{attrs:{title:"选择日期"},model:{value:t.showRiQi,callback:function(e){t.showRiQi=e},expression:"showRiQi"}},[a("van-datetime-picker",{attrs:{type:"date"},on:{confirm:t.riqiSure,cancel:t.riqiCancel},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),t._v(" "),a("van-actionsheet",{attrs:{title:"选择日期"},model:{value:t.showRiQiSear,callback:function(e){t.showRiQiSear=e},expression:"showRiQiSear"}},[a("van-datetime-picker",{attrs:{type:"date"},on:{confirm:t.riqiSureSear,cancel:function(e){t.riqiSureSear()}},model:{value:t.currentDateSear,callback:function(e){t.currentDateSear=e},expression:"currentDateSear"}})],1),t._v(" "),a("div",{staticClass:"quanping"},[a("van-actionsheet",{attrs:{title:"报价单"},model:{value:t.showKuSu,callback:function(e){t.showKuSu=e},expression:"showKuSu"}},[a("div",{staticStyle:{position:"relative"}},[t.uploadLoading?a("div",{staticStyle:{position:"absolute","z-index":"100",height:"100%",width:"100%",top:"120px",display:"flex","align-items":"center","justify-content":"center"}},[a("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","background-color":"rgba(0,0,0,0.7)",padding:"20px","border-radius":"5px"}},[a("van-loading",{attrs:{type:"spinner",size:"40px"}}),t._v("  "),a("p",{staticStyle:{color:"#ffffff","vertical-align":"middle",padding:"0"}},[t._v("加载stl中")])],1)]):t._e(),t._v(" "),a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"stlFile2"},on:{change:function(e){t.stlStart(e)}}}),t._v(" "),a("div",{staticStyle:{"text-align":"center","margin-bottom":"15px","margin-top":"15px"}},[t._v("零件列表")]),t._v(" "),t._l(t.kusupartArr,function(e,i){return a("div",{staticStyle:{width:"94%",margin:"0 auto 15px",border:"1px solid #d6d6d6",padding:"5px","background-color":"#eeeeee"}},[a("van-row",[a("van-col",{attrs:{span:8}},[a("img",{staticStyle:{width:"100%",border:"1px solid #d6d6d6"},attrs:{src:e.diagram,alt:""},on:{click:function(a){t.seePicture(e.diagram)}}})]),t._v(" "),a("van-col",{staticStyle:{"padding-left":"10px"},attrs:{span:16}},[a("div",{staticStyle:{"font-size":"0.9rem","line-height":"1.2rem"}},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticStyle:{"font-size":"0.9rem","line-height":"1.2rem"}},[t._v(t._s(e.matname))]),t._v(" "),a("div",{staticStyle:{"font-size":"0.9rem","line-height":"1.2rem","word-wrap":"break-word","word-break":"break-all"}},[t._v(t._s(e.volume_size1)+" ")]),t._v(" "),a("div",{staticStyle:{"font-size":"0.9rem","line-height":"1.2rem"}},[t._v("体积 :"+t._s(e.volume_size2))])])],1),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-between",width:"100%","align-items":"center","border-bottom":"1px solid #d6d6d6","margin-bottom":"8px","padding-bottom":"5px","line-height":"1.5rem"}},[a("span",{staticStyle:{"font-size":"1rem","line-height":"1.2rem"}},[t._v("单价:\n\t\t\t\t\t\t"+t._s(parseFloat(Number(e.price)*Number(e.volume_size.volume)*Number(t.kusuData.coefficient/10)/1e3).toFixed(2))+"\n\t\t\t\t\t\t")]),t._v(" "),a("span",[t._v("数量  "),a("i",{staticClass:"el-icon-remove",staticStyle:{color:"#1478F0","font-size":"1.2rem"},on:{click:function(a){t.reduceOne(e)}}}),t._v(" "+t._s(e.product_num)+" "),a("i",{staticClass:"el-icon-circle-plus",staticStyle:{color:"#1478F0","font-size":"1.2rem"},on:{click:function(a){t.addOne(e)}}})])]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"space-between",width:"100%","align-items":"center"}},[a("span",{staticStyle:{"font-size":"1rem","line-height":"1.2rem"}},[t._v("小计:\n\t\t\t\t\t\t"+t._s((parseFloat(Number(e.price)*Number(e.volume_size.volume)*Number(t.kusuData.coefficient/10)/1e3).toFixed(2)*Number(e.product_num)).toFixed(2))+"\n\t\t\t\t\t\t")]),t._v(" "),a("span",[a("i",{staticClass:"el-icon-edit",staticStyle:{"font-size":"1.2rem",color:"#008800"},on:{click:function(a){t.kusupartEdit(e)}}}),t._v("      \n\t\t\t\t\t\t"),a("i",{staticClass:"el-icon-delete",staticStyle:{"font-size":"1.2rem",color:"#f56c6c"},on:{click:function(a){t.kusupartDel(e,i)}}}),t._v("    ")])])],1)}),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.stlStartS(2)}}},[t._v("添加零件(stl)")])],1),t._v(" "),t.qiyuShow?a("div",[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-start",width:"94%",margin:"15px auto"}},[t._v("\n\t\t\t\t\t 税费(元)  "),a("el-input",{staticStyle:{width:"180px"},attrs:{type:"number",min:"0",placeholder:"请输入数量"},on:{change:function(e){t.tofixedsd(e,t.qiyuData,"taxation")}},model:{value:t.qiyuData.taxation,callback:function(e){t.$set(t.qiyuData,"taxation",e)},expression:"qiyuData.taxation"}})],1),t._v(" "),a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"flex-start",width:"94%",margin:"0 auto"}},[t._v("\n\t\t\t\t\t运费(元)  \t"),a("el-input",{staticStyle:{width:"180px"},attrs:{type:"number",min:"0",placeholder:"请输入数量"},on:{change:function(e){t.tofixedsd(e,t.qiyuData,"freight")}},model:{value:t.qiyuData.freight,callback:function(e){t.$set(t.qiyuData,"freight",e)},expression:"qiyuData.freight"}})],1)]):t._e(),t._v(" "),a("div",{staticStyle:{height:"2.5rem"}}),t._v(" "),a("div",{staticClass:"kusuOrderB",staticStyle:{background:"#FFFFFF",position:"fixed",bottom:"0",height:"2.5rem","line-height":"2.5rem","border-top":"1px solid #d6d6d6",width:"100%",display:"flex","justify-content":"space-between"}},[a("span",[t._v("  合计 : "+t._s(t.kusuAllprice.toFixed(2)))]),t._v(" "),a("span",{staticStyle:{height:"2.5rem",background:"#409EFF",padding:"0 10px",color:"#FFFFFF"},on:{click:t.kusuBaojiadan}},[t._v("生成报价单")])])],2)])],1),t._v(" "),a("div",{staticClass:"quanping"},[a("van-actionsheet",{attrs:{title:t.kusupartshowTitle},model:{value:t.kusuaddpartshow,callback:function(e){t.kusuaddpartshow=e},expression:"kusuaddpartshow"}},[a("div",{staticStyle:{"text-align":"center","margin-top":"15px"}},[a("img",{staticStyle:{border:"1px solid #d6d6d6",width:"85%",padding:"1px"},attrs:{src:t.kusuData.diagram,alt:""},on:{click:function(e){t.seePicture(t.kusuData.diagram)}}})]),t._v(" "),a("div",{staticClass:"kspdiv"},[a("span",[t._v("名称")]),t._v(" "),a("span",[t._v(t._s(t.kusuData.name))])]),t._v(" "),a("div",{staticClass:"kspdiv"},[a("span",[t._v("尺寸")]),t._v(" "),a("span",[t._v(t._s(t.kusuData.volume_size1))])]),t._v(" "),a("div",{staticClass:"kspdiv"},[a("span",[t._v("体积")]),t._v(" "),a("span",[t._v("体积 : "+t._s(t.kusuData.volume_size2))])]),t._v(" "),a("div",{staticClass:"kspdiv"},[a("span",[t._v("材质")]),t._v(" "),a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"成型材质"},on:{change:t.kusuSelectMate},model:{value:t.kusuData.material_id,callback:function(e){t.$set(t.kusuData,"material_id",e)},expression:"kusuData.material_id"}},t._l(t.materialAllList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"kspdiv"},[a("span",[t._v("数量")]),t._v(" "),a("el-input",{staticStyle:{width:"180px"},attrs:{type:"number",placeholder:"请输入数量"},model:{value:t.kusuData.product_num,callback:function(e){t.$set(t.kusuData,"product_num",e)},expression:"kusuData.product_num"}})],1),t._v(" "),a("div",{staticClass:"kspdiv"},[a("span",[t._v("单价")]),t._v(" "),t.kusuData.volume_size?a("span",[t.kusuData.volume_size.volume&&t.kusuData.price?a("span",[t._v("\n\t\t\t\t\t"+t._s(parseFloat(Number(t.kusuData.price)*Number(t.kusuData.volume_size.volume)*Number(t.kusuData.coefficient/10)/1e3).toFixed(2))+"\n\t\t\t\t")]):t._e()]):t._e()]),t._v(" "),a("div",{staticClass:"kspdiv"},[a("span",[t._v("合计:")]),t._v(" "),t.kusuData.coefficient&&t.kusuData.price&&t.kusuData.product_num&&t.kusuData.volume_size.volume?a("span",[t._v("\n\t\t\t\t￥"+t._s((parseFloat(Number(t.kusuData.price)*Number(t.kusuData.volume_size.volume)*Number(t.kusuData.coefficient/10)/1e3).toFixed(2)*Number(t.kusuData.product_num)).toFixed(2))+"\n\t\t\t\t")]):t._e()]),t._v(" "),a("div",{staticClass:"kspdiv"},[a("span",[t._v("价格系数")]),t._v(" "),a("el-slider",{staticStyle:{width:"180px"},attrs:{"format-tooltip":t.formatTooltip,min:1,max:1e3},model:{value:t.kusuData.coefficient,callback:function(e){t.$set(t.kusuData,"coefficient",e)},expression:"kusuData.coefficient"}})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"25px",margin:"15px","padding-right":"10px",display:"flex","justify-content":"flex-end"}},[a("el-button",{on:{click:function(e){t.kusuaddpartshow=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.kusuaddpartSure}},[t._v("确定")])],1)])],1),t._v(" "),a("div",{staticClass:"quanping"},[a("van-actionsheet",{attrs:{title:"报价单"},model:{value:t.kusuOrderShengshow,callback:function(e){t.kusuOrderShengshow=e},expression:"kusuOrderShengshow"}},[a("div",{staticStyle:{"text-align":"center",margin:"1.5rem auto","font-size":"1.5rem"}},[t._v("快速报价单已生成")]),t._v(" "),a("div",{staticStyle:{"text-align":"center",margin:"1.5rem auto","font-size":"1.2rem","line-height":"1.5rem"}},[t._v("\n\t\t\t您的报价单已经生成"),a("br"),t._v("\n\t\t\t点击下方按钮下载后查看或分享\n\t\t")]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-button",{attrs:{type:"success"},on:{click:t.kusuPathSure}},[t._v("下载 (查看) 报价单(pdf)")])],1),t._v(" "),a("div",{staticStyle:{width:"90%",margin:"2rem auto 0","line-height":"25px"}},[t._v("温馨提示：部分浏览器仅能查看(请将链接复制到其他浏览器，即可自动下载)")]),t._v(" "),a("div",{staticStyle:{position:"fixed",width:"100%",bottom:"25px",right:"10px",display:"flex","justify-content":"flex-end"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.kusuOrderShengshow=!1}}},[t._v("关闭")])],1)])],1),t._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeCloseDaoRu,title:"提示"},model:{value:t.dialogDaoRu,callback:function(e){t.dialogDaoRu=e},expression:"dialogDaoRu"}},[a("div",{staticStyle:{margin:"10px"}},[a("div",{staticStyle:{"text-align":"center"}},[t._v("你确定要导入快速报价的零件")]),t._v(" "),a("div",{staticStyle:{"margin-top":"10px","text-align":"center"}},[t._v("订单号  "),a("el-input",{staticStyle:{width:"180px"},model:{value:t.daoruData.key,callback:function(e){t.$set(t.daoruData,"key",e)},expression:"daoruData.key"}})],1)])]),t._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.editoneCPartSure,title:"修改零件信息"},model:{value:t.editPartCopyShow,callback:function(e){t.editPartCopyShow=e},expression:"editPartCopyShow"}},[a("div",{staticStyle:{margin:"10px"}},[a("div",[a("el-input",{attrs:{type:"number",placeholder:"请输入数量(个)"},model:{value:t.onePart.product_num,callback:function(e){t.$set(t.onePart,"product_num",e)},expression:"onePart.product_num"}})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-input",{attrs:{placeholder:"请选择订单拟启动时刻",readonly:""},on:{focus:function(e){t.selectRiQi("start_date")}},model:{value:t.onePart.start_date,callback:function(e){t.$set(t.onePart,"start_date",e)},expression:"onePart.start_date"}})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-input",{attrs:{placeholder:"请选择拟到货时刻",readonly:""},on:{focus:function(e){t.selectRiQi("due_date")}},model:{value:t.onePart.due_date,callback:function(e){t.$set(t.onePart,"due_date",e)},expression:"onePart.due_date"}})],1)])]),t._v(" "),a("div",{staticClass:"quanping"},[a("van-actionsheet",{attrs:{title:"再次下单"},model:{value:t.orderCopyShow,callback:function(e){t.orderCopyShow=e},expression:"orderCopyShow"}},[a("div",{staticStyle:{"font-size":"17px",color:"#444","text-align":"center","margin-top":"10px"}},[t._v("零件列表")]),t._v(" "),a("div",{staticStyle:{width:"92%",margin:"5px auto 0"}},[a("el-button",{on:{click:t.editoneCPart}},[t._v("批量修改零件信息")])],1),t._v(" "),a("van-checkbox-group",{staticClass:"card-goods",model:{value:t.hdSPartId,callback:function(e){t.hdSPartId=e},expression:"hdSPartId"}},t._l(t.CopyorderTable,function(e,i){return a("div",{staticStyle:{border:"1px solid #d6d6d6",padding:"10px",width:"92%",margin:"10px auto 0"}},[a("van-row",[a("van-row",[a("van-col",{attrs:{span:"2"}},[a("van-checkbox",{key:e.id,staticClass:"card-goods__item",attrs:{name:e.id}})],1),t._v(" "),a("van-col",{staticStyle:{display:"flex","justify-content":"center","align-items":"center"},attrs:{span:"8"}},[a("img",{staticStyle:{width:"90%"},attrs:{src:e.diagram,alt:""},on:{click:function(a){t.seePicture(e.diagram)}}})]),t._v(" "),a("van-col",{attrs:{span:"14"}},[a("div",[t._v(t._s(e.name))]),t._v(" "),a("div",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[e.matname?a("span",[t._v(t._s(e.matname)+" ,")]):t._e(),t._v(" "+t._s(e.modname))]),t._v(" "),a("div",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[e.surname?a("span",[t._v(t._s(e.surname)+" ,")]):t._e(),t._v(" "+t._s(e.equname))])])],1),t._v(" "),a("van-row",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[t._v("数量: "+t._s(e.product_num)+"个 , 单价:"+t._s(Number(Number(e.price).toFixed(2)))+"元 , ")]),t._v(" "),a("van-row",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[t._v("价格系数: "+t._s(Number(Number(e.coefficient).toFixed(2))))]),t._v(" "),a("van-row",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[t._v("合计: \n\t\t\t\t"),e.price&&e.product_num&&e.coefficient?a("span",[t._v("\n\t\t\t\t\t"+t._s(Number((Number(e.price)*Number(e.product_num)).toFixed(2)))+"\n\t\t\t\t")]):t._e(),t._v(" "),e.price&&e.product_num&&e.coefficient?t._e():a("span")]),t._v(" "),a("van-row",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[t._v("订单拟启动时刻: "+t._s(e.start_date))]),t._v(" "),a("van-row",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[t._v("拟到货时刻: "+t._s(e.due_date))]),t._v(" "),a("van-row",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[t._v("备注: "+t._s(e.remark))]),t._v(" "),a("van-row",{staticStyle:{"font-size":"0.9rem","line-height":"1.3rem"}},[t._v("尺寸: 长 : "+t._s(e.volume_size.xx)+"mm 宽 : "+t._s(e.volume_size.zz)+"mm 高 : "+t._s(e.volume_size.yy)+"mm 体积 : "+t._s(e.volume_size.volume)+"mm³")])],1),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"0.5rem"}},[a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"small"},on:{click:function(a){t.deloneCPart(e)}}},[t._v("删除")])],1)],1)})),t._v(" "),a("div",{staticStyle:{width:"92%",display:"flex","justify-content":"flex-end","margin-bottom":"15px","margin-top":"20px"}},[a("el-button",{on:{click:function(e){t.orderCopyShow=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.copyOneOrderSure}},[t._v("确定")])],1)],1)],1)],1):t._e()]),t._v(" "),a("el-tab-pane",{attrs:{name:"second"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("退换货管理 \n\t\t\t"),t.isRed?a("span",{staticStyle:{"margin-top":"12px",float:"right",display:"flex","align-items":"center","font-size":"7px","justify-content":"center","min-width":"15px",height:"15px",color:"#fff","border-radius":"7px",background:"red",padding:"0 3px"}},[t._v(t._s(t.isRed))]):t._e()]),t._v(" "),t.tabShow2?a("div",[a("returnGoods")],1):t._e()])],1)],1)},[],!1,null,null,null));H.options.__file="order.vue";var G=H.exports,J=a("szn1"),K=(a("4ZZZ"),a("zjxR")),W=a.n(K),Y=a("kunR"),U={data:function(){return{radioFapiao:!1,areaShow:!0,lk_areaShow:!0,loading:!0,dialogTitle:"添加客户",dialogCTitle:"添加",dialogVisible:!1,dialogVisibleC:!1,dialogVisibleDel:!1,dialogVisibleDelK:!1,dialogVisibleSH:!1,dialogVisibleDelLK:!1,labelPosition:"left",addStatus:1,delStatus:1,editCustomerStatus:0,editIndex:0,tableData:[],options:[{label:"生产制作",value:1},{label:"生产制作2",value:2}],optionsArea:W.a,rulesC:{linkman_name:[{required:!0,message:"请输入姓名",trigger:"blur"}],lk_address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],lk_phone:[{required:!0,message:"请输入正确手机号码",trigger:"blur"},{validator:P.e,trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]},ruleCustomer:{name:[{required:!0,message:"请输入客户名称",trigger:"blur"}],tel:[{required:!0,message:"请输入联系方式",trigger:"blur"},{validator:P.f,trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],customer_type_id:[{required:!0,message:"请选择商家行业",validator:P.g,trigger:"blur"}],taxno:[{required:!0,message:"请输入税号",trigger:"blur"},{min:18,max:18,message:"税号为18位数",trigger:"blur"}],bank:[{required:!0,message:"请输入银行",trigger:"blur"}],bankno:[{required:!0,message:"请输入银行账号",trigger:"blur"}],no:[{required:!0,message:"请输入客户代号",trigger:"blur"}]},statusShenhe:"",pageSize:5,linmitTotal:5,currentPage:1,oneData:{name:"",tel:"",ticket_info:{},linkman:[],consignee:[],address:"",taxno:""},num:[],oneId:0,oneDataC:{lk_address1:[],lk_moren:!0},selectData:[],customerType:[],customerTypeId:[],selected:[],pca:Y.pca,pcaa:W.a,addShowQ:!1,editShowQ:!1,delShowQ:!1,checkShowQ:!1,wxjbId:"",wxjbShow:!1}},methods:{wxjb:function(t){this.wxjbId=t.id,this.wxjbShow=!0},wxjbSure:function(){var t=this,e={};e.cid=this.wxjbId,this.wxjbShow=!1,Object(C.l)(e).then(function(e){t.$message({message:"客户微信解绑成功",type:"success"}),t.initTableData(t.currentPage)}).catch(function(t){console.log("客户微信解绑失败")})},initTableData:function(t){var e=this,a={page:t};Object(C.j)(a).then(function(a){e.tableData=[],e.pageSize=5,e.currentPage=t,e.linmitTotal=a.data.total,e.tableData=a.data.data,e.loading=!1}).catch(function(t){reject(t)})},addCustomer:function(){var t=this;this.dialogVisible=!0,this.editCustomerStatus=1,this.areaShow=!1,this.radioFapiao=!1,this.oneData={ticket_info:{},linkman:[],consignee:[],customer_type_id:[],address1:[]},this.checkShowQ?this.oneData.status="通过":this.oneData.status="不通过",setTimeout(function(){t.areaShow=!0},0)},delCustomer:function(){this.dialogVisibleDelK=!0,this.delStatus=2},lookCustomer:function(){this.dialogVisibleSH=!0},handleSelectionChange:function(t){this.selectData=t},handleEdit:function(t,e){var a=this;this.dialogVisible=!0,this.areaShow=!1,setTimeout(function(){a.areaShow=!0},0),Object(C.i)(e.id).then(function(t){a.num=[],a.oneData=t.data,a.oneData.address1=[a.oneData.province,a.oneData.city,a.oneData.area];var e=t.data.customer_type_id;a.customerArr(a.customerTypeId,e),a.oneData.customer_type_id=a.num.reverse(),a.num.push(e),Array.isArray(a.oneData.ticket_info)?a.oneData.ticket_info={}:(a.oneData.ticket_info.taxno||a.oneData.ticket_info.bank||a.oneData.ticket_info.bankno?a.radioFapiao=!0:a.radioFapiao=!1,a.$set(a.oneData,"taxno",a.oneData.ticket_info.taxno),a.$set(a.oneData,"bank",a.oneData.ticket_info.bank),a.$set(a.oneData,"bankno",a.oneData.ticket_info.bankno)),1==a.oneData.status?a.oneData.status="通过":a.oneData.status="不通过"}).catch(function(t){console.log(t)}),this.editCustomerStatus=2},handleDelete:function(t,e){this.oneId=e.id,this.dialogVisibleDelK=!0,this.delStatus=1},delContactK:function(){var t=this;if(1==this.delStatus){this.dialogVisibleDelK=!1;var e=this.oneId,a={id:e};Object(C.h)(e,a).then(function(e){t.$message({message:"删除成功",type:"success"}),t.initTableData(1)}).catch(function(t){console.log(t)})}else{var i=[],n=!0,o=!1,s=void 0;try{for(var r,c=l()(this.selectData);!(n=(r=c.next()).done);n=!0){var d=r.value;i.push(d.id)}}catch(t){o=!0,s=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw s}}var u={id:i};Object(C.h)("",u).then(function(e){t.$message({message:"删除成功",type:"success"}),t.initTableData(1)}).catch(function(t){console.log(t)}),alert("批量删除")}},copyConsignee:function(t){var e={},a=!0;delete(e=r()({},t)).customer_id,delete e.defvue,delete e.created_at,delete e.updated_at,e.id=0;var i=!0,n=!1,o=void 0;try{for(var s,c=l()(this.oneData.consignee);!(i=(s=c.next()).done);i=!0){s.value.lk_phone==e.lk_phone&&(a=!1)}}catch(t){n=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(n)throw o}}a?(this.oneData.consignee.push(e),this.$message({message:"设置成功",type:"success"})):this.$message({message:"该手机号码在收货人里已存在",type:"warning"})},handleAddCustomerS:function(t){var e=this,a=r()({},this.oneData),i=a.customer_type_id.length;a.ticket_info.taxno=a.taxno,a.ticket_info.bank=a.bank,a.ticket_info.bankno=a.bankno,this.radioFapiao||(a.ticket_info.taxno="",a.ticket_info.bank="",a.ticket_info.bankno=""),void 0!==i&&(a.customer_type_id=a.customer_type_id[i-1]),"通过"==a.status?a.status=1:a.status=0,a.province=a.address1[0],a.city=a.address1[1],a.area=a.address1[2],delete a.address1,this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;if(1==e.editCustomerStatus)if(a.province)if(a.linkman.length>0&&a.consignee.length>0){var i=e.$loading({lock:!0,text:"提交中，请等待",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:document.querySelector(".customerB")});Object(C.g)(a).then(function(t){e.$message({message:"添加成功",type:"success"}),e.initTableData(1),e.dialogVisible=!1,i.close()}).catch(function(t){i.close(),console.log(t)})}else e.$message({message:"联系成员和收货成员不能为空",type:"warning"});else e.$message({message:"客户所在地区不能为空",type:"warning"});else{var n=a.id;a.submit="1";var o=e.$loading({lock:!0,text:"提交中，请等待",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:document.querySelector(".customerB")});Object(C.i)(n,a).then(function(t){e.$message({message:"修改成功",type:"success"}),e.initTableData(e.currentPage),e.dialogVisible=!1,e.oneData={ticket_info:{},linkman:[],consignee:[],customer_type_id:[]},o.close()}).catch(function(t){o.close(),console.log(t)})}})},submitSH:function(){var t="";t="通过"==this.statusShenhe?1:0,alert(t),this.dialogVisibleSH=!1},handleClose:function(){this.dialogVisible=!1,this.dialogVisibleDelK=!1,this.dialogVisibleSH=!1,this.wxjbShow=!1,this.$nextTick(function(){this.$refs.ruleFormCustomer.resetFields()}),this.oneData={ticket_info:{},linkman:[],consignee:[],customer_type_id:[]}},addLinkman:function(){var t=this;this.addStatus=1,this.oneDataC={email:"",zipcode:"",id:0},this.dialogVisibleC=!0,this.dialogCTitle="添加",this.lk_areaShow=!1,setTimeout(function(){t.lk_areaShow=!0},0)},handleCloseC:function(){this.dialogVisibleC=!1,this.$refs.ruleFormC.resetFields()},handleEditC:function(t,e){var a=this;this.dialogCTitle="修改",this.dialogVisibleC=!0,this.addStatus=2,this.oneDataC=r()({},e),this.editIndex=t,this.lk_areaShow=!1,setTimeout(function(){a.lk_areaShow=!0},0),this.oneDataC.lk_address1=[this.oneDataC.province,this.oneDataC.city,this.oneDataC.area]},delContactLK:function(){var t=this,e=this.oneDataC.id,a=this.oneDataC.a,i=this.oneDataC.b,n={id:e};0==e?(this.$message({message:"删除成功",type:"success"}),this.dialogVisibleDelLK=!1,1==a?this.oneData.linkman.splice(i,1):this.oneData.consignee.splice(i,1)):Object(C.a)(e,n).then(function(e){t.$message({message:"删除成功",type:"success"}),t.dialogVisibleDelLK=!1,1==a?t.oneData.linkman.splice(i,1):t.oneData.consignee.splice(i,1)}).catch(function(t){console.log(t)})},handleDeleteLK:function(t,e,a){this.dialogVisibleDelLK=!0,this.oneDataC=r()({},e),this.oneDataC.a=a,this.oneDataC.b=t},addConsignee:function(){var t=this;this.lk_areaShow=!1,this.oneDataC={email:"",zipcode:"",id:0},this.addStatus=3,this.dialogVisibleC=!0,this.dialogCTitle="添加收货人",setTimeout(function(){t.lk_areaShow=!0},0)},handleEditS:function(t,e){var a=this;this.dialogVisibleC=!0,this.dialogCTitle="修改收货人",this.oneDataC=r()({},e),this.editIndex=t,this.addStatus=4,this.lk_areaShow=!1,setTimeout(function(){a.lk_areaShow=!0},0),this.oneDataC.lk_address1=[this.oneDataC.province,this.oneDataC.city,this.oneDataC.area]},handleDeleteS:function(t,e){this.dialogVisibleDel=!0,this.oneDataC=e},submitC:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.oneDataC.lk_address1?(e.oneDataC.province=e.oneDataC.lk_address1[0],e.oneDataC.city=e.oneDataC.lk_address1[1],e.oneDataC.area=e.oneDataC.lk_address1[2],delete e.oneDataC.lk_address1,1==e.addStatus?(e.oneDataC.id=0,e.oneData.linkman.push(e.oneDataC)):2==e.addStatus?e.$set(e.oneData.linkman,e.editIndex,e.oneDataC):3==e.addStatus?(e.oneDataC.id=0,e.oneData.consignee.push(e.oneDataC)):e.$set(e.oneData.consignee,e.editIndex,e.oneDataC),e.dialogVisibleC=!1):e.$message({message:"请选择所在地区",type:"warning"})})},delContact:function(){this.dialogVisibleDel=!1},pingyinDaXie:function(t){var e=J.a.getCamelChars(t);this.$set(this.oneData,"no",e)},replaceType:function(t){var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;s.value=s.id,s.label=s.name,s.children=s.child,delete s.id,delete s.name,delete s.child,s.children.length>0?this.replaceType(s.children):delete s.children}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}return t},customerArr:function(t,e,a){if(t.length>0){var i=!0,n=!1,o=void 0;try{for(var s,r=l()(t);!(i=(s=r.next()).done);i=!0){var c=s.value;if(c.id==e){if(a){var d=a.id;this.num.push(d),this.customerArr(this.customerTypeId,d)}}else this.customerArr(c.child,e,c)}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}}return this.num},handleAreaKehu:function(t,e){},handleArea:function(){},handleChange:function(t){},handleCloseDelLK:function(){this.dialogVisibleDelLK=!1},handleCurrentChangePage:function(t){this.initTableData(t)},handleSizeChange:function(t){},handledefault:function(t,e,a){var i=this,n={};n.cid=this.oneData.id,n.uid=e.id,n.type=1==a?0:1,Object(C.m)(n).then(function(t){if(i.$message({message:"设置默认地址成功",type:"success"}),1==a){var n=!0,o=!1,s=void 0;try{for(var r,c=l()(i.oneData.linkman);!(n=(r=c.next()).done);n=!0){var d=r.value;"number"==typeof d.defvue&&(d.id==e.id?d.defvue=1:d.defvue=0)}}catch(t){o=!0,s=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw s}}}else{var u=!0,p=!1,h=void 0;try{for(var v,m=l()(i.oneData.consignee);!(u=(v=m.next()).done);u=!0){var f=v.value;"number"==typeof f.defvue&&(f.id==e.id?f.defvue=1:f.defvue=0)}}catch(t){p=!0,h=t}finally{try{!u&&m.return&&m.return()}finally{if(p)throw h}}}}).catch(function(t){})}},created:function(){var t=this;this.initTableData(1),Object(C.k)().then(function(e){var a=JSON.parse(d()(e.data));t.customerTypeId=e.data,t.customerType=t.replaceType(a)}).catch(function(t){})},mounted:function(){var t=f.a.get("actionArr");t=JSON.parse(t);var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;"delete"==s&&(this.delShowQ=!0),"add"==s&&(this.addShowQ=!0),"edit"==s&&(this.editShowQ=!0),"check"==s&&(this.checkShowQ=!0)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}}},X=(a("xhmh"),Object(g.a)(U,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"customerC"},[a("el-dialog",{attrs:{title:"提示",visible:t.wxjbShow,width:"450px","before-close":t.handleClose},on:{"update:visible":function(e){t.wxjbShow=e}}},[a("span",[t._v("你确定要微信解绑")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.wxjbShow=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.wxjbSure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"审核",visible:t.dialogVisibleSH,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleSH=e}}},[a("span",[t._v("审核名单 : "),t._l(t.selectData,function(e){return a("span",{key:e.name},[t._v(t._s(e.name)+" | ")])}),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[t._v("\n\t\t\t\t审核状态 ：\n\t\t\t\t"),a("el-radio-group",{model:{value:t.statusShenhe,callback:function(e){t.statusShenhe=e},expression:"statusShenhe"}},[a("el-radio",{attrs:{label:"通过"}}),t._v(" "),a("el-radio",{attrs:{label:"不通过"}})],1)],1)],2),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleSH=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.submitSH}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"删除联系人",visible:t.dialogVisibleDelLK,width:"30%","before-close":t.handleCloseDelLK},on:{"update:visible":function(e){t.dialogVisibleDelLK=e}}},[a("span",[t._v("你确定要删除 ")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleDelK=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.delContactLK}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"删除客户",visible:t.dialogVisibleDelK,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleDelK=e}}},[a("span",[t._v("你确定要删除 ")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleDelK=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.delContactK}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"删除",visible:t.dialogVisibleDel,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleDel=e}}},[a("span",[t._v("你确定要删除 "),a("b",[t._v(t._s(t.oneDataC.name))])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleDel=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.delContact}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:t.dialogCTitle,visible:t.dialogVisibleC,width:"450px","before-close":t.handleCloseC},on:{"update:visible":function(e){t.dialogVisibleC=e}}},[a("div",{staticClass:"box-center"},[a("el-form",{ref:"ruleFormC",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.oneDataC,"label-width":"105px",rules:t.rulesC}},[a("div",[a("el-form-item",{attrs:{label:"姓名",prop:"linkman_name"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"姓名"},model:{value:t.oneDataC.linkman_name,callback:function(e){t.$set(t.oneDataC,"linkman_name",e)},expression:"oneDataC.linkman_name"}})],1)],1),t._v(" "),a("div",[a("el-form-item",{attrs:{label:"手机号码",prop:"lk_phone"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"手机号码"},model:{value:t.oneDataC.lk_phone,callback:function(e){t.$set(t.oneDataC,"lk_phone",e)},expression:"oneDataC.lk_phone"}})],1)],1),t._v(" "),a("div",[a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"邮箱"},model:{value:t.oneDataC.email,callback:function(e){t.$set(t.oneDataC,"email",e)},expression:"oneDataC.email"}})],1),t._v(" "),a("div",{staticClass:"areaClass",staticStyle:{display:"flex","align-items":"center","padding-left":"25px","margin-bottom":"24px"}},[a("span",{staticStyle:{color:"#606266","font-weight":"bold"}},[a("span",{staticStyle:{color:"#f56c6c"}},[t._v("*")]),t._v(" 所在地区    ")]),t._v(" "),t.lk_areaShow?a("span",[a("area-cascader",{staticStyle:{display:"inline-block",width:"185px",height:"36px"},attrs:{type:"text",level:1,data:t.pcaa},on:{change:t.handleArea},model:{value:t.oneDataC.lk_address1,callback:function(e){t.$set(t.oneDataC,"lk_address1",e)},expression:"oneDataC.lk_address1"}})],1):t._e()]),t._v(" "),a("el-form-item",{attrs:{label:"详细地址",prop:"lk_address"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入详细地址",type:"textarea"},model:{value:t.oneDataC.lk_address,callback:function(e){t.$set(t.oneDataC,"lk_address",e)},expression:"oneDataC.lk_address"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"邮编",prop:"zipcode"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"邮编"},model:{value:t.oneDataC.zipcode,callback:function(e){t.$set(t.oneDataC,"zipcode",e)},expression:"oneDataC.zipcode"}})],1)],1)])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleCloseC}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitC("ruleFormC")}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"1000px","before-close":t.handleClose,top:"3vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"ruleFormCustomer",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.oneData,"label-position":t.labelPosition,rules:t.ruleCustomer}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-row",{staticClass:"pl"},[a("el-form-item",{attrs:{label:"商家行业",prop:"customer_type_id"}},[a("el-cascader",{staticClass:"input-width",attrs:{options:t.customerType,"change-on-select":""},model:{value:t.oneData.customer_type_id,callback:function(e){t.$set(t.oneData,"customer_type_id",e)},expression:"oneData.customer_type_id"}})],1)],1),t._v(" "),a("div",{staticClass:"areaClass",staticStyle:{display:"flex","align-items":"center","padding-left":"22px","margin-bottom":"28px"}},[a("span",{staticStyle:{color:"#606266","font-weight":"bold"}},[a("span",{staticStyle:{color:"#f56c6c"}},[t._v("*")]),t._v(" 所在地区   ")]),t._v(" "),t.areaShow?a("span",[a("area-cascader",{staticStyle:{display:"inline-block",width:"165px",height:"36px"},attrs:{type:"text",level:1,data:t.pcaa},on:{change:t.handleAreaKehu},model:{value:t.oneData.address1,callback:function(e){t.$set(t.oneData,"address1",e)},expression:"oneData.address1"}})],1):t._e()])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-row",{staticClass:"pl"},[a("el-form-item",{attrs:{label:"客户名称",prop:"name"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"客户名称 "},on:{change:t.pingyinDaXie},model:{value:t.oneData.name,callback:function(e){t.$set(t.oneData,"name",e)},expression:"oneData.name"}})],1)],1),t._v(" "),a("el-row",{staticClass:"pl"},[a("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"详细地址"},model:{value:t.oneData.address,callback:function(e){t.$set(t.oneData,"address",e)},expression:"oneData.address"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-row",{staticClass:"pl"},[a("el-form-item",{attrs:{label:"客户代号",prop:"no"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"客户代号 "},model:{value:t.oneData.no,callback:function(e){t.$set(t.oneData,"no",e)},expression:"oneData.no"}})],1)],1),t._v(" "),a("el-row",{staticClass:"pl"},[a("el-form-item",{attrs:{label:"联系电话",prop:"tel"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"联系电话"},model:{value:t.oneData.tel,callback:function(e){t.$set(t.oneData,"tel",e)},expression:"oneData.tel"}})],1)],1)],1)],1),t._v(" "),a("el-row",{staticClass:"pl"},[a("el-button",{staticClass:"mb",attrs:{type:"primary"},on:{click:t.addLinkman}},[t._v("添加联系成员信息")]),a("el-button",{staticClass:"mb",attrs:{type:"success"},on:{click:t.addConsignee}},[t._v("添加收货成员信息")]),t._v(" "),a("el-table",{attrs:{data:t.oneData.linkman,border:""}},[a("el-table-column",{attrs:{prop:"linkman_name",label:"姓名 (联系成员)",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"lk_phone",label:"手机号码",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"lk_address",label:"地址",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.handleEditC(e.$index,e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"mini"},on:{click:function(a){t.handleDeleteLK(e.$index,e.row,"1")}}},[t._v("删除")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"默认地址",align:"center",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return["number"==typeof e.row.defvue?a("el-button",{attrs:{size:"mini",type:e.row.defvue?"primary":"",icon:"el-icon-location-outline"},on:{click:function(a){t.handledefault(e.$index,e.row,"1")}}}):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"设为收货成员",align:"center",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.copyConsignee(e.row)}}},[t._v("设置")])]}}])})],1)],1),t._v(" "),a("el-row",{staticClass:"pl",staticStyle:{"margin-top":"20px"}},[a("el-table",{attrs:{data:t.oneData.consignee,border:""}},[a("el-table-column",{attrs:{prop:"linkman_name",label:"姓名 (收货成员)",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"lk_phone",label:"手机号码",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"lk_address",label:"地址",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.handleEditS(e.$index,e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"mini"},on:{click:function(a){t.handleDeleteLK(e.$index,e.row,"2")}}},[t._v("删除")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"默认地址",align:"center",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return["number"==typeof e.row.defvue?a("el-button",{attrs:{size:"mini",type:e.row.defvue?"primary":"",icon:"el-icon-location-outline"},on:{click:function(a){t.handledefault(e.$index,e.row,"2")}}}):t._e()]}}])})],1)],1),t._v(" "),a("el-row",{staticClass:"mt pl",staticStyle:{display:"flex","justify-content":"flex-start"}},[t._v("\n\t\t\t\t\t是否需要发票  :  "),t.radioFapiao?a("span",{staticStyle:{display:"flex",width:"15px",height:"15px",border:"1px solid #409EFF","justify-content":"center","align-items":"center",cursor:"pointer"},on:{click:function(e){t.radioFapiao=!1}}},[a("i",{staticStyle:{"margin-top":"-5px",display:"inline-block",width:"7px",height:"13px","border-bottom":"1px solid #409EFF","border-right":"1px solid #409EFF",transform:"rotate(45deg)"}})]):t._e(),t._v(" "),t.radioFapiao?t._e():a("span",{staticStyle:{display:"flex",width:"15px",height:"15px",border:"1px solid #dcdfe6","justify-content":"center","align-items":"center",cursor:"pointer"},on:{click:function(e){t.radioFapiao=!0}}})]),t._v(" "),t.radioFapiao?a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-col",{attrs:{span:8}},[a("el-row",{staticClass:"pl"},[a("el-form-item",{attrs:{label:"税号",prop:"taxno"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"税号"},model:{value:t.oneData.taxno,callback:function(e){t.$set(t.oneData,"taxno",e)},expression:"oneData.taxno"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-row",{staticClass:"pl"},[a("el-form-item",{attrs:{label:"开户银行",prop:"bank"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"开户银行"},model:{value:t.oneData.bank,callback:function(e){t.$set(t.oneData,"bank",e)},expression:"oneData.bank"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-row",{staticClass:"pl"},[a("el-form-item",{attrs:{label:"银行账号",prop:"bankno"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"银行账户"},model:{value:t.oneData.bankno,callback:function(e){t.$set(t.oneData,"bankno",e)},expression:"oneData.bankno"}})],1)],1)],1)],1):t._e(),t._v(" "),t.checkShowQ?a("el-row",{staticClass:"pl",staticStyle:{"margin-top":"10px"}},[a("el-form-item",{attrs:{label:"审核"}},[a("el-radio-group",{model:{value:t.oneData.status,callback:function(e){t.$set(t.oneData,"status",e)},expression:"oneData.status"}},[a("el-radio",{attrs:{label:"通过"}}),t._v(" "),a("el-radio",{attrs:{label:"不通过"}})],1)],1)],1):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer ",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"customerB"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleAddCustomerS("ruleFormCustomer")}}},[t._v("确 定")])],1)])],1),t._v(" "),a("el-row",[t.addShowQ?a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:t.addCustomer}},[t._v("添加客户")]),t._v("  \n\t\t\t\t")],1):t._e(),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","tooltip-effect":"dark","element-loading-text":"加载中...."},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"客户名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tel",label:"联系电话",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"审核",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t"+t._s(1==e.row.status?"通过":"不通过")+"\n\t\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.openid?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.wxjb(e.row)}}},[t._v("\n\t\t\t\t\t\t\t\t微信解绑\n\t\t\t\t\t\t\t")]):t._e(),t._v(" "),t.editShowQ?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("修改")]):t._e(),t._v(" "),t.delShowQ?a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"mini"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")]):t._e()]}}])})],1)],1),t._v(" "),a("el-row",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,total:t.linmitTotal,layout:"total, prev, pager, next, jumper",background:""},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChangePage}})],1)],1)},[],!1,null,null,null));X.options.__file="customer.vue";var Z=X.exports,tt={data:function(){return{delShowQ:!1,addShowQ:!1,editShowQ:!1,shengheShow:!1,pageSize:5,linmitTotal:20,currentPage:4,loading:!0,dialogVisible:!1,dialogVisibleS:!1,dialogVisibleDel:!1,dialogTitle:"添加",delStatus:1,editStatus:1,options1:[],options2:[{label:"固体",value:"固体"},{label:"液体",value:"液体"},{label:"粉体",value:"粉体"}],tableData:[],selectData:[],oneData:{name:""},rules:{name:[{required:!0,message:"请输入材质名称",trigger:"blur"}],moldid:[{required:!0,message:"请选择工艺模型",trigger:"change"}],shape:[{required:!0,message:"请选择材质形态",trigger:"change"}],price:[{required:!0,message:"请输入价格",trigger:"blur"}],density:[{required:!0,message:"请选择密度",trigger:"blur"}]}}},methods:{init:function(t){var e=this,a={page:t};Object(C.w)(a).then(function(a){if(e.tableData=[],e.pageSize=10,e.currentPage=t,e.linmitTotal=a.data.total,e.tableData=a.data.data,0==e.options1.length){var i=[];Object(C.f)().then(function(t){i=t.data;var a=!0,n=!1,o=void 0;try{for(var s,r=l()(e.tableData);!(a=(s=r.next()).done);a=!0){var c=s.value,d=!0,u=!1,p=void 0;try{for(var h,v=l()(i);!(d=(h=v.next()).done);d=!0){var m=h.value;c.mold_id==m.id&&e.$set(c,"mold_id",m.name)}}catch(t){u=!0,p=t}finally{try{!d&&v.return&&v.return()}finally{if(u)throw p}}}}catch(t){n=!0,o=t}finally{try{!a&&r.return&&r.return()}finally{if(n)throw o}}}).catch(function(t){console.log("获取数据失败,成型工艺")})}else{var n=!0,o=!1,s=void 0;try{for(var r,c=l()(e.tableData);!(n=(r=c.next()).done);n=!0){var d=r.value,u=!0,p=!1,h=void 0;try{for(var v,m=l()(e.options1);!(u=(v=m.next()).done);u=!0){var f=v.value;d.mold_id==f.value&&e.$set(d,"mold_id",f.label)}}catch(t){p=!0,h=t}finally{try{!u&&m.return&&m.return()}finally{if(p)throw h}}}}catch(t){o=!0,s=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw s}}}e.loading=!1}).catch(function(t){console.log(t)})},add:function(){this.dialogTitle="添加",this.dialogVisible=!0,this.oneData={name:""},this.editStatus=1,this.shengheShow&&(this.oneData.status="通过")},look:function(){this.dialogVisibleS=!0},del:function(){this.dialogVisibleDel=!0,this.delStatus=2},onsubmint:function(t){var e=this;this.$refs[t].validate(function(t){var a=r()({},e.oneData);if("通过"==a.status?a.status=1:a.status=0,!t)return console.log("error submit!!"),!1;if(1==e.editStatus)Object(C.u)(a).then(function(t){e.dialogVisible=!1,e.init(1),e.$message({message:"添加成功",type:"success"})}).catch(function(t){e.$message({message:t.response.data.errors,type:"warning"}),console.log(t)});else{var i=a.id;delete a.mold_id,a.submit="1",Object(C.v)(i,a).then(function(t){e.dialogVisible=!1,e.init(e.currentPage),e.$message({message:"修改成功",type:"success"})}).catch(function(t){e.$message({message:t.response.data.errors,type:"warning"}),console.log(t)})}})},handleSelectionChange:function(t){this.selectData=t},statesure:function(){this.dialogVisibleS=!1},delsure:function(){var t=this;if(1==this.delStatus){var e={type:"material"};e.did=this.oneData.id,Object(C.n)(e).then(function(e){t.init(1),t.dialogVisibleDel=!1,t.$message({message:"删除成功",type:"success"})}).catch(function(e){console.log("删除失败"),t.$message({message:error.response.data.errors,type:"warning"})})}},handleClose:function(){this.dialogVisible=!1,this.dialogVisibleS=!1,this.dialogVisibleDel=!1,this.$refs.ruleForm.resetFields()},handleEdit:function(t,e){this.dialogTitle="修改",this.dialogVisible=!0,this.oneData=r()({},e);e.mold_id;var a=!0,i=!1,n=void 0;try{for(var o,s=l()(this.options1);!(a=(o=s.next()).done);a=!0){var c=o.value;e.mold_id==c.label&&this.$set(this.oneData,"moldid",c.value)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}delete this.oneData.mold_id,"1"==this.oneData.status?this.oneData.status="通过":this.oneData.status="未通过",this.editStatus=2},handleDelete:function(t,e){this.dialogVisibleDel=!0,this.delStatus=1,this.oneData=e},technologyList:function(){var t=this;Object(C.f)().then(function(e){t.options1=[];var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.data);!(a=(o=s.next()).done);a=!0){var r=o.value,c={};c.value=r.id,c.label=r.name,t.options1.push(c)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}).catch(function(t){console.log("获取数据失败,成型工艺")})},handleCurrentChangePage:function(t){this.init(t)}},created:function(){this.technologyList(),this.init(1);var t=f.a.get("actionArr");t=JSON.parse(t);var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;"check"==s&&(this.shengheShow=!0),"delete"==s&&(this.delShowQ=!0),"add"==s&&(this.addShowQ=!0),"edit"==s&&(this.editShowQ=!0)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}},mounted:function(){}},et=(a("fY5j"),Object(g.a)(tt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"produceOne"},[a("el-dialog",{attrs:{title:"删除",visible:t.dialogVisibleDel,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleDel=e}}},[a("span",[t._v("你确定要删除")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleDel=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.delsure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"审核",visible:t.dialogVisibleS,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleS=e}}},[a("span",[t._v("你确定要审核通过")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleS=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.statesure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"450px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.oneData,"label-width":"150px",rules:t.rules}},[a("el-form-item",{attrs:{label:"成型材质名称",prop:"name"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"成型材质名称"},model:{value:t.oneData.name,callback:function(e){t.$set(t.oneData,"name",e)},expression:"oneData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"成型材质工艺",prop:"moldid"}},[a("el-select",{staticClass:"input-width",attrs:{placeholder:"请选择"},model:{value:t.oneData.moldid,callback:function(e){t.$set(t.oneData,"moldid",e)},expression:"oneData.moldid"}},t._l(t.options1,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"成型材质形态",prop:"shape"}},[a("el-select",{staticClass:"input-width",attrs:{placeholder:"请选择"},model:{value:t.oneData.shape,callback:function(e){t.$set(t.oneData,"shape",e)},expression:"oneData.shape"}},t._l(t.options2,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"材质价格(元)",prop:"price"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,placeholder:"材质价格",precision:2},model:{value:t.oneData.price,callback:function(e){t.$set(t.oneData,"price",e)},expression:"oneData.price"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"材质密度(g/cm³)",prop:"density"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,placeholder:"材质密度",precision:2},model:{value:t.oneData.density,callback:function(e){t.$set(t.oneData,"density",e)},expression:"oneData.density"}})],1),t._v(" "),t.shengheShow?a("el-form-item",{attrs:{label:"审核"}},[a("el-radio-group",{model:{value:t.oneData.status,callback:function(e){t.$set(t.oneData,"status",e)},expression:"oneData.status"}},[a("el-radio",{attrs:{label:"通过"}}),t._v(" "),a("el-radio",{attrs:{label:"未通过"}})],1)],1):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onsubmint("ruleForm")}}},[t._v("确 定")])],1)],1),t._v(" "),a("div",{staticClass:"pl"},[t.addShowQ?a("el-row",{staticClass:"mb"},[a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("添加")]),t._v("  \n\t ")],1):t._e(),t._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","tooltip-effect":"dark","element-loading-text":"加载中...."},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"成型材质名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mold_id",label:"成型材质工艺",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"shape",label:"成型材质形态",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"density",label:"密度(g/cm³)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t\t"+t._s(Number(Number(e.row.density).toFixed(2)))+"\n\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"价格(元)",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t           "+t._s(Number(Number(e.row.price).toFixed(2)))+"\n\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"审核",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t \t\t"+t._s(1==e.row.status?"通过":"未通过")+"\n\t\t\t\t \t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[0!=e.row.tenat_id?a("span",[t.editShowQ?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("修改")]):t._e(),t._v(" "),t.delShowQ?a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"mini"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")]):t._e()],1):t._e()]}}])})],1)],1)],1),t._v(" "),a("el-row",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,total:t.linmitTotal,layout:"total, prev, pager, next, jumper",background:""},on:{"current-change":t.handleCurrentChangePage}})],1)],1)},[],!1,null,"1cf9d78a",null));et.options.__file="produceOne.vue";var at=et.exports,it={data:function(){return{delShowQ:!1,addShowQ:!1,editShowQ:!1,shengheShow:!1,pageSize:5,linmitTotal:20,currentPage:4,loading:!0,dialogVisible:!1,dialogVisibleS:!1,dialogVisibleDel:!1,dialogTitle:"添加",tableData:[],selectData:[],editStatus:1,delStatus:1,oneData:{},rules:{name:[{required:!0,message:"请输入工艺名称",trigger:"blur"}]}}},methods:{init:function(t){var e=this,a={page:t};Object(C.z)(a).then(function(a){e.tableData=[],e.pageSize=10,e.currentPage=t,e.linmitTotal=a.data.total,e.tableData=a.data.data,e.loading=!1}).catch(function(t){console.log(t)})},add:function(){this.dialogTitle="添加",this.dialogVisible=!0,this.oneData={name:""},this.editStatus=1,this.shengheShow&&(this.oneData.status="通过")},look:function(){this.dialogVisibleS=!0},del:function(){this.dialogVisibleDel=!0,this.delStatus=2},onsubmint:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;var a=r()({},e.oneData);if("通过"==a.status?a.status=1:a.status=0,1==e.editStatus)Object(C.x)(a).then(function(t){e.dialogVisible=!1,e.init(1),e.$message({message:"添加成功",type:"success"})}).catch(function(t){e.$message({message:t.response.data.errors,type:"warning"}),console.log(t)});else{var i=a.id;a.submit=1,Object(C.y)(i,a).then(function(t){e.dialogVisible=!1,e.init(e.currentPage),e.$message({message:"修改成功",type:"success"})}).catch(function(t){e.$message({message:t.response.data.errors,type:"warning"}),console.log(t)})}})},handleSelectionChange:function(t){this.selectData=t},statesure:function(){this.dialogVisibleS=!1},delsure:function(){var t=this;if(1==this.delStatus){var e={type:"molding"};e.did=this.oneData.id,Object(C.n)(e).then(function(e){t.init(1),t.dialogVisibleDel=!1,t.$message({message:"删除成功",type:"success"})}).catch(function(e){console.log("删除失败"),t.$message({message:error.response.data.errors,type:"warning"})})}},handleClose:function(){this.dialogVisible=!1,this.dialogVisibleS=!1,this.dialogVisibleDel=!1,this.$refs.ruleForm.resetFields()},handleEdit:function(t,e){this.dialogTitle="修改",this.dialogVisible=!0,this.oneData=r()({},e),this.editStatus=2,"1"==this.oneData.status?this.oneData.status="通过":this.oneData.status="未通过"},handleDelete:function(t,e){this.dialogVisibleDel=!0,this.oneData=r()({},e),this.delStatus=1},handleCurrentChangePage:function(t){this.init(t)}},created:function(){var t=f.a.get("actionArr");t=JSON.parse(t);var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;"check"==s&&(this.shengheShow=!0),"delete"==s&&(this.delShowQ=!0),"add"==s&&(this.addShowQ=!0),"edit"==s&&(this.editShowQ=!0)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}this.init(1)}},nt=(a("4+cv"),Object(g.a)(it,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"删除",visible:t.dialogVisibleDel,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleDel=e}}},[a("span",[t._v("你确定要删除")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleDel=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.delsure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"审核",visible:t.dialogVisibleS,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleS=e}}},[a("span",[t._v("你确定要审核通过")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleS=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.statesure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"450px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.oneData,"label-width":"150px",rules:t.rules}},[a("el-form-item",{attrs:{label:"工艺名称",prop:"name"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"工艺名称"},model:{value:t.oneData.name,callback:function(e){t.$set(t.oneData,"name",e)},expression:"oneData.name"}})],1),t._v(" "),t.shengheShow?a("el-form-item",{attrs:{label:"审核"}},[a("el-radio-group",{model:{value:t.oneData.status,callback:function(e){t.$set(t.oneData,"status",e)},expression:"oneData.status"}},[a("el-radio",{attrs:{label:"通过"}}),t._v(" "),a("el-radio",{attrs:{label:"未通过"}})],1)],1):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onsubmint("ruleForm")}}},[t._v("确 定")])],1)],1),t._v(" "),a("div",{staticClass:"pl"},[t.addShowQ?a("el-row",{staticClass:"mb"},[a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("添加")]),t._v("  \n\t")],1):t._e(),t._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","tooltip-effect":"dark","element-loading-text":"加载中...."},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"工艺名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"审核",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t    \t\t"+t._s(1==e.row.status?"通过":"未通过")+"\n\t\t    \t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0!=e.row.tenat_id?a("span",[t.editShowQ?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("修改")]):t._e(),t._v(" "),t.delShowQ?a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"mini"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")]):t._e()],1):t._e()]}}])})],1)],1)],1),t._v(" "),a("el-row",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,total:t.linmitTotal,layout:"total, prev, pager, next, jumper",background:""},on:{"current-change":t.handleCurrentChangePage}})],1)],1)},[],!1,null,"768bd911",null));nt.options.__file="produceTwo.vue";var ot=nt.exports,lt={data:function(){return{delShowQ:!1,addShowQ:!1,editShowQ:!1,shengheShow:!1,pageSize:5,linmitTotal:20,currentPage:4,loading:!0,dialogVisible:!1,dialogVisibleS:!1,dialogVisibleDel:!1,dialogTitle:"添加",tableData:[],editStatus:1,delStatus:1,selectData:[],oneData:{},rules:{name:[{required:!0,message:"请输入表面处理名称",trigger:"blur"}]}}},methods:{init:function(t){var e=this,a={page:t};Object(C.t)(a).then(function(a){e.tableData=[],e.pageSize=10,e.currentPage=t,e.linmitTotal=a.data.total,e.tableData=a.data.data,e.loading=!1}).catch(function(t){console.log(t)})},add:function(){this.dialogTitle="添加",this.dialogVisible=!0,this.oneData={},this.editStatus=1,this.shengheShow&&(this.oneData.status="通过")},look:function(){this.dialogVisibleS=!0},del:function(){this.dialogVisibleDel=!0,this.delStatus=2},onsubmint:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;var a=r()({},e.oneData);if("通过"==a.status?a.status=1:a.status=0,1==e.editStatus)Object(C.r)(a).then(function(t){e.dialogVisible=!1,e.init(1),e.$message({message:"添加成功",type:"success"})}).catch(function(t){e.$message({message:t.response.data.errors,type:"warning"}),console.log(t)});else{var i=a.id;a.submit=1,Object(C.s)(i,a).then(function(t){e.dialogVisible=!1,e.init(e.currentPage),e.$message({message:"修改成功",type:"success"})}).catch(function(t){e.$message({message:t.response.data.errors,type:"warning"}),console.log(t)})}}),this.dialogVisible=!1},handleSelectionChange:function(t){this.selectData=t},statesure:function(){this.dialogVisibleS=!1},delsure:function(){var t=this;if(1==this.delStatus){var e={type:"surface"};e.did=this.oneData.id,Object(C.n)(e).then(function(e){t.init(1),t.dialogVisibleDel=!1,t.$message({message:"删除成功",type:"success"})}).catch(function(e){console.log("删除失败"),t.$message({message:error.response.data.errors,type:"warning"})})}},handleClose:function(){this.dialogVisible=!1,this.dialogVisibleS=!1,this.dialogVisibleDel=!1,this.$refs.ruleForm.resetFields()},handleEdit:function(t,e){this.dialogTitle="修改",this.dialogVisible=!0,this.oneData=r()({},e),this.editStatus=2,this.oneData.status?this.oneData.status="通过":this.oneData.status="未通过"},handleDelete:function(t,e){this.dialogVisibleDel=!0,this.oneData=r()({},e),this.delStatus=1},handleCurrentChangePage:function(t){this.init(t)}},created:function(){var t=f.a.get("actionArr");t=JSON.parse(t);var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;"check"==s&&(this.shengheShow=!0),"delete"==s&&(this.delShowQ=!0),"add"==s&&(this.addShowQ=!0),"edit"==s&&(this.editShowQ=!0)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}this.init(1)}},st=(a("/bHb"),Object(g.a)(lt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{title:"删除",visible:t.dialogVisibleDel,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleDel=e}}},[a("span",[t._v("你确定要删除")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleDel=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.delsure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"审核",visible:t.dialogVisibleS,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleS=e}}},[a("span",[t._v("你确定要审核通过")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleS=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.statesure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"450px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.oneData,"label-width":"150px",rules:t.rules}},[a("el-form-item",{attrs:{label:"表面处理名称",prop:"name"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"表面处理名称"},model:{value:t.oneData.name,callback:function(e){t.$set(t.oneData,"name",e)},expression:"oneData.name"}})],1),t._v(" "),t.shengheShow?a("el-form-item",{attrs:{label:"审核"}},[a("el-radio-group",{model:{value:t.oneData.status,callback:function(e){t.$set(t.oneData,"status",e)},expression:"oneData.status"}},[a("el-radio",{attrs:{label:"通过"}}),t._v(" "),a("el-radio",{attrs:{label:"未通过"}})],1)],1):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onsubmint("ruleForm")}}},[t._v("确 定")])],1)],1),t._v(" "),a("div",{staticClass:"pl"},[t.addShowQ?a("el-row",{staticClass:"mb"},[a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("添加")]),t._v("  \n\t ")],1):t._e(),t._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","tooltip-effect":"dark","element-loading-text":"加载中...."},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"表面处理名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"审核",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t    \t\t"+t._s(1==e.row.status?"通过":"未通过")+"\n\t\t    \t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0!=e.row.tenat_id?a("span",[t.editShowQ?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("修改")]):t._e(),t._v(" "),t.delShowQ?a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"mini"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")]):t._e()],1):t._e()]}}])})],1)],1)],1),t._v(" "),a("el-row",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,total:t.linmitTotal,layout:"total, prev, pager, next, jumper",background:""},on:{"current-change":t.handleCurrentChangePage}})],1)],1)},[],!1,null,"1b1861e3",null));st.options.__file="produceThree.vue";var rt=st.exports,ct={data:function(){return{delShowQ:!1,addShowQ:!1,editShowQ:!1,shengheShow:!1,pageSize:5,linmitTotal:20,currentPage:4,loading:!0,dialogVisible:!1,dialogVisibleS:!1,dialogVisibleDel:!1,dialogTitle:"添加",delStatus:1,editStatus:1,options1:[],tableData:[],selectData:[],oneData:{name:""},rules:{mname:[{required:!0,message:"请输入设备名称",trigger:"blur"}],mold_id:[{required:!0,message:"请选择工艺模型",trigger:"change"}],marc:[{required:!0,message:"请输入成型范围",trigger:"blur"}],mmaker:[{required:!0,message:"请输入制造商",trigger:"blur"}]}}},methods:{init:function(t){var e=this,a={page:t};Object(C.q)(a).then(function(a){e.tableData=[],e.pageSize=10,e.currentPage=t,e.linmitTotal=a.data.total,e.tableData=a.data.data,e.loading=!1}).catch(function(t){reject(t)})},add:function(){this.dialogTitle="添加",this.dialogVisible=!0,this.oneData={name:""},this.editStatus=1,this.shengheShow&&(this.oneData.status="通过")},look:function(){this.dialogVisibleS=!0},del:function(){this.dialogVisibleDel=!0,this.delStatus=2},onsubmint:function(t){var e=this;this.$refs[t].validate(function(t){var a=r()({},e.oneData);if("通过"==a.status?a.status=1:a.status=0,!t)return console.log("error submit!!"),!1;if(1==e.editStatus)Object(C.o)(a).then(function(t){e.dialogVisible=!1,e.init(1),e.$message({message:"添加成功",type:"success"})}).catch(function(t){e.$message({message:t.response.data.errors,type:"warning"}),console.log(t)});else{var i=a.id;a.mold_id,a.submit="1",Object(C.p)(i,a).then(function(t){e.dialogVisible=!1,e.init(e.currentPage),e.$message({message:"修改成功",type:"success"})}).catch(function(t){e.$message({message:t.response.data.errors,type:"warning"}),console.log(t)})}})},handleSelectionChange:function(t){this.selectData=t},statesure:function(){this.dialogVisibleS=!1},delsure:function(){var t=this;if(1==this.delStatus){var e={type:"equipment"};e.did=this.oneData.id,Object(C.n)(e).then(function(e){t.init(1),t.dialogVisibleDel=!1,t.$message({message:"删除成功",type:"success"})}).catch(function(e){console.log("删除失败"),t.$message({message:error.response.data.errors,type:"warning"})})}},handleClose:function(){this.dialogVisible=!1,this.dialogVisibleS=!1,this.dialogVisibleDel=!1,this.$refs.ruleForm.resetFields()},handleEdit:function(t,e){this.dialogTitle="修改",this.dialogVisible=!0,this.oneData=r()({},e),this.oneData.moldid="1","1"==this.oneData.status?this.oneData.status="通过":this.oneData.status="未通过",this.editStatus=2},handleDelete:function(t,e){this.dialogVisibleDel=!0,this.delStatus=1,this.oneData=e},selectChange:function(t,e){var a=[],i=!0,n=!1,o=void 0;try{for(var s,r=l()(t);!(i=(s=r.next()).done);i=!0){var c=s.value,d={};d.value=c.id,d.label=c[e],a.push(d)}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}return a},handleCurrentChangePage:function(t){this.init(t)}},created:function(){var t=this,e=f.a.get("actionArr");e=JSON.parse(e);var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e);!(a=(o=s.next()).done);a=!0){var r=o.value;"check"==r&&(this.shengheShow=!0),"delete"==r&&(this.delShowQ=!0),"add"==r&&(this.addShowQ=!0),"edit"==r&&(this.editShowQ=!0)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}this.init(1),Object(C.f)().then(function(e){var a=e.data;t.options1=t.selectChange(a,"name")}).catch(function(t){console.log("工艺列表获取失败")})}},dt=(a("LJKu"),Object(g.a)(ct,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"produceOne"},[a("el-dialog",{attrs:{title:"删除",visible:t.dialogVisibleDel,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleDel=e}}},[a("span",[t._v("你确定要删除")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleDel=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.delsure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"审核",visible:t.dialogVisibleS,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleS=e}}},[a("span",[t._v("你确定要审核通过")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleS=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.statesure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"450px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.oneData,"label-width":"150px",rules:t.rules}},[a("el-form-item",{attrs:{label:"成型设备名称",prop:"mname"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"成型设备名称"},model:{value:t.oneData.mname,callback:function(e){t.$set(t.oneData,"mname",e)},expression:"oneData.mname"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"可用工艺",prop:"mold_id"}},[a("el-select",{staticClass:"input-width",attrs:{placeholder:"请选择"},model:{value:t.oneData.mold_id,callback:function(e){t.$set(t.oneData,"mold_id",e)},expression:"oneData.mold_id"}},t._l(t.options1,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"成型范围",prop:"marc"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"成型范围"},model:{value:t.oneData.marc,callback:function(e){t.$set(t.oneData,"marc",e)},expression:"oneData.marc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"制作商名称",prop:"mmaker"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"制作商名称"},model:{value:t.oneData.mmaker,callback:function(e){t.$set(t.oneData,"mmaker",e)},expression:"oneData.mmaker"}})],1),t._v(" "),t.shengheShow?a("el-form-item",{attrs:{label:"审核"}},[a("el-radio-group",{model:{value:t.oneData.status,callback:function(e){t.$set(t.oneData,"status",e)},expression:"oneData.status"}},[a("el-radio",{attrs:{label:"通过"}}),t._v(" "),a("el-radio",{attrs:{label:"未通过"}})],1)],1):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClose}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onsubmint("ruleForm")}}},[t._v("确 定")])],1)],1),t._v(" "),a("div",{staticClass:"pl"},[t.addShowQ?a("el-row",{staticClass:"mb"},[a("el-button",{attrs:{type:"primary"},on:{click:t.add}},[t._v("添加")]),t._v("  \n\t  ")],1):t._e(),t._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","tooltip-effect":"dark","element-loading-text":"加载中...."},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mname",label:"设备名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"marc",label:"成型范围",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mmaker",label:"制造商名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"审核",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t \t\t"+t._s(1==e.row.status?"通过":"未通过")+"\n\t\t\t\t \t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[0!=e.row.tenat_id?a("span",[t.editShowQ?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v("修改")]):t._e(),t._v(" "),t.delShowQ?a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"mini"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除")]):t._e()],1):t._e()]}}])})],1)],1)],1),t._v(" "),a("el-row",{staticStyle:{display:"flex","justify-content":"flex-end"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,total:t.linmitTotal,layout:"total, prev, pager, next, jumper",background:""},on:{"current-change":t.handleCurrentChangePage}})],1)],1)},[],!1,null,"faf10078",null));dt.options.__file="produceFour.vue";var ut=dt.exports,pt={data:function(){return{addShowQ:!1,editShowQ:!1,delShowQ:!1,showDel:!1,allPage:1,currentPage:1,inputPage:"",plTotalPage:"5",perPage:5,tableData:[],technologyList:[],options:[{label:"固体",value:"固体"},{label:"液体",value:"液体"},{label:"粉体",value:"粉体"}],show:!1,showTitle:"添加生产材质",oneData:{},labelPosition:"right",shengheShow:!1,rules:{name:[{required:!0,message:"请输入材质名称",trigger:"blur"}],moldid:[{required:!0,message:"请选择工艺模型",trigger:"change"}],shape:[{required:!0,message:"请选择材质形态",trigger:"change"}],price:[{required:!0,message:"请输入价格",trigger:"blur"},{validator:P.d,trigger:"blur"}],density:[{required:!0,message:"请输入密度",trigger:"blur"},{validator:P.d,trigger:"blur"}]}}},methods:{tofixeds:function(t,e,a){var i=Number(Number(t).toFixed(2));this.$set(e,a,i)},init:function(t){var e=this,a={page:t};this.tableData=[],Object(C.w)(a).then(function(t){var a=!0,i=!1,n=void 0;try{for(var o,s=l()(t.data.data);!(a=(o=s.next()).done);a=!0){var r;r=o.value;var c=e.teName(r.mold_id);e.$set(r,"mold_name",c),e.tableData.push(r)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}e.perPage=Number(t.data.per_page),e.allPage=t.data.last_page,e.plTotalPage=t.data.last_page+"页",e.currentPage=t.data.current_page}).catch(function(t){console.log("生产材质获取失败",t)})},initTechnology:function(){var t=this;this.technologyList=[],Object(C.f)().then(function(e){var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.data);!(a=(o=s.next()).done);a=!0){var r=o.value,c={};c.label=r.name,c.value=r.id,t.technologyList.push(c)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}t.init(1)}).catch(function(t){console.log("生产工艺",t)})},handleDel:function(t){this.oneData=t,this.showDel=!0},beforeCloseDel:function(t,e){var a=this;if("confirm"===t){var i={type:"material"};i.did=this.oneData.id,Object(C.n)(i).then(function(t){a.init(1),a.showDel=!1,a.$toast.success({duration:1500,message:"删除成功"}),e()}).catch(function(t){console.log("删除失败"),e(),a.$toast({message:error.response.data.errors,type:"warning"})})}else e()},edit:function(t,e){"add"==t?(this.showTitle="添加生产材质",this.oneData={name:"",moldid:"",shape:""},this.shengheShow&&(this.oneData.status="通过")):(this.oneData=r()({},e),1==e.status?this.oneData.status="通过":this.oneData.status="未通过",this.$set(this.oneData,"moldid",e.mold_id),this.showTitle="修改生产材质"),this.show=!0},onsubmint:function(t){var e=this;this.$refs[t].validate(function(t){var a=r()({},e.oneData);if("通过"==a.status?a.status=1:a.status=0,!t)return console.log("error submit!!"),!1;if("添加生产材质"==e.showTitle)Object(C.u)(a).then(function(t){e.show=!1,e.init(1),e.$toast.success({duration:2e3,message:"添加成功"})}).catch(function(t){e.$toast({message:t.response.data.errors}),console.log(t)});else{var i=a.id;delete a.mold_id,a.submit="1",Object(C.v)(i,a).then(function(t){e.show=!1,e.init(e.currentPage),e.$toast.success({duration:2e3,message:"修改成功"})}).catch(function(t){e.$toast({message:t.response.data.errors}),console.log(t)})}})},teName:function(t){var e="",a=!0,i=!1,n=void 0;try{for(var o,s=l()(this.technologyList);!(a=(o=s.next()).done);a=!0){var r=o.value;t==r.value&&(e=r.label)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}return e},handleCurrentPage:function(t){this.init(t)},InputCurrentPage:function(t){this.currentPage=Number(t),this.init(this.currentPage)}},created:function(){this.initTechnology();var t=f.a.get("actionArr");t=JSON.parse(t);var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;"check"==s&&(this.shengheShow=!0),"add"==s&&(this.addShowQ=!0),"edit"==s&&(this.editShowQ=!0),"delete"==s&&(this.delShowQ=!0)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}},mounted:function(){}},ht=(a("ZtWk"),Object(g.a)(pt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"produceOneM"},[t.addShowQ?a("div",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.edit("add")}}},[t._v("添加")])],1):t._e(),t._v(" "),a("div",{staticClass:"list"},[t._l(t.tableData,function(e,i){return a("van-row",{key:e.index,staticStyle:{"margin-top":"10px",padding:"5px","border-bottom":"1px solid #e5e5e5"}},[a("van-col",{attrs:{span:"3"}},[t._v("\n\t\t\t\t\t  \n\t\t\t\t")]),t._v(" "),a("van-col",{staticClass:"list_mian_p",attrs:{span:"21"}},[a("p",[t._v("序号"+t._s(i+1)+"  "+t._s(e.name)+" , "+t._s(e.mold_name)+" , "+t._s(e.shape))]),t._v(" "),a("p",[t._v("密度(g/cm³) : "+t._s(Number(e.density).toFixed(2))+"  , 价格 : "+t._s(Number(Number(e.price).toFixed(2)))+" ")]),t._v(" "),a("p",[t._v("审核 : "+t._s(1==e.status?"通过":"未通过"))]),t._v(" "),0!=e.tenat_id?a("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"100%"}},[t.editShowQ?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.edit("edit",e)}}},[t._v("修改")]):t._e(),t._v(" "),t.delShowQ?a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"small"},on:{click:function(a){t.handleDel(e)}}},[t._v("删除")]):t._e()],1):t._e()])],1)}),t._v(" "),a("div",{staticStyle:{height:"15px"}}),t._v(" "),a("van-row",{staticStyle:{display:"flex","align-items":"center"}},[a("van-col",{staticStyle:{"padding-left":"5px"},attrs:{span:"19"}},[a("van-pagination",{attrs:{"page-count":t.allPage,"show-page-size":3,"items-per-page":t.perPage,"force-ellipses":""},on:{change:t.handleCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("van-col",{staticStyle:{"padding-left":"5px","padding-right":"5px"},attrs:{span:"5"}},[a("el-input",{attrs:{placeholder:t.plTotalPage,onkeyup:"this.value=this.value.replace(/[^0-9-]+/,'')"},on:{change:t.InputCurrentPage},model:{value:t.inputPage,callback:function(e){t.inputPage=e},expression:"inputPage"}})],1)],1),t._v(" "),a("div",{staticStyle:{height:"45px"}})],2),t._v(" "),a("van-actionsheet",{attrs:{title:t.showTitle},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.oneData,rules:t.rules,"label-position":t.labelPosition,"label-width":"125px"}},[a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-form-item",{attrs:{label:"成型材质名称",prop:"name"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"成型材质名称"},model:{value:t.oneData.name,callback:function(e){t.$set(t.oneData,"name",e)},expression:"oneData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"成型材质工艺",prop:"moldid"}},[a("el-select",{staticClass:"input-width",attrs:{placeholder:"请选择"},model:{value:t.oneData.moldid,callback:function(e){t.$set(t.oneData,"moldid",e)},expression:"oneData.moldid"}},t._l(t.technologyList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"成型材质形态",prop:"shape"}},[a("el-select",{staticClass:"input-width",attrs:{placeholder:"请选择"},model:{value:t.oneData.shape,callback:function(e){t.$set(t.oneData,"shape",e)},expression:"oneData.shape"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"材质价格",prop:"price"}},[a("el-input",{staticClass:"input-width",attrs:{type:"number",placeholder:"材质价格"},on:{change:function(e){t.tofixeds(e,t.oneData,"price")}},model:{value:t.oneData.price,callback:function(e){t.$set(t.oneData,"price",e)},expression:"oneData.price"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"材质密度(g/cm³)",prop:"density"}},[a("el-input",{staticClass:"input-width",attrs:{type:"number",placeholder:"材质密度"},on:{change:function(e){t.tofixeds(e,t.oneData,"density")}},model:{value:t.oneData.density,callback:function(e){t.$set(t.oneData,"density",e)},expression:"oneData.density"}})],1),t._v(" "),t.shengheShow?a("el-form-item",{staticStyle:{"margin-left":"-60px"},attrs:{label:"审核"}},[a("el-radio-group",{model:{value:t.oneData.status,callback:function(e){t.$set(t.oneData,"status",e)},expression:"oneData.status"}},[a("el-radio",{attrs:{label:"通过"}}),t._v(" "),a("el-radio",{attrs:{label:"未通过"}})],1)],1):t._e()],1),t._v(" "),a("div",{staticClass:"sure"},[a("el-button",{on:{click:function(e){t.show=!1}}},[t._v("取消")]),t._v("  "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onsubmint("ruleForm")}}},[t._v("确定")])],1)])],1),t._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeCloseDel,title:"提示"},model:{value:t.showDel,callback:function(e){t.showDel=e},expression:"showDel"}},[a("div",{staticStyle:{"text-align":"center","font-size":"0.9rem",margin:"0.8rem 0"}},[t._v(" 你确定要删除")])])],1)},[],!1,null,null,null));ht.options.__file="produceOne.vue";var vt=ht.exports,mt={data:function(){return{addShowQ:!1,editShowQ:!1,delShowQ:!1,showDel:!1,allPage:1,currentPage:1,inputPage:"",plTotalPage:"5",perPage:5,tableData:[],showTitle:"添加成型工艺",oneData:{},show:!1,shengheShow:!1,rules:{name:[{required:!0,message:"请输入工艺名称",trigger:"blur"}]}}},methods:{init:function(t){var e=this,a={page:t};this.tableData=[],Object(C.z)(a).then(function(t){e.tableData=t.data.data,e.allPage=t.data.last_page,e.plTotalPage=t.data.last_page+"页",e.currentPage=t.data.current_page,e.perPage=Number(t.data.per_page)}).catch(function(t){})},edit:function(t,e){"add"==t?(this.showTitle="添加成型工艺",this.oneData=r()({},{name:""}),this.shengheShow&&(this.oneData.status="通过"),this.show=!0):(this.showTitle="修改成型工艺",this.oneData=r()({},e),1==e.status?this.oneData.status="通过":this.oneData.status="未通过"),this.show=!0},onsubmint:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;var a=r()({},e.oneData);if("通过"==a.status?a.status=1:a.status=0,"添加成型工艺"==e.showTitle)Object(C.x)(a).then(function(t){e.show=!1,e.init(1),e.$toast.success({duration:2e3,message:"添加成功"})}).catch(function(t){e.$toast({message:t.response.data.errors}),console.log(t)});else{var i=a.id;a.submit=1,Object(C.y)(i,a).then(function(t){e.show=!1,e.init(e.currentPage),e.$toast.success({duration:2e3,message:"修改成功"})}).catch(function(t){e.$toast({message:t.response.data.errors}),console.log(t)})}})},handleCurrentPage:function(t){this.init(t)},InputCurrentPage:function(t){this.currentPage=Number(t),this.init(this.currentPage)},handleDel:function(t){this.oneData=t,this.showDel=!0},beforeCloseDel:function(t,e){var a=this;if("confirm"===t){var i={type:"molding"};i.did=this.oneData.id,Object(C.n)(i).then(function(t){a.init(1),a.showDel=!1,a.$toast.success({duration:1500,message:"删除成功"}),e()}).catch(function(t){console.log("删除失败"),e(),a.$toast({message:error.response.data.errors,type:"warning"})})}else e()}},created:function(){this.init(1);var t=f.a.get("actionArr");t=JSON.parse(t);var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;"check"==s&&(this.shengheShow=!0),"add"==s&&(this.addShowQ=!0),"edit"==s&&(this.editShowQ=!0),"delete"==s&&(this.delShowQ=!0)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}},mounted:function(){}},ft=(a("tHKO"),Object(g.a)(mt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"produceTwoM"},[t.addShowQ?a("div",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.edit("add")}}},[t._v("添加")])],1):t._e(),t._v(" "),a("div",{staticClass:"list"},[t._l(t.tableData,function(e,i){return a("van-row",{key:e.index,staticStyle:{"margin-top":"10px",padding:"5px","border-bottom":"1px solid #e5e5e5"}},[a("van-col",{attrs:{span:"3"}},[t._v("\n\t\t\t\t  \n\t\t\t")]),t._v(" "),a("van-col",{staticClass:"list_mian_p",attrs:{span:"21"}},[a("p",[t._v("序号"+t._s(i+1)+"  工艺名称 : "+t._s(e.name))]),t._v(" "),a("p",[t._v("审核 : "+t._s(1==e.status?"通过":"未通过"))]),t._v(" "),0!=e.tenat_id?a("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"100%"}},[t.editShowQ?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.edit("edit",e)}}},[t._v("修改")]):t._e(),t._v(" "),t.delShowQ?a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"small"},on:{click:function(a){t.handleDel(e)}}},[t._v("删除")]):t._e()],1):t._e()])],1)}),t._v(" "),a("div",{staticStyle:{height:"15px"}}),t._v(" "),a("van-row",{staticStyle:{display:"flex","align-items":"center"}},[a("van-col",{staticStyle:{"padding-left":"5px"},attrs:{span:"19"}},[a("van-pagination",{attrs:{"page-count":t.allPage,"show-page-size":3,"items-per-page":t.perPage,"force-ellipses":""},on:{change:t.handleCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("van-col",{staticStyle:{"padding-left":"5px","padding-right":"5px"},attrs:{span:"5"}},[a("el-input",{attrs:{placeholder:t.plTotalPage,onkeyup:"this.value=this.value.replace(/[^0-9-]+/,'')"},on:{change:t.InputCurrentPage},model:{value:t.inputPage,callback:function(e){t.inputPage=e},expression:"inputPage"}})],1)],1),t._v(" "),a("div",{staticStyle:{height:"45px"}})],2),t._v(" "),a("van-actionsheet",{attrs:{title:t.showTitle},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.oneData,rules:t.rules,"label-width":"110px"}},[a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-form-item",{attrs:{label:"工艺名称",prop:"name"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"成型工艺名称"},model:{value:t.oneData.name,callback:function(e){t.$set(t.oneData,"name",e)},expression:"oneData.name"}})],1),t._v(" "),t.shengheShow?a("el-form-item",{staticStyle:{"margin-left":"-60px"},attrs:{label:"审核"}},[a("el-radio-group",{model:{value:t.oneData.status,callback:function(e){t.$set(t.oneData,"status",e)},expression:"oneData.status"}},[a("el-radio",{attrs:{label:"通过"}}),t._v(" "),a("el-radio",{attrs:{label:"未通过"}})],1)],1):t._e()],1),t._v(" "),a("div",{staticClass:"sure",staticStyle:{display:"flex","justify-content":"flex-end","padding-bottom":"15px","padding-right":"15px"}},[a("el-button",{on:{click:function(e){t.show=!1}}},[t._v("取消")]),t._v("  "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onsubmint("ruleForm")}}},[t._v("确定")])],1)])],1),t._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeCloseDel,title:"提示"},model:{value:t.showDel,callback:function(e){t.showDel=e},expression:"showDel"}},[a("div",{staticStyle:{"text-align":"center","font-size":"0.9rem",margin:"0.8rem 0"}},[t._v(" 你确定要删除")])])],1)},[],!1,null,null,null));ft.options.__file="produceTwo.vue";var _t=ft.exports,gt={data:function(){return{addShowQ:!1,editShowQ:!1,delShowQ:!1,shengheShow:!1,showDel:!1,allPage:1,currentPage:1,inputPage:"",plTotalPage:"5",perPage:5,tableData:[],showTitle:"添加表面处理",oneData:{},show:!1,rules:{name:[{required:!0,message:"请输入表面处理名称",trigger:"blur"}]}}},methods:{init:function(t){var e=this,a={page:t};this.tableData=[],Object(C.t)(a).then(function(t){e.tableData=t.data.data,e.allPage=t.data.last_page,e.plTotalPage=t.data.last_page+"页",e.currentPage=t.data.current_page,e.perPage=Number(t.data.per_page)}).catch(function(t){})},edit:function(t,e){"add"==t?(this.showTitle="添加表面处理",this.oneData=r()({},{name:""}),this.show=!0,this.shengheShow&&(this.oneData.status="通过")):(this.showTitle="修改表面处理",this.oneData=r()({},e),1==e.status?this.oneData.status="通过":this.oneData.status="未通过"),this.show=!0},onsubmint:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;var a=r()({},e.oneData);if("通过"==a.status?a.status=1:a.status=0,"添加表面处理"==e.showTitle)Object(C.r)(a).then(function(t){e.show=!1,e.init(1),e.$toast.success({duration:2e3,message:"添加成功"})}).catch(function(t){e.$toast({message:t.response.data.errors}),console.log(t)});else{var i=a.id;a.submit=1,Object(C.s)(i,a).then(function(t){e.show=!1,e.init(e.currentPage),e.$toast.success({duration:2e3,message:"修改成功"})}).catch(function(t){e.$toast({message:t.response.data.errors}),console.log(t)})}})},handleCurrentPage:function(t){this.init(t)},InputCurrentPage:function(t){this.currentPage=Number(t),this.init(this.currentPage)},handleDel:function(t){this.oneData=t,this.showDel=!0},beforeCloseDel:function(t,e){var a=this;if("confirm"===t){var i={type:"surface"};i.did=this.oneData.id,Object(C.n)(i).then(function(t){a.init(1),a.showDel=!1,a.$toast.success({duration:1500,message:"删除成功"}),e()}).catch(function(t){console.log("删除失败"),e(),a.$toast({message:error.response.data.errors,type:"warning"})})}else e()}},created:function(){this.init(1);var t=f.a.get("actionArr");t=JSON.parse(t);var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;"check"==s&&(this.shengheShow=!0),"add"==s&&(this.addShowQ=!0),"edit"==s&&(this.editShowQ=!0),"delete"==s&&(this.delShowQ=!0)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}},mounted:function(){}},bt=(a("ESs/"),Object(g.a)(gt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"produceThreeM"},[t.addShowQ?a("div",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.edit("add")}}},[t._v("添加")])],1):t._e(),t._v(" "),a("div",{staticClass:"list"},[t._l(t.tableData,function(e,i){return a("van-row",{key:e.index,staticStyle:{"margin-top":"10px",padding:"5px","border-bottom":"1px solid #e5e5e5"}},[a("van-col",{attrs:{span:"3"}},[t._v("\n\t\t\t\t  \n\t\t\t")]),t._v(" "),a("van-col",{staticClass:"list_main_p",attrs:{span:"21"}},[a("p",[t._v("序号:"+t._s(i+1)+" 表面处理 : "+t._s(e.name))]),t._v(" "),a("p",[t._v("审核 : "+t._s(1==e.status?"通过":"未通过"))]),t._v(" "),0!=e.tenat_id?a("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"100%"}},[t.editShowQ?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.edit("edit",e)}}},[t._v("修改")]):t._e(),t._v(" "),t.delShowQ?a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"small"},on:{click:function(a){t.handleDel(e)}}},[t._v("删除")]):t._e()],1):t._e()])],1)}),t._v(" "),a("div",{staticStyle:{height:"15px"}}),t._v(" "),a("van-row",{staticStyle:{display:"flex","align-items":"center"}},[a("van-col",{staticStyle:{"padding-left":"5px"},attrs:{span:"19"}},[a("van-pagination",{attrs:{"page-count":t.allPage,"show-page-size":3,"items-per-page":t.perPage,"force-ellipses":""},on:{change:t.handleCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("van-col",{staticStyle:{"padding-left":"5px","padding-right":"5px"},attrs:{span:"5"}},[a("el-input",{attrs:{placeholder:t.plTotalPage,onkeyup:"this.value=this.value.replace(/[^0-9-]+/,'')"},on:{change:t.InputCurrentPage},model:{value:t.inputPage,callback:function(e){t.inputPage=e},expression:"inputPage"}})],1)],1),t._v(" "),a("div",{staticStyle:{height:"45px"}})],2),t._v(" "),a("van-actionsheet",{attrs:{title:t.showTitle},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.oneData,rules:t.rules,"label-width":"110px"}},[a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-form-item",{attrs:{label:"表面处理",prop:"name"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"表面处理名称"},model:{value:t.oneData.name,callback:function(e){t.$set(t.oneData,"name",e)},expression:"oneData.name"}})],1),t._v(" "),t.shengheShow?a("el-form-item",{staticStyle:{"margin-left":"-60px"},attrs:{label:"审核"}},[a("el-radio-group",{model:{value:t.oneData.status,callback:function(e){t.$set(t.oneData,"status",e)},expression:"oneData.status"}},[a("el-radio",{attrs:{label:"通过"}}),t._v(" "),a("el-radio",{attrs:{label:"未通过"}})],1)],1):t._e()],1),t._v(" "),a("div",{staticClass:"sure",staticStyle:{display:"flex","justify-content":"flex-end","padding-bottom":"15px","padding-right":"15px"}},[a("el-button",{on:{click:function(e){t.show=!1}}},[t._v("取消")]),t._v("  "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onsubmint("ruleForm")}}},[t._v("确定")])],1)])],1),t._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeCloseDel,title:"提示"},model:{value:t.showDel,callback:function(e){t.showDel=e},expression:"showDel"}},[a("div",{staticStyle:{"text-align":"center","font-size":"0.9rem",margin:"0.8rem 0"}},[t._v(" 你确定要删除")])])],1)},[],!1,null,null,null));bt.options.__file="produceThree.vue";var yt=bt.exports,wt={data:function(){return{addShowQ:!1,editShowQ:!1,delShowQ:!1,shengheShow:!1,showDel:!1,allPage:1,currentPage:1,inputPage:"",plTotalPage:"5",perPage:5,tableData:[],technologyList:[],options:[{label:"固体",value:"固体"},{label:"液体",value:"液体"},{label:"粉体",value:"粉体"}],show:!1,showTitle:"添加生产设备",oneData:{},labelPosition:"right",rules:{mname:[{required:!0,message:"请输入设备名称",trigger:"blur"}],mold_id:[{required:!0,message:"请选择工艺模型",trigger:"change"}],marc:[{required:!0,message:"请输入成型范围",trigger:"blur"}],mmaker:[{required:!0,message:"请输入制造商",trigger:"blur"}]}}},methods:{init:function(t){var e=this,a={page:t};this.tableData=[],Object(C.q)(a).then(function(t){var a=!0,i=!1,n=void 0;try{for(var o,s=l()(t.data.data);!(a=(o=s.next()).done);a=!0){var r={};(r=o.value).mold_name=e.teName(r.mold_id),e.tableData.push(r)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}e.perPage=Number(t.data.per_page),e.allPage=t.data.last_page,e.plTotalPage=t.data.last_page+"页",e.currentPage=t.data.current_page}).catch(function(t){console.log("生产材质获取失败",t)})},initTechnology:function(){var t=this;this.technologyList=[],Object(C.f)().then(function(e){var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.data);!(a=(o=s.next()).done);a=!0){var r=o.value,c={};c.label=r.name,c.value=r.id,t.technologyList.push(c)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}).catch(function(t){console.log("生产工艺",t)})},edit:function(t,e){"add"==t?(this.showTitle="添加生产设备",this.oneData={name:"",moldid:"",shape:""},this.shengheShow&&(this.oneData.status="通过")):(this.oneData=r()({},e),1==e.status?this.oneData.status="通过":this.oneData.status="未通过",this.$set(this.oneData,"mold_id",e.mold_id),this.showTitle="修改生产设备"),this.show=!0},onsubmint:function(t){var e=this;this.$refs[t].validate(function(t){var a=r()({},e.oneData);if("通过"==a.status?a.status=1:a.status=0,!t)return console.log("error submit!!"),!1;if("添加生产设备"==e.showTitle)Object(C.o)(a).then(function(t){e.show=!1,e.init(1),e.$toast.success({duration:2e3,message:"添加成功"})}).catch(function(t){e.$toast({message:t.response.data.errors}),console.log(t)});else{var i=a.id;a.submit="1",Object(C.p)(i,a).then(function(t){e.show=!1,e.init(e.currentPage),e.$toast.success({duration:2e3,message:"修改成功"})}).catch(function(t){e.$toast({message:t.response.data.errors}),console.log(t)})}})},teName:function(t){var e="",a=!0,i=!1,n=void 0;try{for(var o,s=l()(this.technologyList);!(a=(o=s.next()).done);a=!0){var r=o.value;t==r.value&&(e=r.label)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}return e},handleCurrentPage:function(t){this.init(t)},InputCurrentPage:function(t){this.currentPage=Number(t),this.init(this.currentPage)},handleDel:function(t){this.oneData=t,this.showDel=!0},beforeCloseDel:function(t,e){var a=this;if("confirm"===t){var i={type:"equipment"};i.did=this.oneData.id,Object(C.n)(i).then(function(t){a.init(1),a.showDel=!1,a.$toast.success({duration:1500,message:"删除成功"}),e()}).catch(function(t){console.log("删除失败"),e(),a.$toast({message:error.response.data.errors,type:"warning"})})}else e()}},created:function(){this.initTechnology();var t=f.a.get("actionArr");t=JSON.parse(t);var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;"check"==s&&(this.shengheShow=!0),"add"==s&&(this.addShowQ=!0),"edit"==s&&(this.editShowQ=!0),"delete"==s&&(this.delShowQ=!0)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}},mounted:function(){this.init(1)}},Dt=(a("lELS"),Object(g.a)(wt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"produceFourM"},[t.addShowQ?a("div",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.edit("add")}}},[t._v("添加")])],1):t._e(),t._v(" "),a("div",{staticClass:"list"},[t._l(t.tableData,function(e,i){return a("van-row",{key:e.index,staticStyle:{"margin-top":"10px",padding:"5px","border-bottom":"1px solid #e5e5e5"}},[a("van-col",{attrs:{span:"3"}},[t._v("\n\t\t\t\t  \n\t\t\t")]),t._v(" "),a("van-col",{staticClass:"list_main_p",attrs:{span:"21"}},[a("p",[t._v("序号"+t._s(i+1)+"  "+t._s(e.mname)+" , "+t._s(e.mold_name)+" , "+t._s(e.marc))]),t._v(" "),a("p",[t._v("制造商 : "+t._s(e.mmaker))]),t._v(" "),a("p",[t._v("审核 : "+t._s(1==e.status?"通过":"未通过"))]),t._v(" "),0!=e.tenat_id?a("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"100%"}},[t.editShowQ?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.edit("edit",e)}}},[t._v("修改")]):t._e(),t._v(" "),t.delShowQ?a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"small",icon:"el-icon-delete"},on:{click:function(a){t.handleDel(e)}}},[t._v("删除")]):t._e()],1):t._e()])],1)}),t._v(" "),a("div",{staticStyle:{height:"15px"}}),t._v(" "),a("van-row",{staticStyle:{display:"flex","align-items":"center"}},[a("van-col",{staticStyle:{"padding-left":"5px"},attrs:{span:"19"}},[a("van-pagination",{attrs:{"page-count":t.allPage,"show-page-size":3,"items-per-page":t.perPage,"force-ellipses":""},on:{change:t.handleCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("van-col",{staticStyle:{"padding-left":"5px","padding-right":"5px"},attrs:{span:"5"}},[a("el-input",{attrs:{placeholder:t.plTotalPage,onkeyup:"this.value=this.value.replace(/[^0-9-]+/,'')"},on:{change:t.InputCurrentPage},model:{value:t.inputPage,callback:function(e){t.inputPage=e},expression:"inputPage"}})],1)],1),t._v(" "),a("div",{staticStyle:{height:"45px"}})],2),t._v(" "),a("van-actionsheet",{attrs:{title:t.showTitle},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.oneData,rules:t.rules,"label-position":t.labelPosition,"label-width":"110px"}},[a("div",{staticStyle:{"text-align":"center","margin-top":"20px"}},[a("el-form-item",{attrs:{label:"成型设备",prop:"mname"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"成型设备名称"},model:{value:t.oneData.mname,callback:function(e){t.$set(t.oneData,"mname",e)},expression:"oneData.mname"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"成型工艺",prop:"mold_id"}},[a("el-select",{staticClass:"input-width",attrs:{placeholder:"请选择"},model:{value:t.oneData.mold_id,callback:function(e){t.$set(t.oneData,"mold_id",e)},expression:"oneData.mold_id"}},t._l(t.technologyList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"成型范围",prop:"marc"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"成型范围"},model:{value:t.oneData.marc,callback:function(e){t.$set(t.oneData,"marc",e)},expression:"oneData.marc"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"制造商名称",prop:"mmaker"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"制造商名称"},model:{value:t.oneData.mmaker,callback:function(e){t.$set(t.oneData,"mmaker",e)},expression:"oneData.mmaker"}})],1),t._v(" "),t.shengheShow?a("el-form-item",{staticStyle:{"margin-left":"-60px"},attrs:{label:"审核"}},[a("el-radio-group",{model:{value:t.oneData.status,callback:function(e){t.$set(t.oneData,"status",e)},expression:"oneData.status"}},[a("el-radio",{attrs:{label:"通过"}}),t._v(" "),a("el-radio",{attrs:{label:"未通过"}})],1)],1):t._e()],1),t._v(" "),a("div",{staticClass:"sure"},[a("el-button",{on:{click:function(e){t.show=!1}}},[t._v("取消")]),t._v("  "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onsubmint("ruleForm")}}},[t._v("确定")])],1)])],1),t._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeCloseDel,title:"提示"},model:{value:t.showDel,callback:function(e){t.showDel=e},expression:"showDel"}},[a("div",{staticStyle:{"text-align":"center","font-size":"0.9rem",margin:"0.8rem 0"}},[t._v(" 你确定要删除")])])],1)},[],!1,null,null,null));Dt.options.__file="produceFour.vue";var xt={data:function(){return{active:0,type:"A"}},methods:{selectName:function(){0==this.active?this.type="A":1==this.active?this.type="B":2==this.active?this.type="C":this.type="D"}},components:{produceOne:vt,produceTwo:_t,produceThree:yt,produceFour:Dt.exports}},kt=(a("xLd2"),Object(g.a)(xt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",["A"==t.type?a("div",[a("produceOne")],1):"B"==t.type?a("div",[a("produceTwo")],1):"C"==t.type?a("div",[a("produceThree")],1):a("div",[a("produceFour")],1)]),t._v(" "),a("van-tabbar",{on:{change:function(e){t.selectName()}},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-tabbar-item",{attrs:{icon:"discount"}},[t._v("生产材质")]),t._v(" "),a("van-tabbar-item",{attrs:{icon:"chat"}},[t._v("生产工艺")]),t._v(" "),a("van-tabbar-item",{attrs:{icon:"point-gift"}},[t._v("表面处理")]),t._v(" "),a("van-tabbar-item",{attrs:{icon:"points-mall"}},[t._v("生产设备")])],1)],1)},[],!1,null,null,null));kt.options.__file="produce.vue";var St={data:function(){return{index:"1",type:"A",pc:!0,mobile:!1}},methods:{quality:function(){this.type="A"},works:function(){this.type="B"},handle:function(){this.type="C"},handleS:function(){this.type="D"}},created:function(){},mounted:function(){/Android|webOS|iPhone|BlackBerry/i.test(navigator.userAgent)?(this.pc=!1,this.mobile=!0):(this.pc=!0,this.mobile=!1)},components:{produceOne:at,produceTwo:ot,produceThree:rt,mobuileProduce:kt.exports,produceFour:ut}},Ct=(a("PsHb"),Object(g.a)(St,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.pc?a("el-row",{staticClass:"tac"},[a("el-col",{attrs:{span:4}},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1"}},[a("el-menu-item",{attrs:{index:"1"},on:{click:t.quality}},[a("i",{staticClass:"el-icon-menu"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("成型材质")])]),t._v(" "),a("el-menu-item",{attrs:{index:"2"},on:{click:t.works}},[a("i",{staticClass:"el-icon-document"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("成型工艺")])]),t._v(" "),a("el-menu-item",{attrs:{index:"3"},on:{click:t.handle}},[a("i",{staticClass:"el-icon-setting"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("表面处理")])]),t._v(" "),a("el-menu-item",{attrs:{index:"4"},on:{click:t.handleS}},[a("i",{staticClass:"el-icon-setting"}),t._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[t._v("成型设备")])])],1)],1),t._v(" "),a("el-col",{attrs:{span:20}},["A"===t.type?a("div",[a("produceOne")],1):"B"===t.type?a("div",[a("produceTwo")],1):"C"===t.type?a("div",[a("produceThree")],1):a("div",[a("produceFour")],1)])],1):t._e(),t._v(" "),t.mobile?a("div",[a("mobuileProduce")],1):t._e()],1)},[],!1,null,"7b99e648",null));Ct.options.__file="produce.vue";var Pt=Ct.exports,$t={data:function(){return{loadingBook:!1,pc:!0,tableData:[],searchData:{},returnTypeStatus:[{label:"取消订单",value:0},{label:"零件重做",value:1}],statusList:[{label:"等待审核",value:0},{label:"通过",value:1}],currentPage:1,pageSize:5,linmitTotal:10,shenheId:"",shenheData:{},dialogVisibleSH:!1,dialogVisible1:!1,oneQuotation:{},TinymceShow:!1,ticketShow:{one:!1,wo:!1,three:!1},allprice:"",shengheShow:!1}},methods:{returnXiao:function(){this.$router.push({name:"modules"})},init:function(t){var e=this;this.tableData=[],Object(u.c)(t).then(function(t){e.currentPage=t.data.current_page,e.pageSize=t.data.per_page,e.linmitTotal=t.data.total,e.tableData=t.data.data}).catch(function(t){})},handleCurrentChangePage:function(t){this.searchData.page=t,this.init(this.searchData)},handleSeeOrder:function(t,e){var a=this;this.dialogVisible1=!0,this.getQuotation(e.orderid),this.TinymceShow=!1,setTimeout(function(){a.TinymceShow=!0},1)},handleShengHe:function(t,e){this.shenheId=e.id,this.shenheData={},this.$set(this.shenheData,"status","1"),this.dialogVisibleSH=!0},handleClose:function(){this.dialogVisibleSH=!1,this.dialogVisible1=!1},handleShengheSure:function(){var t=this,e={};e.rid=this.shenheId,1==this.shenheData.status?(e.status=1,Object(u.b)(e).then(function(e){t.init(t.searchData),t.$message({message:"审核成功",type:"success"}),t.dialogVisibleSH=!1}).catch(function(e){t.dialogVisibleSH=!1})):this.shenheData.message?(e.status=2,e.message=this.shenheData.message,Object(u.b)(e).then(function(e){t.init(t.searchData),t.$message({message:"提交成功",type:"success"}),t.dialogVisibleSH=!1}).catch(function(e){t.dialogVisibleSH=!1})):this.$message({message:"请输入审核不通过的原因",type:"warning"})},handleSearchSure:function(){this.searchData.page=1,this.init(this.searchData)},getQuotation:function(t){var e=this;this.allprice="",this.oneQuotation={ticket_info:{taxno:"",bank:"",bankno:""}},this.TinymceShow=!1,setTimeout(function(){e.TinymceShow=!0},1),Object(p.g)(t).then(function(t){e.oneQuotation=r()({},t.data),e.radios=e.oneQuotation.status,"1"==e.oneQuotation.status?e.oneQuotation.status="通过":e.oneQuotation.status="不通过",e.$set(e.oneQuotation,"qt",t.data.qt),e.$set(e.oneQuotation,"qs",t.data.qs);var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.oneQuotation.parts);!(a=(o=s.next()).done);a=!0){var c=o.value;c.due_date&&(c.due_date=c.due_date.split(" ")[0]),c.start_date&&(c.start_date=c.start_date.split(" ")[0]);var d;d=Number(c.product_num)*Number(c.price),e.allprice=d+Number(e.allprice)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}e.oneQuotation.freight=Number(e.oneQuotation.freight).toFixed(2),e.oneQuotation.taxation=Number(e.oneQuotation.taxation).toFixed(2),e.allprice=Number(e.allprice)+Number(e.oneQuotation.freight)+Number(e.oneQuotation.taxation),null==e.oneQuotation.ticket_info?e.ticketShow={one:!1,two:!1,three:!1}:(e.oneQuotation.ticket_info.taxno?e.ticketShow.one=!0:e.ticketShow.one=!1,e.oneQuotation.ticket_info.bank?e.ticketShow.two=!0:e.ticketShow.two=!1,e.oneQuotation.ticket_info.bankno?e.ticketShow.three=!0:e.ticketShow.three=!1)}).catch(function(t){console.log("获取报价单失败")})}},created:function(){/Android|webOS|iPhone|BlackBerry/i.test(navigator.userAgent)?this.pc=!1:(this.pc=!0,this.init(this.searchData));var t=f.a.get("actionArr");t=JSON.parse(t);var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){"check"==n.value&&(this.shengheShow=!0)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}},mounted:function(){},components:{Tinymce:h.a,mobileRetuenGood:S}},zt=(a("3wbD"),Object(g.a)($t,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.pc?a("div",{staticClass:"pcReturnGood"},[a("el-dialog",{attrs:{title:"订单",visible:t.dialogVisible1,width:"1100px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible1=e}}},[a("el-row",{staticClass:"b-title plr"},[t._v("\n\t\t    \t报价单"),a("br"),t._v("\n\t\t    \t供需方信息区域\n\t\t    ")]),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px","margin-bottom":"20px","padding-left":"10px","padding-right":"10px"}},[a("el-col",{staticStyle:{border:"1px solid #d6d6d6",height:"245px"},attrs:{span:7}},[a("el-row",{staticClass:"b-row plr b-row-m"},[t._v("\n\t\t\t\t\t\t\t制作方\n\t\t\t\t\t\t\t"),a("br"),a("br"),t._v("\n\t\t\t\t\t\t\t销售工程师 : "+t._s(t.oneQuotation.saler?t.oneQuotation.saler.name:"")+" "+t._s(t.oneQuotation.saler?t.oneQuotation.saler.phone:"")+"\n\t\t\t\t\t\t\t"),a("br"),a("br"),t._v("\n\t\t\t\t\t\t\t项目工程师 : "+t._s(t.oneQuotation.pojer?t.oneQuotation.pojer.name:"")+" "+t._s(t.oneQuotation.pojer?t.oneQuotation.pojer.phone:"")+"\n\t\t\t\t\t\t\t"),a("br"),a("br"),t._v("\n\t\t\t\t\t\t\t项目经理  : "+t._s(t.oneQuotation.manger?t.oneQuotation.manger.name:"")+" "+t._s(t.oneQuotation.manger?t.oneQuotation.manger.phone:"")+"\n\t\t\t\t\t\t")])],1),t._v(" "),a("el-col",{attrs:{span:1}},[t._v("  ")]),t._v(" "),a("el-col",{staticStyle:{border:"1px solid #d6d6d6",height:"245px"},attrs:{span:8}},[a("el-row",{staticClass:"b-row b-row-m plr"},[t._v("报价单号 : "+t._s(t.oneQuotation.no)+"\n\t\t  \t\t\t\t"),a("br"),t._v("报价日期 : "+t._s(t.oneQuotation.updated_at)+"\n\t\t  \t\t\t")]),t._v(" "),a("el-row",{staticClass:"b-row plr"},[a("el-col",{attrs:{span:9}},[t._v("订单二维码  :\n\t\t  \t\t\t\t\t"),a("div",{staticStyle:{"margin-top":"5px"}})]),t._v(" "),a("el-col",{attrs:{span:15}},[a("img",{staticStyle:{width:"80%"},attrs:{src:t.oneQuotation.qrcode_url,alt:""}})]),t._v(" "),a("span",{staticStyle:{"vertical-align":"top"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:1}},[t._v("  ")]),t._v(" "),a("el-col",{staticStyle:{border:"1px solid #d6d6d6",height:"245px"},attrs:{span:7}},[a("el-row",{staticClass:"b-row plr b-row-m",staticStyle:{"line-height":"25px"}},[t._v("\n\t\t  \t\t\t\t购买方名称 : "+t._s(t.oneQuotation.cusname)),a("br"),t._v(" "),t.ticketShow.one?a("span",[t._v("税号 : "+t._s(t.oneQuotation.ticket_info.taxno)),a("br")]):t._e(),t._v(" "),t.ticketShow.two?a("span",[t._v("开户银行 : "+t._s(t.oneQuotation.ticket_info.bank)),a("br")]):t._e(),t._v(" "),t.ticketShow.three?a("span",[t._v("银行账号 : "+t._s(t.oneQuotation.ticket_info.bankno)),a("br")]):t._e(),t._v("\n\t\t  \t\t\t\t联系人 : "),t._l(t.oneQuotation.linkmans,function(e){return a("span",[t._v(t._s(e)+" , ")])}),a("br"),t._v("\n\t\t\t\t\t\t\t零件收货地址 : "),t.oneQuotation.postaddr?a("span",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.oneQuotation.postaddr.province)+"/"+t._s(t.oneQuotation.postaddr.city)+"/"+t._s(t.oneQuotation.postaddr.area)+"/"+t._s(t.oneQuotation.postaddr.lk_address)+"\n\t\t\t\t\t\t\t")]):t._e(),a("br"),t._v("\n\t\t\t\t\t\t\t发票收件地址 : "),t.oneQuotation.invoaddr?a("span",[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.oneQuotation.invoaddr.province)+"/"+t._s(t.oneQuotation.invoaddr.city)+"/"+t._s(t.oneQuotation.invoaddr.area)+"/"+t._s(t.oneQuotation.invoaddr.lk_address)+"\n\t\t\t\t\t\t\t")]):t._e()],2)],1)],1),t._v(" "),a("el-row",{staticClass:"b-row-t plr",staticStyle:{margin:"27px 0 8px","font-size":"20px"}},[t._v("\n\t\t    \t零件清单区域\n\t\t    ")]),t._v(" "),a("el-row",{staticClass:"partbox"},[a("ul",t._l(t.oneQuotation.parts,function(e){return a("li",{staticStyle:{"margin-top":"5px",height:"215px"}},[a("div",[t._v("名称 : "+t._s(e.name))]),t._v(" "),a("div",[a("el-row",{staticClass:"mt"},[a("el-col",{attrs:{span:10}},[a("img",{attrs:{src:e.diagram,alt:""}})]),t._v(" "),a("el-col",{attrs:{span:14}},[a("p",[t._v(" "+t._s(e.matname)+"   "+t._s(e.modname)+"  ")]),t._v(" "),a("p",[t._v(t._s(e.surname)+"  "+t._s(e.equname))]),t._v(" "),a("p",[t._v(" 数量: "+t._s(e.product_num)+"个  单价: "+t._s(Number(e.price).toFixed(2)||"")+"元  ")]),t._v(" "),a("p",[t._v(" 小计: "+t._s((Number(e.price)*Number(e.product_num)).toFixed(2)||"")+"元")])])],1),t._v(" "),a("div",{staticStyle:{"line-height":"23px"}},[t._v("备注 : "+t._s(e.remark))]),t._v(" "),a("div",{staticStyle:{"padding-bottom":"5px"}},[t._v("订单拟启动时刻 : "+t._s(e.start_date)+"   拟到货时刻 : "+t._s(e.due_date))])],1)])}))]),t._v(" "),a("el-row",{staticClass:"b-row b-row-m plr"},[t._v("税费 :"+t._s(t.oneQuotation.taxation)+" 元   运费 :"+t._s(t.oneQuotation.freight)+" 元   合计 :"+t._s(t.allprice?t.allprice.toFixed(2):"")+"元\n\t\t    ")]),t._v(" "),a("el-row",{},[a("span",{staticClass:"b-title",staticStyle:{display:"block","padding-top":"25px"}},[t._v("零件检验质量标准")]),t._v(" "),a("div",{staticClass:"b-row-m "},[t.TinymceShow?a("div",{staticClass:"hidebutton"},[a("Tinymce",{ref:"editor",attrs:{height:200},model:{value:t.oneQuotation.qs,callback:function(e){t.$set(t.oneQuotation,"qs",e)},expression:"oneQuotation.qs"}})],1):t._e()])]),t._v(" "),a("el-row",{},[a("span",{staticClass:"b-title",staticStyle:{display:"block","padding-top":"30px"}},[t._v("货物交付以及结算区域")]),t._v(" "),a("div",{staticClass:"b-row-m "},[t.TinymceShow?a("div",{staticClass:"hidebutton"},[a("Tinymce",{ref:"editor",attrs:{height:200},model:{value:t.oneQuotation.qt,callback:function(e){t.$set(t.oneQuotation,"qt",e)},expression:"oneQuotation.qt"}})],1):t._e()]),t._v(" "),t.oneQuotation.log?a("div",{staticClass:"b-row-m "},[a("div",{staticClass:"b-title",staticStyle:{"padding-top":"25px","padding-bottom":"10px"}},[t._v("修改记录")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"修改记录"},model:{value:t.oneQuotation.log,callback:function(e){t.$set(t.oneQuotation,"log",e)},expression:"oneQuotation.log"}})],1):t._e()]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible1=!1}}},[t._v("关闭")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"审核退换货",visible:t.dialogVisibleSH,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleSH=e}}},[a("div",[t._v("审核 : "),a("el-radio",{attrs:{label:"1"},model:{value:t.shenheData.status,callback:function(e){t.$set(t.shenheData,"status",e)},expression:"shenheData.status"}},[t._v("通过")]),t._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:t.shenheData.status,callback:function(e){t.$set(t.shenheData,"status",e)},expression:"shenheData.status"}},[t._v("不通过")])],1),t._v(" "),2==t.shenheData.status?a("div",{staticStyle:{"margin-top":"10px"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入审核不通过的原因"},model:{value:t.shenheData.message,callback:function(e){t.$set(t.shenheData,"message",e)},expression:"shenheData.message"}})],1):t._e(),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleSH=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleShengheSure}},[t._v("确 定")])],1)]),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:8}},[a("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入客户名称"},model:{value:t.searchData.sear,callback:function(e){t.$set(t.searchData,"sear",e)},expression:"searchData.sear"}}),t._v(" "),a("el-button",{on:{click:t.handleSearchSure}},[t._v("搜索")]),t._v(" "),a("el-button",{on:{click:function(e){t.init(t.searchData)}}},[t._v("刷新列表")])],1),t._v(" "),a("el-col",{staticStyle:{display:"flex","justify-content":"flex-end"},attrs:{span:16}},[a("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入订单编号"},model:{value:t.searchData.orde,callback:function(e){t.$set(t.searchData,"orde",e)},expression:"searchData.orde"}}),t._v("  \n\t\t\t\t\t"),a("el-date-picker",{staticStyle:{width:"160px"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.searchData.edat,callback:function(e){t.$set(t.searchData,"edat",e)},expression:"searchData.edat"}}),t._v("  \n\t\t\t\t\t"),a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"请选择状态"},model:{value:t.searchData.stat,callback:function(e){t.$set(t.searchData,"stat",e)},expression:"searchData.stat"}},t._l(t.statusList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingBook,expression:"loadingBook"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","tooltip-effect":"dark","element-loading-text":"加载中...."}},[a("el-table-column",{attrs:{type:"expand",width:"55"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.parts,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"product_num",align:"center",label:"重做数量"}}),t._v(" "),a("el-table-column",{attrs:{label:"简图",align:"center",prop:"diagram"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("img",{attrs:{src:e.row.diagram,alt:"",width:"200px"}}),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("简图")])],1)])]}}])})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cusname",label:"客户名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderno",label:"订单编号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"returned_type",label:"退换货类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t  \t\t\t\t"+t._s("0"==e.row.returned_type?"取消订单":"零件重做")+"\n\t\t  \t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"申请原因",align:"center",prop:"remark"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("div",{staticStyle:{width:"200px"}},[t._v(t._s(e.row.remark))]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("申请原因")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[2==e.row.status?a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[2==e.row.status?a("p",[t._v("不通过的原因 : "+t._s(e.row.nochack))]):t._e(),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[t._v("\n\t\t\t\t\t\t\t"+t._s("0"==e.row.status?"等待审核":"1"==e.row.status?"通过":"不通过")+"\n\t\t\t\t\t\t\t\t")])]):t._e(),t._v(" "),2!=e.row.status?a("span",[t._v("\n\t\t\t\t\t\t\t\t"+t._s("0"==e.row.status?"等待审核":"1"==e.row.status?"通过":"不通过")+"\n\t\t\t\t\t\t\t")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"提交日期",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleSeeOrder(e.$index,e.row)}}},[t._v("查看订单")]),t._v(" "),e.row.status?t._e():a("span",[t.shengheShow?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.handleShengHe(e.$index,e.row)}}},[t._v("审核")]):t._e()],1)]}}])})],1)],1),t._v(" "),a("el-row",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,total:t.linmitTotal,layout:"total, prev, pager, next, jumper",background:""},on:{"current-change":t.handleCurrentChangePage}})],1)],1):a("div",[a("mobileRetuenGood")],1)])},[],!1,null,null,null));zt.options.__file="index.vue";var qt,Tt,Ot,jt,Nt,Qt=zt.exports,It=a("tGiI"),Vt={data:function(){return{kusuData:{taxation:0,freight:0},tableDataKuSu:[],fullOrderShow:!1,dialogKaiSu:!1,delShowQ:!1,addShowQ:!1,editShowQ:!1,dialogPartEdit:!1,dialogDelManyPart:!1,manystlShow:!1,onePercentage:0,activeName:"first",showContract:!1,dialogVisible:!1,dialogVisible1:!1,dialogVisible2:!1,dialogVisibleDel:!1,dialogVisibleDelParts:!1,delOnePartsIndex:0,searchName:"",dataName:"",textarea1:"",textarea2:"",loading:!0,oneQuotation:{},onePart:{},delId:"",rulesPart:{name:[{required:!0,message:"请输入零件名称",trigger:"blur"}]},radios:!0,dialogVisibleDelManySH:!1,selectData:{},options:[{value:1,label:"已生成"},{value:0,label:"未生成"}],options1:[{value:1,label:"通过"},{value:0,label:"等待审核"}],options2:[],tableData:[{id:1,name:"客户1"}],tableData1:[],oneData:{name:"",linkmans:[],taxation:"",freight:""},rules:{customer_id:[{required:!0,message:"请选择客户",trigger:"change"}],invoaddr:[{required:!0,message:"请选择发票地址",trigger:"change"}],manger:[{required:!0,message:"请选择项目经理",trigger:"change"}],pojer:[{required:!0,message:"请选择项目工程师",trigger:"change"}],saler:[{required:!0,message:"请选择销售工程师",trigger:"change"}],freight:[{required:!0,message:"请输入运费",trigger:"blur"}],postaddr:[{required:!0,message:"请选择邮寄地址",trigger:"change"}],taxation:[{required:!0,message:"请输入税费",trigger:"blur"}]},koptions:[],consignee:[],allParts:[{name:"零件一"},{name:"零件二"}],linkman:[],materialList:[],technologyList:[],equipmentList:[],depusers:[],surfaceList:[],qrcode:"",ticketShow:{one:!1,two:!1,three:!1},pageSize:5,linmitTotal:20,currentPage:4,baojiaStatus:1,materialListPrice:[],allprice:"",shengheShow:!1,piliangOrderId:[],oneModuleName:"",manyModuleName:[],dialogVisibleStl:!1,stlshowS:!1,TinymceShow:!0,orderStatus:[{value:0,label:"等待审核"},{value:1,label:"待客户确认"},{value:2,label:"准备生产"},{value:3,label:"生产中"},{value:4,label:"生产完成"},{value:5,label:"已发货"},{value:6,label:"完成"}],baifenbiStatus:1,partNameArr:[],partEditArr:[],materialAllList:[],dialogDaoRu:!1,daoruData:{},qihuanTabs:!0,dialogCopyShow:!1,CopyorderTable:[],delPartCopyShow:!1,delPartCopyId:"",editPartCopyShow:!1,editPCData:{product_num:"",picker_date:[]},hdSPartId:[],copyOid:"",orderStatusSH:""}},methods:{handleCloseCp:function(){this.dialogCopyShow=!1},handleCloseCopy:function(){this.editPartCopyShow=!1,this.delPartCopyShow=!1},copyOneOrder:function(t,e){var a=this;this.orderStatusSH="等待审核";var i=e.id;this.copyOid=e.id;var n={oid:i},o=new Date,s=o.getMonth()+1,r=o.getFullYear()+"/"+s+"/"+o.getDate(),c=new Date(o.getTime()+864e5),d=c.getFullYear(),u=c.getMonth()+1;if(u<10)var h="0"+String(h);var v=d+"/"+u+"/"+c.getDate();Object(p.p)(n).then(function(t){a.CopyorderTable=t.data;var e=!0,i=!1,n=void 0;try{for(var o,s=l()(a.CopyorderTable);!(e=(o=s.next()).done);e=!0){var c=o.value;c.volume_size=JSON.parse(c.volume_size),a.$set(c,"picker_date",[r,v]),a.$set(c,"picker_date1",r+" - "+v),c.start_date=r,c.due_date=v}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}}).catch(function(t){}),this.dialogCopyShow=!0,this.hdSPartId=[]},copyOneOrderSure:function(){var t=this,e={oid:this.copyOid,parts:this.CopyorderTable};Object(p.q)(e).then(function(e){t.$message({message:"再次下单成功",type:"success"});var a={id:e.data.order_id};t.offer(1,a),t.initOrder(t.selectData)}).catch(function(e){t.$message({message:"再次下单失败",type:"error"})}),this.dialogCopyShow=!1},deloneCPart:function(t){this.delPartCopyId=t.id,this.delPartCopyShow=!0},deloneCPartSure:function(){for(var t=0;t<this.CopyorderTable.length;t++)this.delPartCopyId==this.CopyorderTable[t].id&&(this.CopyorderTable.splice(t,1),this.delPartCopyShow=!1)},editoneCPart:function(){this.editPartCopyShow=!0,this.editPCData={product_num:"",picker_date:[]}},editoneCPartSure:function(){var t=!0,e=!1,a=void 0;try{for(var i,n=l()(this.CopyorderTable);!(t=(i=n.next()).done);t=!0){var o=i.value,s=!0,r=!1,c=void 0;try{for(var d,u=l()(this.hdSPartId);!(s=(d=u.next()).done);s=!0){var p=d.value;if(o.id==p)this.editPCData.product_num&&this.$set(o,"product_num",this.editPCData.product_num),2==this.editPCData.picker_date.length&&(o.picker_date=this.editPCData.picker_date,o.picker_date1=this.editPCData.picker_date[0]+" - "+this.editPCData.picker_date[1],o.start_date=this.editPCData.picker_date[0],o.due_date=this.editPCData.picker_date[1])}}catch(t){r=!0,c=t}finally{try{!s&&u.return&&u.return()}finally{if(r)throw c}}}}catch(t){e=!0,a=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw a}}this.editPartCopyShow=!1},hdSelectionPart:function(t){this.hdSPartId=[];var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;this.hdSPartId.push(s.id)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}},jgxsEdit:function(t,e){var a=Number((Number(e.priceCopy)*Number(t)).toFixed(2));this.$set(e,"price",a)},daoruPart:function(){this.daoruData={},this.dialogDaoRu=!0},daoruPartSure:function(){var t=this;Object(p.b)(this.daoruData).then(function(e){if("无快速报价单信息"==e.data.message)t.$message({message:"无快速报价单信息",type:"warning"});else{var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.data);!(a=(o=s.next()).done);a=!0){var r=o.value;r.material_id="",r.price="",r.product_num=1,r.coefficient=1;for(var c=!1,d=0;d<t.tableData1.length;d++)r.name==t.tableData1[d].name&&(c=!0,t.$set(t.tableData1,d,r));c||t.tableData1.push(r)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}t.dialogDaoRu=!1}).catch(function(t){})},linkselectChanage:function(t,e){var a=[];return t.forEach(function(t,i){var n={};n.value=t.id,n.label=t[e],n.defvue=t.defvue,a.push(n)}),a},selectChanage:function(t,e){var a=[];return t.forEach(function(t,i){var n={};n.value=t.id,n.label=t[e],a.push(n)}),a},init:function(){var t=this;Object(p.a)().then(function(e){t.koptions=[];var a=e.data;t.koptions=t.selectChanage(a,"name")}).catch(function(t){console.log(t)})},initDepusers:function(){var t=this;Object(p.c)().then(function(e){t.depusers=[];var a=e.data;t.depusers=t.selectChanage(a,"name")}).catch(function(t){console.log("获取用户失败")})},initTechnology:function(){var t=this;Object(C.f)().then(function(e){t.technologyList=[];var a=e.data;t.technologyList=t.selectChanage(a,"name")}).catch(function(t){console.log("获取生产工艺列表失败")})},initMateria:function(t){var e=this;Object(p.j)(t).then(function(t){e.materialList=[];var a=t.data;e.materialListPrice=t.data;var i=!0,n=!1,o=void 0;try{for(var s,r=l()(e.materialListPrice);!(i=(s=r.next()).done);i=!0){var c=s.value,d=c.price*c.density;e.$set(c,"price",d)}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}e.materialList=e.selectChanage(a,"name")}).catch(function(t){console.log("获取材质列表失败")})},initAllMateria:function(){var t=this;Object(C.d)().then(function(e){t.materialAllList=[];e.data;var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.data);!(a=(o=s.next()).done);a=!0){var r=o.value,c={};c.price=r.price*r.density,c.label=r.name,c.value=r.id,t.materialAllList.push(c)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}).catch(function(t){console.log(t),console.log("获取所有材质列表失败")})},initEquipment:function(t){var e=this;Object(p.d)(t).then(function(t){e.equipmentList=[];var a=t.data;e.equipmentList=e.selectChanage(a,"mname")}).catch(function(t){console.log("获取设备列表失败")})},initManage:function(){var t=this;Object(C.c)().then(function(e){t.surfaceList=[];var a=e.data;t.surfaceList=t.selectChanage(a,"name")}).catch(function(t){console.log("获取表面处理列表失败")})},selectMold:function(t,e){var a="";1==t?(a=e.molding_process_id,this.$set(e,"equipment_id",""),this.$set(e,"material_id",""),this.$set(e,"price",""),this.initMateria(a),this.initEquipment(a),e.modname=this.selectName(e.molding_process_id,this.technologyList),e.equname="",e.matname=""):(a=this.onePart.molding_process_id,this.$set(this.onePart,"equipment_id",""),this.$set(this.onePart,"material_id",""),this.initMateria(a),this.initEquipment(a))},selectBcd:function(t,e){if(2==t)e.equname=this.selectName(e.equipment_id,this.equipmentList);else if(3==t){e.matname=this.selectName(e.material_id,this.materialList);var a=!0,i=!1,n=void 0;try{for(var o,s=l()(this.materialListPrice);!(a=(o=s.next()).done);a=!0){var r=o.value;r.id==e.material_id&&(e.price=Number((r.price*e.volume_size.volume/1e3*Number(e.coefficient)).toFixed(2)),e.priceCopy=r.price*e.volume_size.volume/1e3)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}else e.surname=this.selectName(e.surface_id,this.surfaceList)},selectLinkman:function(t){var e=this;this.$set(this.oneData,"postaddr",""),this.$set(this.oneData,"invoaddr",""),this.$set(this.oneData,"linkmans",[]),Object(p.i)(t).then(function(t){e.oneData.coefficient=t.data.coefficient,e.oneData.saveinfo=t.data.saveinfo,e.linkman=[],e.consignee=[];var a=t.data.linkman;if(0==a.length)e.linkman=[];else{e.linkman=e.linkselectChanage(a,"linkman_name").slice();var i=!0,n=!1,o=void 0;try{for(var s,r=l()(e.linkman);!(i=(s=r.next()).done);i=!0){var c=s.value;1==c.defvue&&e.oneData.linkmans.push(c.value)}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}}var d=t.data.consignee;e.consignee=e.linkselectChanage(d,"lk_address");var u=!0,p=!1,h=void 0;try{for(var v,m=l()(e.consignee);!(u=(v=m.next()).done);u=!0){var f=v.value;1==f.defvue&&(e.$set(e.oneData,"invoaddr",f.value),e.$set(e.oneData,"postaddr",f.value))}}catch(t){p=!0,h=t}finally{try{!u&&m.return&&m.return()}finally{if(p)throw h}}}).catch(function(t){console.log(t)})},contract:function(t,e){window.open(e.contract)},offer:function(t,e){var a=this;e.status?this.orderStatusSH=e.status:this.orderStatusSH="等待审核",this.dialogVisible1=!0,this.getQuotation(e.id),this.TinymceShow=!1,setTimeout(function(){a.TinymceShow=!0},10)},handleEditOrder:function(t,e){var a=this;this.fullOrderShow=!0,this.baojiaStatus=2,this.orderStatusSH="等待审核",this.delId=e.id,Object(p.m)(e.id).then(function(t){a.dialogVisible2=!0,a.tableData1=[],a.oneData=r()({},t.data),a.selectLinkman(a.oneData.customer_id);var e=a.oneData.lkmans.split(",");setTimeout(function(){a.oneData.linkmans=[];var t=!0,i=!1,n=void 0;try{for(var o,s=l()(e);!(t=(o=s.next()).done);t=!0){var r=o.value,c=Number(r);a.oneData.linkmans.push(c)}}catch(t){i=!0,n=t}finally{try{!t&&s.return&&s.return()}finally{if(i)throw n}}var d=!0,u=!1,p=void 0;try{for(var h,v=l()(a.oneData.parts);!(d=(h=v.next()).done);d=!0){var m={};(m=h.value).start_date=m.start_date.split(" ")[0],m.due_date=m.due_date.split(" ")[0],m.volume_size=JSON.parse(m.volume_size),a.$set(m,"picker_date1",m.start_date+" - "+m.due_date),a.$set(m,"picker_date",[m.start_date,m.due_date]),m.priceCopy=Number(m.price)/Number(m.coefficient),a.tableData1.push(m)}}catch(t){u=!0,p=t}finally{try{!d&&v.return&&v.return()}finally{if(u)throw p}}},500),a.$set(a.oneData,"postaddr",t.data.postaddr),a.$set(a.oneData,"invoaddr",t.data.invoaddr)}).catch(function(t){console.log(t)})},handleDeleteOrder:function(t,e){this.dialogVisibleDel=!0,this.delId=e.id},handleDeleteOrderSure:function(){var t=this;Object(p.l)(this.delId).then(function(e){t.$message({message:"删除成功",type:"success"}),t.dialogVisibleDel=!1,t.selectData.page=1,t.initOrder(t.selectData)}).catch(function(t){console.log(t)})},handleSelectionChange:function(){},handleClick:function(t){"订单管理"==t.label?this.qihuanTabs=!0:this.qihuanTabs=!1},handleCheckedCitiesChange:function(t){this.oneData.linkmans=t},addpart:function(){var t=this;if(this.oneData.coefficient?this.onePart={product_num:1,coefficient:this.oneData.coefficient}:this.onePart={product_num:1,coefficient:1},this.oneData.saveinfo){var e=this.oneData.saveinfo.molding_process_id,a=this.oneData.saveinfo;this.initMateria(e),this.initEquipment(e),this.$nextTick(function(){t.$set(t.onePart,"equipment_id",a.equipment_id),t.$set(t.onePart,"molding_process_id",a.molding_process_id),t.$set(t.onePart,"material_id",a.material_id),t.$set(t.onePart,"surface_id",a.surface_id)})}else this.materialList=[],this.equipmentList=[];this.dialogVisible=!0,this.$nextTick(function(){document.getElementById("loadBock").style.display="block",document.getElementById("stlImg").src=""})},kuaisuDia:function(){this.tableDataKuSu=[],this.fullOrderShow=!1,this.dialogKaiSu=!0,this.kusuData={taxation:0,freight:0}},currentChangeKuSu:function(){},kusuBaojiadan:function(){var t=this,e={};(e=this.kusuData).parts=JSON.parse(d()(this.tableDataKuSu));var a=this.$loading({lock:!0,text:"提交中，请等待",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:document.querySelector(".kusuOrderB")});Object(p.h)(e).then(function(e){window.open(e.data.path),t.$message({message:"报价单生成成功",type:"success"}),t.dialogKaiSu=!1,a.close()}).catch(function(e){a.close(),t.$message({message:e.response.data.message,type:"warning"})})},kusuSelectMate:function(t,e){var a=!0,i=!1,n=void 0;try{for(var o,s=l()(this.materialAllList);!(a=(o=s.next()).done);a=!0){var r=o.value;if(r.value==t){var c=Number((Number(r.price)*Number(e.volume_size.volume)*Number(e.coefficient)/1e3).toFixed(2));e.priceCopy=Number(r.price)*Number(e.volume_size.volume)/1e3,this.$set(e,"price",c),this.$set(e,"matname",r.label)}}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}},addPartSure:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("添加零件失败"),!1;e.partInfo(),e.onePart.diagram=document.getElementById("stlImg").src,e.onePart.priceCopy=Number(e.onePart.price)*Number(e.onePart.volume_size.volume)/1e3,e.onePart.price=Number((Number(e.onePart.price)*Number(e.onePart.volume_size.volume)*Number(e.onePart.coefficient)/1e3).toFixed(2));var a=!1,i=!0,n=!1,o=void 0;try{for(var s,r=l()(e.tableData1);!(i=(s=r.next()).done);i=!0){var c=s.value;e.onePart.name==c.name&&(a=!0)}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}a?e.$message({message:"该零件名已存在",type:"warning"}):(e.tableData1.push(e.onePart),e.dialogVisible=!1)})},handleSelectionChangePart:function(t){this.partEditArr=t,this.partNameArr=[];var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;this.partNameArr.push(s.name)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}},handleCurrentChange:function(t,e,a){var i=t.molding_process_id;this.initMateria(i),this.initEquipment(i)},handleEdit:function(t,e){},handleDeleteP:function(t,e){this.dialogVisibleDelParts=!0,this.delOnePartsIndex=t},delOnePartsSure:function(){this.fullOrderShow?this.tableData1.splice(this.delOnePartsIndex,1):this.tableDataKuSu.splice(this.delOnePartsIndex,1),this.dialogVisibleDelParts=!1},handleClose:function(){this.dialogVisible=!1,this.dialogVisible1=!1,this.dialogVisibleDel=!1,this.dialogVisibleDelParts=!1,this.dialogVisibleDelManySH=!1,this.dialogKaiSu=!1,this.dialogDaoRu=!1},handleCloseO:function(){this.dialogVisible2=!1},delManyPart:function(){this.dialogDelManyPart=!0},delManyPartSure:function(){if(this.dialogDelManyPart=!1,this.fullOrderShow)for(var t=0;t<this.tableData1.length;t++){var e=!0,a=!1,i=void 0;try{for(var n,o=l()(this.partNameArr);!(e=(n=o.next()).done);e=!0){n.value==this.tableData1[t].name&&this.tableData1.splice(t,1)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}}else for(var s=0;s<this.tableDataKuSu.length;s++){var r=!0,c=!1,d=void 0;try{for(var u,p=l()(this.partNameArr);!(r=(u=p.next()).done);r=!0){u.value==this.tableDataKuSu[s].name&&this.tableDataKuSu.splice(s,1)}}catch(t){c=!0,d=t}finally{try{!r&&p.return&&p.return()}finally{if(c)throw d}}}},baojiadan:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var a=[],i=(a=e.oneData.linkmans).join(",");e.oneData.lkmans=i,e.oneData.parts=JSON.parse(d()(e.tableData1));var n=e.oneData;if(e.oneData.parts.length>0&&a.length>0)if(1==e.baojiaStatus){var o=e.$loading({lock:!0,text:"提交中，请等待",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:document.querySelector(".baojiaLoading")});Object(p.k)(n).then(function(t){if("ok"==t.data.success){e.$message({message:"添加成功",type:"success"}),e.dialogVisible1=!0,e.dialogVisible2=!1;var a=t.data.order_id;e.getQuotation(a),e.selectData.page=1,e.initOrder(e.selectData),o.close()}else e.$message({message:t.data.success,type:"warning"}),e.dialogVisible2=!0,o.close()}).catch(function(t){o.close(),e.$message({message:t.response.data.message,type:"warning"})})}else{n.submit="1";var l=e.delId,s=e.$loading({lock:!0,text:"提交中，请等待",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:document.querySelector(".baojiaLoading")});Object(p.m)(l,n).then(function(t){e.$message({message:"修改成功",type:"success"}),e.dialogVisible2=!1,e.dialogVisible1=!0,e.getQuotation(l),s.close()}).catch(function(t){s.close(),e.oneData.linkmans=copylinkmans.slice(),console.log(t)})}else e.$message({message:"联系人,零件 不能为空",type:"warning"})})},handleAddOrder:function(){this.orderStatusSH="等待审核",this.fullOrderShow=!0,this.dialogVisible2=!0,this.linkman=[],this.consignee=[],this.oneData={linkmans:[],taxation:"",freight:""},this.tableData1=[],void 0!==this.$refs.ruleForm&&this.$refs.ruleForm.resetFields(),this.baojiaStatus=1},getQuotation:function(t){var e=this;this.allprice="",this.oneQuotation={ticket_info:{taxno:"",bank:"",bankno:""}},this.TinymceShow=!1,setTimeout(function(){e.TinymceShow=!0},1),Object(p.g)(t).then(function(t){e.oneQuotation=r()({},t.data),e.radios=e.oneQuotation.status,"1"==e.oneQuotation.status?e.oneQuotation.status="通过":e.oneQuotation.status="不通过",e.$set(e.oneQuotation,"qt",t.data.qt),e.$set(e.oneQuotation,"qs",t.data.qs);var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.oneQuotation.parts);!(a=(o=s.next()).done);a=!0){var c,d=o.value;c=Number(d.product_num)*Number(d.price).toFixed(2),e.allprice=c+Number(e.allprice),d.start_date&&(d.start_date=d.start_date.split(" ")[0]),d.due_date&&(d.due_date=d.due_date.split(" ")[0])}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}e.oneQuotation.freight=Number(e.oneQuotation.freight).toFixed(2),e.oneQuotation.taxation=Number(e.oneQuotation.taxation).toFixed(2),e.allprice=Number(e.allprice)+Number(e.oneQuotation.freight)+Number(e.oneQuotation.taxation),null==e.oneQuotation.ticket_info?e.ticketShow={one:!1,two:!1,three:!1}:(e.oneQuotation.ticket_info.taxno?e.ticketShow.one=!0:e.ticketShow.one=!1,e.oneQuotation.ticket_info.bank?e.ticketShow.two=!0:e.ticketShow.two=!1,e.oneQuotation.ticket_info.bankno?e.ticketShow.three=!0:e.ticketShow.three=!1)}).catch(function(t){console.log("获取报价单失败")})},handleOneClick:function(){this.$refs.singleTable1.setCurrentRow()},stlStartS:function(){var t=document.getElementById("stlFile");this.onePercentage=0,document.getElementById("stlFile").value=null,t.click()},selectName:function(t,e){var a="",i=!0,n=!1,o=void 0;try{for(var s,r=l()(e);!(i=(s=r.next()).done);i=!0){var c=s.value;c.value==t&&(a=c.label)}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}return a},selectOrderStatus:function(t){var e="",a=!0,i=!1,n=void 0;try{for(var o,s=l()(this.orderStatus);!(a=(o=s.next()).done);a=!0){var r=o.value;r.value==t&&(e=r.label)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}return e},initOrder:function(t){var e=this;this.loading=!0,this.tableData=[],Object(p.f)(t).then(function(t){e.pageSize=t.data.per_page,e.currentPage=t.data.current_page,e.linmitTotal=t.data.total;var a=!0,i=!1,n=void 0;try{for(var o,s=l()(t.data.data);!(a=(o=s.next()).done);a=!0){var r=o.value;r.status=e.selectOrderStatus(r.status),e.tableData.push(r)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}e.loading=!1})},handleSizeChange:function(t){},handleCurrentChangePage:function(t){this.selectData.page=t,this.initOrder(this.selectData)},pickerDate:function(t,e){t?(this.$set(e,"picker_date1",t[0]+" - "+t[1]),this.$set(e,"start_date",t[0]),this.$set(e,"due_date",t[1])):(this.$set(e,"picker_date1",""),this.$set(e,"start_date",""),this.$set(e,"due_date",""))},manyShenHe:function(){this.piliangOrderId.length>0?this.dialogVisibleDelManySH=!0:this.$message({message:"请选择审核的订单",type:"warning"})},handleCloseStl:function(){this.dialogVisibleStl=!1,this.dialogDelManyPart=!1,this.dialogPartEdit=!1},manyStl:function(){var t=this;if(this.manystlShow=!0,this.onePart={},this.materialList=[],this.$set(this.onePart,"product_num",1),this.oneData.coefficient?this.$set(this.onePart,"coefficient",this.oneData.coefficient):this.$set(this.onePart,"coefficient",1),this.oneData.saveinfo){var e=this.oneData.saveinfo.molding_process_id,a=this.oneData.saveinfo;this.initMateria(e),this.initEquipment(e),this.$nextTick(function(){t.$set(t.onePart,"equipment_id",a.equipment_id),t.$set(t.onePart,"molding_process_id",a.molding_process_id),t.$set(t.onePart,"material_id",a.material_id),t.$set(t.onePart,"surface_id",a.surface_id)})}var i={};this.$store.commit("stlImgChange",i),this.$store.commit("stlSizeChange",i),this.dialogVisibleStl=!0},duqueStlMany:function(){this.fullOrderShow?this.partInfo():this.kusupartInfo(),this.dialogVisibleStl=!1;var t=this.$store.state.stlData.stlImg,e=this.$store.state.stlData.stlSize,a=[];for(var i in t)for(var n in e)if(i==n){var o={};o.name=i,o.volume_size=e[i],o.diagram=t[i],a.push(o)}var s=this.onePart,c=!0,d=!1,u=void 0;try{for(var p,h=l()(a);!(c=(p=h.next()).done);c=!0){var v=p.value,m=!1,f=r()({},v,s);if(f.priceCopy=Number(f.price)*Number(f.volume_size.volume)/1e3,f.price=Number(f.price)*Number(f.volume_size.volume),f.price=Number((Number(f.price)*Number(f.coefficient)/1e3).toFixed(2)),this.fullOrderShow){for(var _=0;_<this.tableData1.length;_++)f.name==this.tableData1[_].name&&(m=!0,this.$set(this.tableData1,_,f));m||this.tableData1.push(f)}else{for(var g=0;g<this.tableDataKuSu.length;g++)f.name==this.tableDataKuSu[g].name&&(m=!0,this.$set(this.tableDataKuSu,g,f));m||this.tableDataKuSu.push(f)}}}catch(t){d=!0,u=t}finally{try{!c&&h.return&&h.return()}finally{if(d)throw u}}this.manystlShow=!1},searOrder:function(){this.selectData.page=1,this.initOrder(this.selectData)},handleDeleteMShengHeSure:function(){var t=this,e={};e.qid=this.piliangOrderId,Object(p.n)(e).then(function(e){t.dialogVisibleDelManySH=!1,t.$message({message:"批量审核成功",type:"success"}),t.selectData.page=t.currentPage,t.initOrder(t.selectData)}).catch(function(t){console.log(t)})},handleSelectionChangeOrder:function(t){this.piliangOrderId=[];var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;this.piliangOrderId.push(s.id)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}},baojiadanSure:function(){var t=this,e=this.oneQuotation.order_id,a={};"通过"==this.oneQuotation.status?a.status=1:a.status=0,a.qt=this.oneQuotation.qt,a.qs=this.oneQuotation.qs,Object(p.o)(e,a).then(function(e){t.$message({message:"报价单确认成功",type:"success"}),t.selectData.page=t.currentPage,t.initOrder(t.selectData),t.dialogVisible1=!1}).catch(function(t){console.log("报价单提交失败")})},manyPartEdit:function(){this.onePart={},this.$set(this.onePart,"product_num",1),this.oneData.coefficient?this.$set(this.onePart,"coefficient",this.oneData.coefficient):this.$set(this.onePart,"coefficient",1),this.dialogPartEdit=!0,this.materialList=[]},manyPartEditSure:function(){var t={};if(this.fullOrderShow){if(this.onePart.molding_process_id)if(this.onePart.modname=this.selectName(this.onePart.molding_process_id,this.technologyList),t.molding_process_id=this.onePart.molding_process_id,t.modname=this.onePart.modname,this.onePart.equipment_id?(this.onePart.equname=this.selectName(this.onePart.equipment_id,this.equipmentList),t.equipment_id=this.onePart.equipment_id,t.equname=this.onePart.equname):(t.equipment_id="",t.equname=""),this.onePart.material_id){this.onePart.matname=this.selectName(this.onePart.material_id,this.materialList);var e=!0,a=!1,i=void 0;try{for(var n,o=l()(this.materialListPrice);!(e=(n=o.next()).done);e=!0){var s=n.value;s.id==this.onePart.material_id&&(this.onePart.price=s.price)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}t.price=this.onePart.price,t.matname=this.onePart.matname,t.material_id=this.onePart.material_id}else t.price="",t.matname="",t.material_id=""}else if(this.onePart.material_id){var c=!0,d=!1,u=void 0;try{for(var p,h=l()(this.materialAllList);!(c=(p=h.next()).done);c=!0){var v=p.value;v.value==this.onePart.material_id&&(this.onePart.price=v.price,this.onePart.matname=v.label)}}catch(t){d=!0,u=t}finally{try{!c&&h.return&&h.return()}finally{if(d)throw u}}t.material_id=this.onePart.material_id,t.matname=this.onePart.matname,t.price=this.onePart.price}else t.price=0,t.matname="",t.material_id="";if(this.onePart.surface_id&&(this.onePart.surname=this.selectName(this.onePart.surface_id,this.surfaceList),t.surname=this.onePart.surname,t.surface_id=this.onePart.surface_id),this.onePart.product_num&&(t.product_num=this.onePart.product_num),this.onePart.coefficient&&(t.coefficient=this.onePart.coefficient),this.onePart.remake&&(t.remake=this.onePart.coefficient),this.onePart.picker_date&&(t.picker_date=this.onePart.picker_date,t.picker_date1=this.onePart.picker_date[0]+"-"+this.onePart.picker_date[1],t.start_date=this.onePart.picker_date[0],t.due_date=this.onePart.picker_date[1]),this.fullOrderShow)for(var m=0;m<this.tableData1.length;m++){var f=!0,_=!1,g=void 0;try{for(var b,y=l()(this.partNameArr);!(f=(b=y.next()).done);f=!0){if(b.value==this.tableData1[m].name){var w=r()({},this.tableData1[m],t);this.onePart.material_id&&(w.priceCopy=Number(Number(w.price)*Number(w.volume_size.volume)/1e3),w.price=Number((Number(w.price)*Number(w.volume_size.volume)*Number(w.coefficient)/1e3).toFixed(2))),this.$set(this.tableData1,m,w)}}}catch(t){_=!0,g=t}finally{try{!f&&y.return&&y.return()}finally{if(_)throw g}}}else for(var D=0;D<this.tableDataKuSu.length;D++){var x=!0,k=!1,S=void 0;try{for(var C,P=l()(this.partNameArr);!(x=(C=P.next()).done);x=!0){if(C.value==this.tableDataKuSu[D].name){var $=r()({},this.tableDataKuSu[D],t);this.onePart.material_id&&($.priceCopy=Number(Number($.price)*Number($.volume_size.volume)/1e3),$.price=Number((Number($.price)*Number($.volume_size.volume)*Number($.coefficient)/1e3).toFixed(2))),this.$set(this.tableDataKuSu,D,$)}}}catch(t){k=!0,S=t}finally{try{!x&&P.return&&P.return()}finally{if(k)throw S}}}this.dialogPartEdit=!1},gengxingqro:function(){var t=this,e={};e.oid=this.oneQuotation.order_id,Object(p.e)(e).then(function(e){t.oneQuotation.qrcode_url=e.data.message,t.$message({message:"二维码更新成功",type:"success"})}).catch(function(t){})},stlStart:function(t){var e=this,a=(t.target||window.event.srcElement).value;if("stl"==a.substring(a.lastIndexOf(".")+1)){document.getElementById("load").style.display="",document.getElementById("loadBock").style.display="none";var i=(Nt=document.getElementById("stlFile").files[0]).name.split(".")[0];this.onePercentage=Math.floor(70*Math.random()+1),this.$set(this.onePart,"name",i),setTimeout(function(){e.initStl(),e.baifenbiStatus=Math.floor(8*Math.random()+1)},800)}else alert("请选择STL格式文件！")},initStl:function(){this.onePercentage=30,(qt=0==Et?new THREE.OrthographicCamera(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,1,1e4):new THREE.PerspectiveCamera(Lt,800/600,1.5,1e4)).position.set(Ft,At,Bt),qt.up.set(Gt,Jt,Kt),Tt=new THREE.Vector3(Mt,Rt,Ht),qt.lookAt(Tt),(Ot=new THREE.Scene).fog=new THREE.Fog(16777215,1,1e4);var t=new THREE.STLLoader,e=this;if(e.onePercentage=90,this.baifenbiStatus){var a=this.baifenbiStatus+90;e.onePercentage=a}t.load(Nt,function(t){e.onePercentage=98,t.computeBoundingBox(),t.center();for(var a=new THREE.MeshPhongMaterial({color:8421504,specular:1118481,shininess:200}),i=new THREE.Mesh(t,a),n=0,o=(new THREE.Geometry).fromBufferGeometry(i.geometry),l=0;l<o.faces.length;l++){var s=o.faces[l].a,r=o.faces[l].b,c=o.faces[l].c,d=new THREE.Vector3(o.vertices[s].x,o.vertices[s].y,o.vertices[s].z),u=new THREE.Vector3(o.vertices[r].x,o.vertices[r].y,o.vertices[r].z),p=new THREE.Vector3(o.vertices[c].x,o.vertices[c].y,o.vertices[c].z);new THREE.Triangle(p,u,d);n+=Wt(p,u,d)}var h,v,m;h=t.boundingBox.max.x-t.boundingBox.min.x,v=t.boundingBox.max.y-t.boundingBox.min.y,m=t.boundingBox.max.z-t.boundingBox.min.z;var f=parseInt(v),_=parseInt(h),g=parseInt(m),b=Math.abs(parseInt(n)),y={xx:_,yy:f,zz:g,volume:b},w="长:"+_+"mm  宽:"+g+"mm  高:"+f+"mm\n体积:"+b+"mm³";e.$set(e.onePart,"volume_size1",w),e.$set(e.onePart,"volume_size",y),i.castShadow=!0,i.receiveShadow=!0,Ot.add(i),document.getElementById("load").style.display="none",document.getElementById("loadBock").style.display="block",function(t,e,a,i,n){i.onePercentage=80;var o=t>e?t:e;o=o>a?o:a;var l=Math.max(3*n.boundingBox.max.x,3*n.boundingBox.max.y,3*n.boundingBox.max.z);(qt=new THREE.PerspectiveCamera(45,4/3,.1,1e4)).position.set(0,0,l),qt.up.set(Gt,Jt,Kt),Tt=new THREE.Vector3(Mt,Rt,Ht),qt.lookAt(Tt)}(_,g,f,e,t),e.animate()}),Ot.add(new THREE.AmbientLight(3355443)),Yt(-1,1,1,16777215,1.35),Yt(1,-1,-1,16777215,1),(jt=new THREE.WebGLRenderer({antialias:!0})).setClearColor(Ot.fog.color),jt.setSize(800,600),jt.gammaInput=!0,jt.gammaOutput=!0,jt.shadowMapEnabled=!0,jt.shadowMapCullFace=THREE.CullFaceBack;new THREE.OrbitControls(qt,jt.domElement);window.addEventListener("resize",Ut,!1)},animate:function(){Xt(this)},kusupartInfo:function(){if(this.onePart.material_id){var t=!0,e=!1,a=void 0;try{for(var i,n=l()(this.materialAllList);!(t=(i=n.next()).done);t=!0){var o=i.value;o.value==this.onePart.material_id&&(this.onePart.price=o.price,this.onePart.matname=o.label)}}catch(t){e=!0,a=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw a}}}else this.onePart.price=0},partInfo:function(){var t=new Date,e=t.getMonth()+1,a=t.getFullYear()+"/"+e+"/"+t.getDate(),i=new Date(t.getTime()+864e5),n=i.getFullYear(),o=i.getMonth()+1;if(o<10)var s="0"+String(s);var r=n+"/"+o+"/"+i.getDate();if(this.$set(this.onePart,"picker_date",[a,r]),this.$set(this.onePart,"picker_date1",a+"-"+r),this.onePart.start_date=a,this.onePart.due_date=r,this.onePart.material_id){var c=!0,d=!1,u=void 0;try{for(var p,h=l()(this.materialListPrice);!(c=(p=h.next()).done);c=!0){var v=p.value;v.id==this.onePart.material_id&&(this.onePart.price=v.price)}}catch(t){d=!0,u=t}finally{try{!c&&h.return&&h.return()}finally{if(d)throw u}}}else this.onePart.price=0;this.onePart.modname=this.selectName(this.onePart.molding_process_id,this.technologyList),this.onePart.equname=this.selectName(this.onePart.equipment_id,this.equipmentList),this.onePart.matname=this.selectName(this.onePart.material_id,this.materialList),this.onePart.surname=this.selectName(this.onePart.surface_id,this.surfaceList)}},created:function(){this.selectData.page=1,this.initOrder(this.selectData);var t=f.a.get("actionArr");t=JSON.parse(t);var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;"check"==s&&(this.shengheShow=!0),"delete"==s&&(this.delShowQ=!0),"add"==s&&(this.addShowQ=!0),"edit"==s&&(this.editShowQ=!0)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}},mounted:function(){this.$nextTick(function(){this.init(),this.initDepusers(),this.initTechnology(),this.initManage(),this.initAllMateria()})},components:{Tinymce:h.a,stl:It.a,returnGoods:Qt},computed:{stlSizeOBJ:function(){return this.$store.state.stlData.stlSize},isRed:function(){return this.$store.state.stlData.returnGoodscount}}},Et=1,Lt=45,Ft=200,At=200,Bt=200,Mt=0,Rt=0,Ht=0,Gt=0,Jt=1,Kt=0;function Wt(t,e,a){return 1/6*(t.x*e.y*a.z+a.x*t.y*e.z+e.x*a.y*t.z-a.x*e.y*t.z-e.x*t.y*a.z-t.x*a.y*e.z)}function Yt(t,e,a,i,n){var o=new THREE.DirectionalLight(i,n);o.position.set(t,e,a),Ot.add(o)}function Ut(){qt.aspect=window.innerWidth/window.innerHeight,qt.updateProjectionMatrix(),jt.setSize(window.innerWidth,window.innerHeight)}function Xt(t){t.onePercentage=99;var e=new Image;jt.render(Ot,qt);var a=jt.domElement.toDataURL("image/jpeg");e.src=a,a,document.getElementById("stlImg").src=a,jt.render(Ot,qt),t.onePercentage=100}var Zt=Vt,te=(a("qUKI"),Object(g.a)(Zt,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"moudleOrder"},[a("el-dialog",{attrs:{title:"提示",visible:t.editPartCopyShow,width:"450px","before-close":t.handleCloseCopy},on:{"update:visible":function(e){t.editPartCopyShow=e}}},[a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[t._v("零件数量(个)")]),t._v(" "),a("div",[a("el-input-number",{attrs:{"controls-position":"right",min:0,precision:0},model:{value:t.editPCData.product_num,callback:function(e){t.$set(t.editPCData,"product_num",e)},expression:"editPCData.product_num"}})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[t._v("订单拟启动时刻-拟到货时刻")]),t._v(" "),a("div",[a("el-date-picker",{attrs:{"unlink-panels":"",type:"daterange","start-placeholder":"订单拟启动时刻","end-placeholder":"拟到货时刻","value-format":"yyyy/M/d"},model:{value:t.editPCData.picker_date,callback:function(e){t.$set(t.editPCData,"picker_date",e)},expression:"editPCData.picker_date"}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editPartCopyShow=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editoneCPartSure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.delPartCopyShow,width:"400px","before-close":t.handleCloseCopy},on:{"update:visible":function(e){t.delPartCopyShow=e}}},[a("span",[t._v("你确定要删除这个零件")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.delPartCopyShow=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.deloneCPartSure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"再次下单",visible:t.dialogCopyShow,width:"1000px","before-close":t.handleCloseCp},on:{"update:visible":function(e){t.dialogCopyShow=e}}},[a("div",[a("el-button",{on:{click:t.editoneCPart}},[t._v("批量修改")])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-table",{staticClass:"tb-edit",staticStyle:{width:"100%"},attrs:{data:t.CopyorderTable,border:"","highlight-current-row":""},on:{"selection-change":t.hdSelectionPart}},[a("el-table-column",{attrs:{type:"selection",width:"30",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center",width:"150",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"diagram",label:"简图",align:"center",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("img",{attrs:{src:e.row.diagram,alt:"",width:"200px"}}),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("简图")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"volume_size",label:"体积尺寸",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("div",[t._v("长 : "+t._s(e.row.volume_size.xx)+"mm 宽 : "+t._s(e.row.volume_size.zz)+"mm 高 : "+t._s(e.row.volume_size.yy)+"mm 体积 : "+t._s(e.row.volume_size.volume)+"mm³")]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("尺寸")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"modname",label:"成型工艺",align:"center",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"equname",label:"成型设备",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.matname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"matname",label:"成型材质",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.matname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"surname",label:"表面处理",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.matname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"product_num",label:"数量(个)",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"date-show"},[a("el-input-number",{staticStyle:{width:"110px"},attrs:{precision:0,"controls-position":"right",min:1},model:{value:e.row.product_num,callback:function(a){t.$set(e.row,"product_num",a)},expression:"scope.row.product_num"}})],1),t._v(" "),a("span",[t._v(t._s(e.row.product_num))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"单价(元)",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n\t\t\t\t\t\t"+t._s(Number(Number(e.row.price).toFixed(2)))+"\r\n\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"coefficient",label:"价格系数",align:"center",width:"130"}}),t._v(" "),a("el-table-column",{attrs:{prop:"hejiPrice",label:"合计(元)",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.price&&e.row.product_num&&e.row.coefficient?a("span",[t._v("\r\n\t\t\t\t\t\t"+t._s(Number((Number(e.row.product_num)*Number(e.row.price)).toFixed(2)))+"\r\n\t\t\t\t\t\t\t")]):t._e(),t._v(" "),e.row.price&&e.row.product_num&&e.row.coefficient?t._e():a("span",[t._v("0")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"订单拟启动时刻-拟到货时刻",align:"center",width:"400",prop:"start_date"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"date-show"},[a("el-date-picker",{attrs:{"unlink-panels":"",type:"daterange","start-placeholder":"订单拟启动时刻","end-placeholder":"拟到货时刻","value-format":"yyyy/M/d"},on:{change:function(a){return t.pickerDate(a,e.row)}},model:{value:e.row.picker_date,callback:function(a){t.$set(e.row,"picker_date",a)},expression:"scope.row.picker_date"}})],1),t._v(" "),a("span",[t._v(t._s(e.row.picker_date1))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"mini"},on:{click:function(a){t.deloneCPart(e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogCopyShow=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.copyOneOrderSure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogDaoRu,width:"350px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogDaoRu=e}}},[a("div",[t._v("你确定要导入快速报价的零件")]),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[t._v("订单号  "),a("el-input",{staticStyle:{width:"180px"},model:{value:t.daoruData.key,callback:function(e){t.$set(t.daoruData,"key",e)},expression:"daoruData.key"}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogDaoRu=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.daoruPartSure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"快速报价",visible:t.dialogKaiSu,width:"950px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogKaiSu=e}}},[a("el-row",{staticClass:"mb"},[a("el-button",{attrs:{type:"primary"},on:{click:t.manyStl}},[t._v("批量添加零件")]),t._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:t.manyPartEdit}},[t._v("批量修改零件")]),t._v(" "),a("el-button",{staticStyle:{"background-color":"#d6d6d6"},on:{click:t.delManyPart}},[t._v("批量删除零件")])],1),t._v(" "),a("el-row",{staticClass:"mb"},[a("el-table",{ref:"singleTable1",staticClass:"tb-edit",staticStyle:{width:"100%"},attrs:{data:t.tableDataKuSu,border:"","tooltip-effect":"dark","highlight-current-row":""},on:{"row-click":t.currentChangeKuSu,"selection-change":t.handleSelectionChangePart}},[a("el-table-column",{attrs:{type:"selection",width:"30",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center",width:"150",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"date-show"},[a("el-input",{staticStyle:{width:"110px"},model:{value:e.row.name,callback:function(a){t.$set(e.row,"name",a)},expression:"scope.row.name"}})],1),t._v(" "),a("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"diagram",label:"简图",align:"center",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("img",{attrs:{src:e.row.diagram,alt:"",width:"200px"}}),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("简图")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"volume_size",label:"体积尺寸",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("div",[t._v("长 : "+t._s(e.row.volume_size.xx)+"mm 宽 : "+t._s(e.row.volume_size.zz)+"mm 高 : "+t._s(e.row.volume_size.yy)+"mm 体积 : "+t._s(e.row.volume_size.volume)+"mm³")]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("尺寸")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"material_id",label:"成型材质",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"成型材质"},on:{change:function(a){t.kusuSelectMate(a,e.row)}},model:{value:e.row.material_id,callback:function(a){t.$set(e.row,"material_id",a)},expression:"scope.row.material_id"}},t._l(t.materialAllList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("span",[t._v(t._s(e.row.matname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"product_num",label:"数量(个)",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"date-show"},[a("el-input-number",{staticStyle:{width:"110px"},attrs:{precision:0,"controls-position":"right",min:1},model:{value:e.row.product_num,callback:function(a){t.$set(e.row,"product_num",a)},expression:"scope.row.product_num"}})],1),t._v(" "),a("span",[t._v(t._s(e.row.product_num))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"单价(元)",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\r\n\t\t\t\t\t\t\t"+t._s(Number(Number(e.row.price).toFixed(2)))+"\r\n\t\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"coefficient",label:"价格系数",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"date-show"},[a("el-input-number",{staticStyle:{width:"110px"},attrs:{precision:2,"controls-position":"right",min:.1,max:100},on:{change:function(a){t.jgxsEdit(a,e.row)}},model:{value:e.row.coefficient,callback:function(a){t.$set(e.row,"coefficient",a)},expression:"scope.row.coefficient"}})],1),t._v(" "),a("span",[t._v(t._s(e.row.coefficient))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"hejiPrice",label:"合计(元)",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.price&&e.row.product_num&&e.row.coefficient?a("span",[t._v("\r\n\t\t\t\t\t\t\t"+t._s(Number((Number(e.row.product_num)*Number(e.row.price)).toFixed(2)))+"\r\n\t\t\t\t\t\t\t\t")]):t._e(),t._v(" "),e.row.price&&e.row.product_num&&e.row.coefficient?t._e():a("span",[t._v("0")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"mini"},on:{click:function(a){t.handleDeleteP(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("el-row",[t._v("  \r\n\t\t\t\t\t税费(元)  \r\n\t\t\t\t\t\t"),a("el-input-number",{attrs:{precision:2,"controls-position":"right",min:0},model:{value:t.kusuData.taxation,callback:function(e){t.$set(t.kusuData,"taxation",e)},expression:"kusuData.taxation"}}),t._v(" \r\n\t\t\t\t\t运费(元) \r\n\t\t\t\t\t "),a("el-input-number",{attrs:{precision:2,"controls-position":"right",min:0},model:{value:t.kusuData.freight,callback:function(e){t.$set(t.kusuData,"freight",e)},expression:"kusuData.freight"}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"kusuOrderB"},[a("el-button",{attrs:{type:"primary"},on:{click:t.kusuBaojiadan}},[t._v("生成报价单")])],1)])],1),t._v(" "),a("el-dialog",{attrs:{title:"批量修改零件",visible:t.dialogPartEdit,width:"750px","before-close":t.handleCloseStl},on:{"update:visible":function(e){t.dialogPartEdit=e}}},[a("el-row",[a("el-form",{ref:"ruleFormPart",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.onePart,"label-width":"100px",rules:t.rulesPart}},[a("el-row",{staticStyle:{"margin-top":"15px","margin-bottom":"15px","font-size":"16px"}},[t._v("\r\n\t\t\t\t\t\t设置零件信息\r\n\t\t\t\t\t")]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[t.fullOrderShow?a("el-row",[a("el-form-item",{attrs:{label:"成型工艺",prop:"molding_process_id"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},on:{change:function(e){t.selectMold("2")}},model:{value:t.onePart.molding_process_id,callback:function(e){t.$set(t.onePart,"molding_process_id",e)},expression:"onePart.molding_process_id"}},t._l(t.technologyList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1):t._e(),t._v(" "),t.fullOrderShow?a("el-row",[a("el-form-item",{attrs:{label:"成型设备",prop:"equipment_id"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},model:{value:t.onePart.equipment_id,callback:function(e){t.$set(t.onePart,"equipment_id",e)},expression:"onePart.equipment_id"}},t._l(t.equipmentList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1):t._e(),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"零件数量(个)",prop:"product_num"}},[a("el-input-number",{staticStyle:{width:"180px"},attrs:{"controls-position":"right",min:1,precision:0},model:{value:t.onePart.product_num,callback:function(e){t.$set(t.onePart,"product_num",e)},expression:"onePart.product_num"}})],1)],1),t._v(" "),t.fullOrderShow?t._e():a("el-row",[a("el-form-item",{attrs:{label:"价格系数",prop:"coefficient"}},[a("el-input-number",{staticStyle:{width:"180px"},attrs:{"controls-position":"right",min:.1,max:100,precision:2},model:{value:t.onePart.coefficient,callback:function(e){t.$set(t.onePart,"coefficient",e)},expression:"onePart.coefficient"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[t.fullOrderShow?t._e():a("el-row",[a("el-form-item",{attrs:{label:"成型材质",prop:"material_id"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},model:{value:t.onePart.material_id,callback:function(e){t.$set(t.onePart,"material_id",e)},expression:"onePart.material_id"}},t._l(t.materialAllList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),t.fullOrderShow?a("el-row",[a("el-form-item",{attrs:{label:"成型材质",prop:"material_id"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},model:{value:t.onePart.material_id,callback:function(e){t.$set(t.onePart,"material_id",e)},expression:"onePart.material_id"}},t._l(t.materialList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1):t._e(),t._v(" "),t.fullOrderShow?a("el-row",[a("el-form-item",{attrs:{label:"表面处理",prop:"surface_id"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},model:{value:t.onePart.surface_id,callback:function(e){t.$set(t.onePart,"surface_id",e)},expression:"onePart.surface_id"}},t._l(t.surfaceList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1):t._e(),t._v(" "),t.fullOrderShow?a("el-row",[a("el-form-item",{attrs:{label:"价格系数",prop:"coefficient"}},[a("el-input-number",{staticStyle:{width:"180px"},attrs:{"controls-position":"right",min:.1,max:100,precision:2},model:{value:t.onePart.coefficient,callback:function(e){t.$set(t.onePart,"coefficient",e)},expression:"onePart.coefficient"}})],1)],1):t._e()],1)],1),t._v(" "),t.fullOrderShow?a("el-row",[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.onePart.remark,callback:function(e){t.$set(t.onePart,"remark",e)},expression:"onePart.remark"}})],1)],1):t._e()],1),t._v(" "),t.fullOrderShow?a("el-row",{staticStyle:{"margin-top":"15px","margin-bottom":"15px","font-size":"16px"}},[t._v("\r\n\t\t\t\t\t设置零件的订单拟启动时刻和拟到货时刻\r\n\t\t\t\t")]):t._e(),t._v(" "),t.fullOrderShow?a("el-row",[a("el-date-picker",{attrs:{type:"daterange","unlink-panels":"","range-separator":"至","start-placeholder":"订单拟启动时刻","value-format":"yyyy/M/d","end-placeholder":"拟到货时刻"},model:{value:t.onePart.picker_date,callback:function(e){t.$set(t.onePart,"picker_date",e)},expression:"onePart.picker_date"}})],1):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogPartEdit=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.manyPartEditSure}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogDelManyPart,width:"400px","before-close":t.handleCloseStl},on:{"update:visible":function(e){t.dialogDelManyPart=e}}},[a("div",[t._v("你确定要删除已下这些零件")]),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},t._l(t.partNameArr,function(e,i){return a("span",[t._v(t._s(e)+"  |  ")])})),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogDelManyPart=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.delManyPartSure()}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"批量添加零件",visible:t.dialogVisibleStl,width:"750px","before-close":t.handleCloseStl},on:{"update:visible":function(e){t.dialogVisibleStl=e}}},[t.manystlShow?a("div",[a("stl")],1):t._e(),t._v(" "),a("el-row",{staticStyle:{"margin-top":"10px"}},[a("el-form",{ref:"ruleFormPart",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.onePart,"label-width":"100px",rules:t.rulesPart}},[t.fullOrderShow?a("el-row",{staticStyle:{"margin-bottom":"10px","font-size":"17px"}},[t._v("设置零件信息")]):t._e(),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[t.fullOrderShow?a("el-row",[a("el-form-item",{attrs:{label:"成型工艺",prop:"molding_process_id"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},on:{change:function(e){t.selectMold("2")}},model:{value:t.onePart.molding_process_id,callback:function(e){t.$set(t.onePart,"molding_process_id",e)},expression:"onePart.molding_process_id"}},t._l(t.technologyList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1):t._e(),t._v(" "),t.fullOrderShow?a("el-row",[a("el-form-item",{attrs:{label:"成型设备",prop:"equipment_id"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},model:{value:t.onePart.equipment_id,callback:function(e){t.$set(t.onePart,"equipment_id",e)},expression:"onePart.equipment_id"}},t._l(t.equipmentList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1):t._e(),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"零件数量(个)",prop:"product_num"}},[a("el-input-number",{staticStyle:{width:"180px"},attrs:{"controls-position":"right",min:1,precision:0},model:{value:t.onePart.product_num,callback:function(e){t.$set(t.onePart,"product_num",e)},expression:"onePart.product_num"}})],1)],1),t._v(" "),t.fullOrderShow?t._e():a("el-row",[a("el-form-item",{attrs:{label:"价格系数",prop:"coefficient"}},[a("el-input-number",{staticStyle:{width:"180px"},attrs:{"controls-position":"right",min:.1,max:100,precision:2},model:{value:t.onePart.coefficient,callback:function(e){t.$set(t.onePart,"coefficient",e)},expression:"onePart.coefficient"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[t.fullOrderShow?t._e():a("el-row",[a("el-form-item",{attrs:{label:"成型材质",prop:"material_id"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},model:{value:t.onePart.material_id,callback:function(e){t.$set(t.onePart,"material_id",e)},expression:"onePart.material_id"}},t._l(t.materialAllList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),t.fullOrderShow?a("el-row",[a("el-form-item",{attrs:{label:"成型材质",prop:"material_id"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},model:{value:t.onePart.material_id,callback:function(e){t.$set(t.onePart,"material_id",e)},expression:"onePart.material_id"}},t._l(t.materialList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1):t._e(),t._v(" "),t.fullOrderShow?a("el-row",[a("el-form-item",{attrs:{label:"表面处理",prop:"surface_id"}},[a("el-select",{staticStyle:{width:"180px"},attrs:{placeholder:"请选择"},model:{value:t.onePart.surface_id,callback:function(e){t.$set(t.onePart,"surface_id",e)},expression:"onePart.surface_id"}},t._l(t.surfaceList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1):t._e(),t._v(" "),t.fullOrderShow?a("el-row",[a("el-form-item",{attrs:{label:"价格系数",prop:"coefficient"}},[a("el-input-number",{staticStyle:{width:"180px"},attrs:{"controls-position":"right",min:.1,max:100,precision:2},model:{value:t.onePart.coefficient,callback:function(e){t.$set(t.onePart,"coefficient",e)},expression:"onePart.coefficient"}})],1)],1):t._e()],1)],1),t._v(" "),t.fullOrderShow?a("el-row",[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{staticStyle:{width:"180px"},attrs:{size:"small",type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.onePart.remark,callback:function(e){t.$set(t.onePart,"remark",e)},expression:"onePart.remark"}})],1)],1):t._e()],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleStl=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.duqueStlMany}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"批量审核",visible:t.dialogVisibleDelManySH,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleDelManySH=e}}},[a("span",[t._v("你确定要批量审核")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleDelManySH=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleDeleteMShengHeSure()}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"删除",visible:t.dialogVisibleDel,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleDel=e}}},[a("span",[t._v("你确定要删除该订单")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleDel=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleDeleteOrderSure()}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"删除零件",visible:t.dialogVisibleDelParts,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleDelParts=e}}},[a("span",[t._v("你确定要删除该零件")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleDelParts=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.delOnePartsSure()}}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"订单",visible:t.dialogVisible2,width:"1000px","before-close":t.handleCloseO,top:"6vh"},on:{"update:visible":function(e){t.dialogVisible2=e}}},[a("div",{staticClass:"p-box"},[a("el-form",{ref:"ruleForm",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.oneData,rules:t.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-row",[a("el-form-item",{attrs:{label:"客户",prop:"customer_id"}},[a("el-select",{staticClass:"select-widths",attrs:{placeholder:"客户",filterable:""},on:{change:t.selectLinkman},model:{value:t.oneData.customer_id,callback:function(e){t.$set(t.oneData,"customer_id",e)},expression:"oneData.customer_id"}},t._l(t.koptions,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",[a("el-row",{staticStyle:{"margin-bottom":"23px"}},[a("span",{staticStyle:{color:"#f56c6c"}},[t._v("*")]),t._v(" "),a("span",{staticStyle:{"font-size":"14px",color:"#606266","font-weight":"bold"}},[t._v("联系人(请先选择客户)")]),t._v(" "),a("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.oneData.linkmans,callback:function(e){t.$set(t.oneData,"linkmans",e)},expression:"oneData.linkmans"}},[a("el-row",{staticStyle:{"margin-top":"3px"}},t._l(t.linkman,function(e,i){return a("el-col",{key:i,attrs:{span:6}},[a("el-checkbox",{key:e.value,staticClass:"liankboxClass",attrs:{label:e.value}},[t._v(t._s(e.label))])],1)}))],1)],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"零件邮寄地址",prop:"postaddr"}},[a("el-select",{staticClass:"select-widths",attrs:{placeholder:"邮寄地址"},model:{value:t.oneData.postaddr,callback:function(e){t.$set(t.oneData,"postaddr",e)},expression:"oneData.postaddr"}},t._l(t.consignee,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"发票邮寄地址",prop:"invoaddr"}},[a("el-select",{staticClass:"select-widths",attrs:{placeholder:"发票地址"},model:{value:t.oneData.invoaddr,callback:function(e){t.$set(t.oneData,"invoaddr",e)},expression:"oneData.invoaddr"}},t._l(t.consignee,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-row",{staticClass:"mb fs"},[t._v("\r\n\t\t\t\t\t制作方\r\n\t\t\t\t\t")]),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"销售工程师",prop:"saler"}},[a("el-select",{staticClass:"select-widths",attrs:{placeholder:"销售工程师"},model:{value:t.oneData.saler,callback:function(e){t.$set(t.oneData,"saler",e)},expression:"oneData.saler"}},t._l(t.depusers,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"项目工程师",prop:"pojer"}},[a("el-select",{staticClass:"select-widths",attrs:{placeholder:"项目工程师"},model:{value:t.oneData.pojer,callback:function(e){t.$set(t.oneData,"pojer",e)},expression:"oneData.pojer"}},t._l(t.depusers,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"项目经理",prop:"manger"}},[a("el-select",{staticClass:"select-widths",attrs:{placeholder:"项目经理"},model:{value:t.oneData.manger,callback:function(e){t.$set(t.oneData,"manger",e)},expression:"oneData.manger"}},t._l(t.depusers,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1)],1),t._v(" "),a("el-row",{staticClass:"mb"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addpart}},[t._v("添加零件")]),t._v("  \r\n\t\t\t"),a("el-button",{attrs:{type:"success"},on:{click:t.manyStl}},[t._v("批量添加零件")]),t._v("  \r\n\t\t\t"),a("el-button",{attrs:{type:"warning"},on:{click:t.manyPartEdit}},[t._v("批量修改零件")]),t._v("  \r\n\t\t\t"),a("el-button",{staticStyle:{"background-color":"#d6d6d6"},on:{click:t.delManyPart}},[t._v("批量删除零件")]),t._v("  \r\n\t\t\t"),t._v(" "),a("el-button",{on:{click:t.daoruPart}},[t._v("导入快速报价单零件")])],1),t._v(" "),a("el-row",{staticClass:"mb"},[a("el-table",{ref:"singleTable1",staticClass:"tb-edit",staticStyle:{width:"100%"},attrs:{data:t.tableData1,border:"","tooltip-effect":"dark","highlight-current-row":""},on:{"row-click":t.handleCurrentChange,"selection-change":t.handleSelectionChangePart}},[a("el-table-column",{attrs:{type:"selection",width:"30",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center",width:"150",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"date-show"},[a("el-input",{staticStyle:{width:"110px"},model:{value:e.row.name,callback:function(a){t.$set(e.row,"name",a)},expression:"scope.row.name"}})],1),t._v(" "),a("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"diagram",label:"简图",align:"center",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("img",{attrs:{src:e.row.diagram,alt:"",width:"200px"}}),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("简图")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"volume_size",label:"体积尺寸",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("div",[t._v("长 : "+t._s(e.row.volume_size.xx)+"mm 宽 : "+t._s(e.row.volume_size.zz)+"mm 高 : "+t._s(e.row.volume_size.yy)+"mm 体积 : "+t._s(e.row.volume_size.volume)+"mm³")]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("尺寸")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"molding_process_id",label:"成型工艺",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"成型工艺"},on:{change:function(a){t.selectMold("1",e.row)}},model:{value:e.row.molding_process_id,callback:function(a){t.$set(e.row,"molding_process_id",a)},expression:"scope.row.molding_process_id"}},t._l(t.technologyList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("span",[t._v(t._s(e.row.modname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"equipment_id",label:"成型设备",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"成型设备"},on:{change:function(a){t.selectBcd("2",e.row)}},model:{value:e.row.equipment_id,callback:function(a){t.$set(e.row,"equipment_id",a)},expression:"scope.row.equipment_id"}},t._l(t.equipmentList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("span",[t._v(t._s(e.row.equname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"material_id",label:"成型材质",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"成型材质"},on:{change:function(a){t.selectBcd("3",e.row)}},model:{value:e.row.material_id,callback:function(a){t.$set(e.row,"material_id",a)},expression:"scope.row.material_id"}},t._l(t.materialList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("span",[t._v(t._s(e.row.matname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"surface_id",label:"表面处理",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{placeholder:"表面处理"},on:{change:function(a){t.selectBcd("4",e.row)}},model:{value:e.row.surface_id,callback:function(a){t.$set(e.row,"surface_id",a)},expression:"scope.row.surface_id"}},t._l(t.surfaceList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("span",[t._v(t._s(e.row.surname))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"product_num",label:"数量(个)",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"date-show"},[a("el-input-number",{staticStyle:{width:"110px"},attrs:{"controls-position":"right",precision:0,min:1},model:{value:e.row.product_num,callback:function(a){t.$set(e.row,"product_num",a)},expression:"scope.row.product_num"}})],1),t._v(" "),a("span",[t._v(t._s(e.row.product_num))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"单价(元)",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.coefficient?a("span",[t._v("\r\n\t\t\t\t\t\t\t"+t._s(Number(Number(e.row.price).toFixed(2)))+"\r\n\t\t\t\t\t\t")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"coefficient",label:"价格系数",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"date-show"},[a("el-input-number",{staticStyle:{width:"110px"},attrs:{"controls-position":"right",min:.1,max:100,precision:2},on:{change:function(a){t.jgxsEdit(a,e.row)}},model:{value:e.row.coefficient,callback:function(a){t.$set(e.row,"coefficient",a)},expression:"scope.row.coefficient"}})],1),t._v(" "),a("span",[t._v(t._s(Number(e.row.coefficient).toFixed(2)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"hejiPrice",label:"合计(元)",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.price&&e.row.product_num&&e.row.coefficient?a("span",[t._v("\r\n\t\t\t\t\t\t    "+t._s(Number((Number(e.row.price)*Number(e.row.product_num)).toFixed(2)))+"\r\n\t\t\t\t\t\t")]):t._e(),t._v(" "),e.row.price&&e.row.product_num&&e.row.coefficient?t._e():a("span",[t._v("0")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("el-input",{attrs:{size:"small",type:"textarea",rows:2,placeholder:"请输入内容"},on:{change:function(a){t.handleEdit(e.$index,e.row)}},model:{value:e.row.remark,callback:function(a){t.$set(e.row,"remark",a)},expression:"scope.row.remark"}}),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("备注")])],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"mini"},on:{click:function(a){t.handleDeleteP(e.$index,e.row)}}},[t._v("删除")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"订单拟启动时刻-拟到货时刻",align:"center",width:"400",prop:"start_date"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"date-show"},[a("el-date-picker",{attrs:{"unlink-panels":"",type:"daterange","start-placeholder":"订单拟启动时刻","end-placeholder":"拟到货时刻","value-format":"yyyy/M/d"},on:{change:function(a){return t.pickerDate(a,e.row)}},model:{value:e.row.picker_date,callback:function(a){t.$set(e.row,"picker_date",a)},expression:"scope.row.picker_date"}})],1),t._v(" "),a("span",[t._v(t._s(e.row.picker_date1))])]}}])})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"税费(元)",prop:"taxation"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,precision:2},model:{value:t.oneData.taxation,callback:function(e){t.$set(t.oneData,"taxation",e)},expression:"oneData.taxation"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"运费(元)",prop:"freight"}},[a("el-input-number",{attrs:{"controls-position":"right",min:0,precision:2},model:{value:t.oneData.freight,callback:function(e){t.$set(t.oneData,"freight",e)},expression:"oneData.freight"}})],1)],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"baojiaLoading"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.baojiadan("ruleForm")}}},[t._v("生成报价单")])],1)])]),t._v(" "),a("el-dialog",{attrs:{title:"报价单",visible:t.dialogVisible1,width:"1000px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible1=e}}},[a("el-row",{staticClass:"b-title plr"},[t._v("\r\n  \t报价单"),a("br"),t._v("\r\n  \t供需方信息区域\r\n  ")]),t._v(" "),a("el-row",{staticStyle:{"margin-top":"20px","margin-bottom":"20px","padding-left":"10px","padding-right":"10px"}},[a("el-col",{staticStyle:{border:"1px solid #d6d6d6",height:"245px"},attrs:{span:7}},[a("el-row",{staticClass:"b-row plr b-row-m"},[t._v("\r\n\t\t\t\t制作方\r\n\t\t\t\t"),a("br"),a("br"),t._v("\r\n\t\t\t\t销售工程师 : "+t._s(t.oneQuotation.saler?t.oneQuotation.saler.name:"")+" "+t._s(t.oneQuotation.saler?t.oneQuotation.saler.phone:"")+"\r\n\t\t\t\t"),a("br"),a("br"),t._v("\r\n\t\t\t\t项目工程师 : "+t._s(t.oneQuotation.pojer?t.oneQuotation.pojer.name:"")+" "+t._s(t.oneQuotation.pojer?t.oneQuotation.pojer.phone:"")+"\r\n\t\t\t\t"),a("br"),a("br"),t._v("\r\n\t\t\t\t项目经理  : "+t._s(t.oneQuotation.manger?t.oneQuotation.manger.name:"")+" "+t._s(t.oneQuotation.manger?t.oneQuotation.manger.phone:"")+"\r\n\t\t\t")])],1),t._v(" "),a("el-col",{attrs:{span:1}},[t._v("  ")]),t._v(" "),a("el-col",{staticStyle:{border:"1px solid #d6d6d6",height:"245px"},attrs:{span:8}},[a("el-row",{staticClass:"b-row b-row-m plr"},[t._v("报价单号 : "+t._s(t.oneQuotation.no)+"\r\n\t\t\t\t"),a("br"),t._v("报价日期 : "+t._s(t.oneQuotation.updated_at)+"\r\n\t\t\t")]),t._v(" "),a("el-row",{staticClass:"b-row plr"},[a("el-col",{attrs:{span:9}},[t._v("订单二维码  :\r\n\t\t\t\t\t"),a("div",{staticStyle:{"margin-top":"5px"}},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.gengxingqro()}}},[t._v("更新二维码")])],1)]),t._v(" "),a("el-col",{attrs:{span:15}},[a("img",{staticStyle:{width:"80%"},attrs:{src:t.oneQuotation.qrcode_url,alt:""}})]),t._v(" "),a("span",{staticStyle:{"vertical-align":"top"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:1}},[t._v("  ")]),t._v(" "),a("el-col",{staticStyle:{border:"1px solid #d6d6d6",height:"245px"},attrs:{span:7}},[a("el-row",{staticClass:"b-row plr b-row-m",staticStyle:{"line-height":"25px"}},[t._v("购买方名称 : "+t._s(t.oneQuotation.cusname)),a("br"),t._v(" "),t.ticketShow.one?a("span",[t._v("税号 : "+t._s(t.oneQuotation.ticket_info.taxno)),a("br")]):t._e(),t._v(" "),t.ticketShow.two?a("span",[t._v("开户银行 : "+t._s(t.oneQuotation.ticket_info.bank)),a("br")]):t._e(),t._v(" "),t.ticketShow.three?a("span",[t._v("银行账号 : "+t._s(t.oneQuotation.ticket_info.bankno)),a("br")]):t._e(),t._v("联系人 : "),t._l(t.oneQuotation.linkmans,function(e){return a("span",[t._v(t._s(e)+" , ")])}),t._v(" "),a("br"),t._v("零件收货地址 : "),t.oneQuotation.postaddr?a("span",[t._v("\r\n\t\t\t\t\t"+t._s(t.oneQuotation.postaddr.province)+"/"+t._s(t.oneQuotation.postaddr.city)+"/"+t._s(t.oneQuotation.postaddr.area)+"/"+t._s(t.oneQuotation.postaddr.lk_address)+"\r\n\t\t\t\t")]):t._e(),t._v(" "),a("br"),t._v("发票收件地址 : "),t.oneQuotation.invoaddr?a("span",[t._v("\r\n\t\t\t\t\t"+t._s(t.oneQuotation.invoaddr.province)+"/"+t._s(t.oneQuotation.invoaddr.city)+"/"+t._s(t.oneQuotation.invoaddr.area)+"/"+t._s(t.oneQuotation.invoaddr.lk_address)+"\r\n\t\t\t\t")]):t._e()],2)],1)],1),t._v(" "),a("el-row",{staticClass:"b-row-t plr",staticStyle:{margin:"27px 0 8px","font-size":"20px"}},[t._v("\r\n  \t零件清单区域\r\n  ")]),t._v(" "),a("el-row",{staticClass:"partbox"},[a("ul",t._l(t.oneQuotation.parts,function(e){return a("li",{staticStyle:{"margin-top":"5px",height:"230px","vertical-align":"top"}},[a("div",[t._v("名称 : "+t._s(e.name))]),t._v(" "),a("div",[a("el-row",{staticClass:"mt"},[a("el-col",{attrs:{span:10}},[a("img",{attrs:{src:e.diagram,alt:""}})]),t._v(" "),a("el-col",{attrs:{span:14}},[a("p",[t._v(" "+t._s(e.matname)+"   "+t._s(e.modname)+"  ")]),t._v(" "),a("p",[t._v(t._s(e.surname)+"  "+t._s(e.equname))]),t._v(" "),a("p",[t._v(" 数量: "),a("span",{style:{color:e.cproduct?"red":"#444"}},[t._v(t._s(e.product_num))]),t._v("个  单价: "+t._s(Number(e.price).toFixed(2))+"元  ")]),t._v(" "),a("p",[t._v(" 小计: "+t._s((Number(e.product_num)*Number(e.price)).toFixed(2)||"")+"元")])])],1),t._v(" "),a("div",{staticStyle:{"line-height":"23px"}},[t._v("备注 : "),a("span",{style:{color:e.cremark?"red":"#444"}},[t._v(t._s(e.remark))])]),t._v(" "),a("div",{staticStyle:{"padding-bottom":"10px"}},[t._v("订单拟启动时刻 : "+t._s(e.start_date)+"   拟到货时刻 : "+t._s(e.due_date))])],1)])}))]),t._v(" "),a("el-row",{staticClass:"b-row b-row-m plr"},[t._v("税费 :"+t._s(t.oneQuotation.taxation)+" 元   运费 :"+t._s(t.oneQuotation.freight)+" 元   合计 :"+t._s(t.allprice?t.allprice.toFixed(2):"")+"元\r\n  ")]),t._v(" "),a("el-row",{},[a("span",{staticClass:"b-title",staticStyle:{display:"block","padding-top":"25px"}},[t._v("零件检验质量标准")]),t._v(" "),a("div",{staticClass:"b-row-m "},[t.TinymceShow?a("div",{staticClass:"hidebutton"},[a("Tinymce",{ref:"editor",attrs:{height:200},model:{value:t.oneQuotation.qs,callback:function(e){t.$set(t.oneQuotation,"qs",e)},expression:"oneQuotation.qs"}})],1):t._e()])]),t._v(" "),a("el-row",{},[a("span",{staticClass:"b-title",staticStyle:{display:"block","padding-top":"30px"}},[t._v("货物交付以及结算区域")]),t._v(" "),a("div",{staticClass:"b-row-m "},[t.TinymceShow?a("div",{staticClass:"hidebutton"},[a("Tinymce",{ref:"editor",attrs:{height:200},model:{value:t.oneQuotation.qt,callback:function(e){t.$set(t.oneQuotation,"qt",e)},expression:"oneQuotation.qt"}})],1):t._e()]),t._v(" "),t.oneQuotation.log?a("div",{staticClass:"b-row-m "},[a("div",{staticClass:"b-title",staticStyle:{"padding-top":"25px","padding-bottom":"10px"}},[t._v("修改记录")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"修改记录"},model:{value:t.oneQuotation.log,callback:function(e){t.$set(t.oneQuotation,"log",e)},expression:"oneQuotation.log"}})],1):t._e()]),t._v(" "),"等待审核"==t.orderStatusSH?a("el-row",[t.shengheShow?a("el-row",{staticClass:"b-row-m plr",staticStyle:{"margin-top":"10px",display:"flex","align-items":"center","font-size":"14px"}},[t._v("\r\n\t\t\t审核   \r\n\t\t\t"),a("el-radio-group",{model:{value:t.oneQuotation.status,callback:function(e){t.$set(t.oneQuotation,"status",e)},expression:"oneQuotation.status"}},[a("el-radio",{attrs:{label:"通过"}}),t._v(" "),a("el-radio",{attrs:{label:"不通过"}})],1)],1):t._e()],1):t._e(),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["等待审核"==t.orderStatusSH?a("el-button",{on:{click:function(e){t.dialogVisible1=!1}}},[t._v("取 消")]):t._e(),t._v(" "),"等待审核"==t.orderStatusSH?a("el-button",{attrs:{type:"primary"},on:{click:t.baojiadanSure}},[t._v("确 定")]):t._e(),t._v(" "),"等待审核"!=t.orderStatusSH?a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible1=!1}}},[t._v("关闭")]):t._e()],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"添加零件",visible:t.dialogVisible,width:"750px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{ref:"ruleFormPart",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.onePart,"label-width":"100px",rules:t.rulesPart}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-row",{staticClass:"mb ml"},[t._v("产品信息:")]),t._v(" "),a("el-row",{staticStyle:{display:"flex","align-items":"center","padding-bottom":"15px"}},[a("el-col",{attrs:{span:3}},[t._v(" ")]),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-button",{on:{click:function(e){t.stlStartS()}}},[t._v("读取stl")]),t._v(" "),a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"stlFile",accept:".stl"},on:{change:function(e){t.stlStart(e)}}})],1),t._v(" "),a("el-col",{attrs:{span:14}},[a("div",{attrs:{id:"loadBock"}},[t._v("请选择stl文件")]),t._v(" "),a("div",{staticStyle:{display:"none"},attrs:{id:"load"}},[t._v("  加载中!请不要关闭窗口..")])])],1),t._v(" "),a("el-row",[a("div",{staticStyle:{width:"258px","margin-left":"45px","margin-bottom":"10px"}},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:t.onePercentage}})],1)]),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{staticStyle:{width:"202px"},attrs:{placeholder:"名称"},model:{value:t.onePart.name,callback:function(e){t.$set(t.onePart,"name",e)},expression:"onePart.name"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"尺寸"}},[a("el-input",{staticStyle:{width:"202px","white-space":"nowrap","font-size":"13px","word-wrap":"break-word","word-break":"break-all"},attrs:{type:"textarea",rows:3,placeholder:"尺寸"},model:{value:t.onePart.volume_size1,callback:function(e){t.$set(t.onePart,"volume_size1",e)},expression:"onePart.volume_size1"}})],1)],1),t._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"简图"}},[a("img",{staticStyle:{width:"150px",padding:"2px",border:"1px solid #d6d6d6"},attrs:{src:"",alt:"",id:"stlImg"}})])],1)],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-row",{staticClass:"mb ml"},[t._v("生产信息:")]),t._v(" "),a("el-row",{staticStyle:{"margin-left":"30px"}},[a("el-form-item",{attrs:{label:"成型工艺",prop:"molding_process_id"}},[a("el-select",{staticStyle:{width:"202px"},attrs:{placeholder:"请选择"},on:{change:function(e){t.selectMold("2")}},model:{value:t.onePart.molding_process_id,callback:function(e){t.$set(t.onePart,"molding_process_id",e)},expression:"onePart.molding_process_id"}},t._l(t.technologyList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-left":"30px"}},[a("el-form-item",{attrs:{label:"成型设备",prop:"equipment_id"}},[a("el-select",{staticStyle:{width:"202px"},attrs:{placeholder:"请选择"},model:{value:t.onePart.equipment_id,callback:function(e){t.$set(t.onePart,"equipment_id",e)},expression:"onePart.equipment_id"}},t._l(t.equipmentList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-left":"30px"}},[a("el-form-item",{attrs:{label:"成型材质",prop:"material_id"}},[a("el-select",{staticStyle:{width:"202px"},attrs:{placeholder:"请选择"},model:{value:t.onePart.material_id,callback:function(e){t.$set(t.onePart,"material_id",e)},expression:"onePart.material_id"}},t._l(t.materialList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-left":"30px"}},[a("el-form-item",{attrs:{label:"表面处理",prop:"surface_id"}},[a("el-select",{staticStyle:{width:"202px"},attrs:{placeholder:"请选择"},model:{value:t.onePart.surface_id,callback:function(e){t.$set(t.onePart,"surface_id",e)},expression:"onePart.surface_id"}},t._l(t.surfaceList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-left":"30px"}},[a("el-form-item",{attrs:{label:"数量(个)",prop:"product_num"}},[a("el-input-number",{staticStyle:{width:"202px"},attrs:{"controls-position":"right",min:1,precision:0},model:{value:t.onePart.product_num,callback:function(e){t.$set(t.onePart,"product_num",e)},expression:"onePart.product_num"}})],1)],1),t._v(" "),a("el-row",{staticStyle:{"margin-left":"30px"}},[a("el-form-item",{attrs:{label:"价格系数",prop:"coefficient"}},[a("el-input-number",{staticStyle:{width:"202px"},attrs:{"controls-position":"right",min:.1,max:100,precision:2},model:{value:t.onePart.coefficient,callback:function(e){t.$set(t.onePart,"coefficient",e)},expression:"onePart.coefficient"}})],1)],1)],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addPartSure("ruleFormPart")}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"订单管理",name:"first"}},[t.qihuanTabs?a("div",[a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-col",{attrs:{span:8}},[t.addShowQ?a("el-button",{attrs:{type:"primary"},on:{click:t.handleAddOrder}},[t._v("添加订单")]):t._e(),t._v(" "),t.shengheShow?a("el-button",{attrs:{type:"success"},on:{click:t.manyShenHe}},[t._v("审核")]):t._e(),t._v(" "),a("el-button",{on:{click:function(e){t.initOrder(t.selectData)}}},[t._v("刷新列表")])],1),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:16}},[a("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"客户名称"},model:{value:t.selectData.sear,callback:function(e){t.$set(t.selectData,"sear",e)},expression:"selectData.sear"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),t._v("\r\n\t\t\t\t    \r\n\t\t\t\t\t"),a("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"订单号"},model:{value:t.selectData.order,callback:function(e){t.$set(t.selectData,"order",e)},expression:"selectData.order"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),t._v("\r\n\t\t\t\t\t  \r\n\t\t \t\t"),a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"是否生成合同",clearable:""},model:{value:t.selectData.cont,callback:function(e){t.$set(t.selectData,"cont",e)},expression:"selectData.cont"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v("\r\n\t\t\t    \r\n\t\t\t  "),a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"订单状态",clearable:""},model:{value:t.selectData.stat,callback:function(e){t.$set(t.selectData,"stat",e)},expression:"selectData.stat"}},t._l(t.orderStatus,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v("\r\n\t\t\t    \r\n\t\t\t   "),a("el-date-picker",{staticStyle:{width:"160px"},attrs:{type:"date",placeholder:"选择日期时间"},model:{value:t.selectData.edat,callback:function(e){t.$set(t.selectData,"edat",e)},expression:"selectData.edat"}}),t._v("\r\n\t\t\t\t  \r\n\t\t\t\t"),a("el-button",{on:{click:t.searOrder}},[t._v("搜索")])],1)],1),t._v(" "),a("el-row",{staticClass:"mb"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","tooltip-effect":"dark","element-loading-text":"加载中...."},on:{"selection-change":t.handleSelectionChangeOrder}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cusname",label:"客户名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"no",label:"订单编号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"订单状态",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return["完成"==e.row.status?a("span",[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.copyOneOrder(e.$index,e.row)}}},[t._v("再次下单")]),t._v("\r\n\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t")],1):t._e(),t._v(" "),(e.row.contract?t.showContract=!0:t.showContract=!1)?a("span",[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.contract(e.$index,e.row)}}},[t._v("合同")]),t._v("\r\n\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t")],1):t._e(),t._v(" "),a("span",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.offer(e.$index,e.row)}}},[t._v("报价单")]),t._v("\r\n\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t")],1),t._v(" "),"等待审核"==e.row.status?a("span",[t.editShowQ?a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(a){t.handleEditOrder(e.$index,e.row)}}},[t._v("修改")]):t._e(),t._v("\r\n\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t")],1):t._e(),t._v(" "),a("span",[t.delShowQ?a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"mini"},on:{click:function(a){t.handleDeleteOrder(e.$index,e.row)}}},[t._v("删除")]):t._e(),t._v("\r\n\t\t\t\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\t\t")],1)]}}])})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-button",{on:{click:t.kuaisuDia}},[t._v("快速生成报价单")])],1),t._v(" "),a("el-col",{staticStyle:{display:"flex","justify-content":"flex-end"},attrs:{span:18}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,total:t.linmitTotal,layout:"total, prev, pager, next, jumper",background:""},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChangePage}})],1)],1)],1):t._e()]),t._v(" "),a("el-tab-pane",{attrs:{name:"second"}},[a("span",{attrs:{slot:"label"},slot:"label"},[t._v("退换货管理 \r\n\t\t\t\t\t"),t.isRed?a("span",{staticStyle:{"margin-top":"12px",float:"right",display:"flex","align-items":"center","font-size":"7px","justify-content":"center","min-width":"15px",height:"15px",color:"#fff","border-radius":"7px",background:"red",padding:"0 3px"}},[t._v(t._s(t.isRed))]):t._e()]),t._v(" "),t.qihuanTabs?t._e():a("div",[a("returnGoods")],1)])],1)],1)},[],!1,null,null,null));te.options.__file="order.vue";var ee=te.exports,ae=a("jWXv"),ie=a.n(ae),ne=a("m1cH"),oe=a.n(ne),le=a("sk9p"),se=a.n(le),re=a("t3Un");function ce(t){return Object(re.a)({url:"api/prod/parts/list",method:"get",params:t})}function de(t){var e=t;return Object(re.a)({url:"api/prod/manuf/add",method:"post",data:e})}function ue(t){return Object(re.a)({url:"api/prod/manuf/list",method:"get",params:t})}function pe(t,e){var a=e;return Object(re.a)({url:"api/prod/propla/get/"+t,method:"post",data:a})}function he(t){var e=t;return Object(re.a)({url:"api/prod/propla/uppics",method:"post",data:e})}function ve(t){var e=t;return Object(re.a)({url:"api/prod/propla/getpics",method:"post",data:e})}function me(t){var e=t;return Object(re.a)({url:"api/prod/propla/delpic",method:"post",data:e})}function fe(t){var e=t;return Object(re.a)({url:"api/prod/propla/setok",method:"post",data:e})}function _e(t,e){return Object(re.a)({url:"api/prod/manuf/chack/"+t,method:"get",params:e})}var ge={data:function(){return{activeName:"first",loadingBook:!0,loadingPart:!0,dialogVisible:!1,dialogVisible1:!1,dialogVisibleDelPart:!1,dialogVisibleUpload:!1,dialogVisibleBookChakan:!1,onePart:{},oneData:{parts:[]},partsDelIndex:"",onePlanData:{},dialogVisibleBook:!1,bookAddStatus:1,searchData:{sear:"",edat:"",mate:"",mold:"",surf:"",equi:"",page:""},technologyList:[],bookListStatus:[{label:"未开始",value:0},{label:"正在生产",value:1},{label:"生产结束",value:2}],materialList:[],equipmentList:[],surfaceList:[],tableData:[],bookTableData:[],onePlanId:"",pageSize:5,linmitTotal:20,currentPage:4,pageSizeBook:5,linmitTotalBook:20,currentPageBook:4,partAllId:[],partAllCurrentId:[],depusersList:[],bookId:"",fileList:[],fileListS:[],productionId:"",picarrData:[],shipingArrData:[],PlanPart:[],showSCWC:"",addShow:!1,onePlanDataCopy:{},endTimeShow:!1,planButtonShow:!1,dialogVisibleTime:!1,plTime:[]}},methods:{beforeAvatarUpload:function(t){var e=t.size/1024/1024<5;return e||this.$message.error("有文件超过5m，该文件不能上传"),e},handleCloseTime:function(){this.dialogVisibleTime=!1},setManyTime:function(){this.plTime=[];var t=!1;if(this.PlanPart.length>0){var e=!0,a=!1,i=void 0;try{for(var n,o=l()(this.PlanPart);!(e=(n=o.next()).done);e=!0){n.value.realedate&&(t=!0)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}t?this.$message({message:"已有零件生产完成，不能重复设置零件的计划时刻",type:"warning"}):this.dialogVisibleTime=!0}else this.$message({message:"请选择要设置的零件",type:"warning"})},setManyTimeSure:function(){var t=!1;if(2==this.plTime.length){var e=!0,a=!1,i=void 0;try{for(var n,o=l()(this.onePlanData.proplan);!(e=(n=o.next()).done);e=!0){var s=n.value,r=!0,c=!1,d=void 0;try{for(var u,p=l()(this.PlanPart);!(r=(u=p.next()).done);r=!0){if(u.value.id==s.id){var h=s.start_date+" 00:00:00",v=new Date(h).getTime(),m=new Date(this.plTime[0]).getTime(),f=new Date(this.plTime[1]).getTime();v<=m&&v<=f?(this.$set(s,"plstatime",this.plTime[0]),this.$set(s,"plendtime",this.plTime[1]),this.$set(s,"picker_date",this.plTime)):t=!0}}}catch(t){c=!0,d=t}finally{try{!r&&p.return&&p.return()}finally{if(c)throw d}}}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}}t&&this.$message({message:"部分零件设置拟启动时刻小于订单拟启动时刻，需要重新设置",type:"warning",duration:"4000"}),this.dialogVisibleTime=!1},renderheader:function(t,e){var a=e.column;e.$index;return t("span",{},[t("span",{},a.label.split("/")[0]),t("br"),t("span",{},a.label.split("/")[1])])},initDepusers:function(){var t=this;Object(p.c)().then(function(e){var a=e.data;t.depusersList=t.selectChanage(a,"name")}).catch(function(t){return console.log("获取工程师列表失败")})},selectChanage:function(t,e){var a=[];return t.forEach(function(t,i){var n={};n.value=t.id,n.label=t[e],a.push(n)}),a},initTechnology:function(){var t=this;Object(C.f)().then(function(e){t.technologyList=[];var a=e.data;t.technologyList=t.selectChanage(a,"name")}).catch(function(t){console.log("获取生产工艺列表失败")})},initAllMateria:function(){var t=this;Object(C.d)().then(function(e){t.materialList=[];var a=e.data;t.materialListPrice=e.data,t.materialList=t.selectChanage(a,"name")}).catch(function(t){console.log(t),console.log("获取材质列表失败")})},initMateria:function(t){var e=this;Object(p.j)(t).then(function(t){e.materialList=[];var a=t.data;e.materialListPrice=t.data,e.materialList=e.selectChanage(a,"name")}).catch(function(t){console.log("获取材质列表失败")})},initAllEquipment:function(t){var e=this;Object(C.b)(t).then(function(t){e.equipmentList=[];var a=t.data;e.equipmentList=e.selectChanage(a,"mname")}).catch(function(t){console.log("获取设备列表失败")})},initEquipment:function(t){var e=this;Object(p.d)(t).then(function(t){e.equipmentList=[];var a=t.data;e.equipmentList=e.selectChanage(a,"mname")}).catch(function(t){console.log("获取设备列表失败")})},initManage:function(){var t=this;Object(C.c)().then(function(e){t.surfaceList=[];var a=e.data;t.surfaceList=t.selectChanage(a,"name")}).catch(function(t){console.log("获取表面处理列表失败")})},selectTechnology:function(t){t?(this.$set(this.searchData,"equi",""),this.$set(this.searchData,"mate",""),this.initEquipment(t),this.initMateria(t)):(this.$set(this.searchData,"equi",""),this.$set(this.searchData,"mate",""),this.equipmentList=[],this.materialList=[])},searchSure:function(t){"parts"==t?(this.searchData.page=1,this.initParts(this.searchData)):(this.searchData.page=1,this.initbook(this.searchData))},initPlan:function(t,e){var a=this,i=this.$loading({lock:!0,text:"加载中，请等待",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:document.querySelector(".planLoading")});pe(t,e).then(function(t){i.close(),e?(a.dialogVisible1=!1,a.$message({message:"生产计划确认成功",type:"success"}),a.initbook(a.searchData)):a.$nextTick(function(){this.dialogVisible1=!0}),a.onePlanDataCopy=JSON.parse(d()(t.data)),a.onePlanData=t.data,a.endTimeShow=!1;var n=0,o=a.onePlanData.proplan.length;a.planButtonShow=!1;var s=function(t){if(ve({plenid:t.id}).then(function(e){var i=Number(e.data.images.length),n=Number(e.data.videos.length);a.$set(t,"picNum",i),a.$set(t,"vidNum",n)}).catch(function(t){}),t.volume_size=JSON.parse(t.volume_size),t.realedate){var e=t.realedate.split(" ")[0];a.$set(t,"realedate",e),n+=1}if(t.plendtime&&(t.endTimeShow=!0,a.endTimeShow=!0),t.start_date){var i=t.start_date.split(" ")[0];a.$set(t,"start_date",i)}if(t.plstatime&&t.plendtime){var o;o=[t.plstatime,t.plendtime],a.$set(t,"picker_date",o),t.picker_date1=t.plstatime.split(" ")[0]+"-"+t.plendtime.split(" ")[0]}else a.$set(t,"picker_date",[])},r=!0,c=!1,u=void 0;try{for(var p,h=l()(a.onePlanData.proplan);!(r=(p=h.next()).done);r=!0){s(p.value)}}catch(t){c=!0,u=t}finally{try{!r&&h.return&&h.return()}finally{if(c)throw u}}console.log(a.onePlanData.proplan),n==o&&(a.planButtonShow=!0)}).catch(function(t){i.close()})},initParts:function(t){var e=this,a=this.partAllId.slice();this.loadingPart=!0,ce(t).then(function(t){e.pageSize=5,e.currentPage=t.data.current_page,e.linmitTotal=t.data.total,e.tableData=[],e.tableData=t.data.data,e.partAllCurrentId=[];var i=!0,n=!1,o=void 0;try{for(var s,r=l()(e.tableData);!(i=(s=r.next()).done);i=!0){var c=s.value;e.partAllCurrentId.push(c.id),c.volume_size=JSON.parse(c.volume_size),c.start_date&&(c.start_date=c.start_date.split(" ")[0]),c.due_date&&(c.due_date=c.due_date.split(" ")[0])}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}e.$nextTick(function(){var t=!0,e=!1,i=void 0;try{for(var n,o=l()(a);!(t=(n=o.next()).done);t=!0){var s=n.value,r=!0,c=!1,d=void 0;try{for(var u,p=l()(this.tableData.entries());!(r=(u=p.next()).done);r=!0){var h=u.value,v=se()(h,2),m=v[0];v[1];s==this.tableData[m].id&&this.$refs.partsTable.toggleRowSelection(this.tableData[m],!0)}}catch(t){c=!0,d=t}finally{try{!r&&p.return&&p.return()}finally{if(c)throw d}}}}catch(t){e=!0,i=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw i}}}),e.loadingPart=!1}).catch(function(t){console.log(t)})},initbook:function(t){var e=this;this.loadingBook=!0,ue(t).then(function(t){e.pageSizeBook=5,e.currentPageBook=t.data.current_page,e.linmitTotalBook=t.data.total,e.bookTableData=t.data.data,e.loadingBook=!1;var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.bookTableData);!(a=(o=s.next()).done);a=!0){var r=o.value,c=!0,d=!1,u=void 0;try{for(var p,h=l()(r.parts);!(c=(p=h.next()).done);c=!0){var v=p.value;v.volume_size=JSON.parse(v.volume_size)}}catch(t){d=!0,u=t}finally{try{!c&&h.return&&h.return()}finally{if(d)throw u}}}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}).catch(function(t){console.log("获取生产任务书列表失败")})},handleSizeChange:function(t){},handleCurrentChangePage:function(t){this.searchData.page=t,this.initParts(this.searchData)},handleSizeChangeBook:function(t){},handleCurrentChangePageBook:function(t){this.searchData.page=t,this.initbook(this.searchData)},handleClick:function(t){"生产任务书"==t.label?(this.searchData={},this.searchData.page=1,this.initbook(this.searchData)):(this.searchData={},this.searchData.page=1,this.initParts(this.searchData))},handleSelectionPlanPart:function(t,e){this.PlanPart=t},planAllPartSure:function(){var t=this;if(0==this.PlanPart.length)this.$message({message:"请选择完成零件",type:"warning"});else{var e=[],a=!0,i=!0,n=!0,o=!1,s=void 0;try{for(var r,c=l()(this.onePlanDataCopy.proplan);!(n=(r=c.next()).done);n=!0){var d=r.value,u=!0,p=!1,h=void 0;try{for(var v,m=l()(this.PlanPart);!(u=(v=m.next()).done);u=!0){var f=v.value;d.id==f.id&&null==d.plendtime&&(a=!1)}}catch(t){p=!0,h=t}finally{try{!u&&m.return&&m.return()}finally{if(p)throw h}}}}catch(t){o=!0,s=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw s}}var _=!0,g=!1,b=void 0;try{for(var y,w=l()(this.onePlanData.proplan);!(_=(y=w.next()).done);_=!0){var D=y.value,x=!0,k=!1,S=void 0;try{for(var C,P=l()(this.PlanPart);!(x=(C=P.next()).done);x=!0){var $=C.value;D.id==$.id&&D.realedate&&(i=!1)}}catch(t){k=!0,S=t}finally{try{!x&&P.return&&P.return()}finally{if(k)throw S}}}}catch(t){g=!0,b=t}finally{try{!_&&w.return&&w.return()}finally{if(g)throw b}}var z=!0,q=!1,T=void 0;try{for(var O,j=l()(this.PlanPart);!(z=(O=j.next()).done);z=!0){var N=O.value;e.push(N.id)}}catch(t){q=!0,T=t}finally{try{!z&&j.return&&j.return()}finally{if(q)throw T}}var Q={};Q.plenid=e,a?i?this.$confirm("你确定要批量完成?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(1),fe(Q).then(function(e){t.initbook(t.searchData);var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.data);!(a=(o=s.next()).done);a=!0){var r=o.value,c=!0,d=!1,u=void 0;try{for(var p,h=l()(t.onePlanData.proplan);!(c=(p=h.next()).done);c=!0){var v=p.value;if(r.id==v.id){var m=r.realedate.split(" ")[0];t.$set(v,"realedate",m)}}}catch(t){d=!0,u=t}finally{try{!c&&h.return&&h.return()}finally{if(d)throw u}}}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}var f=0,_=t.onePlanData.proplan.length,g=!0,b=!1,y=void 0;try{for(var w,D=l()(t.onePlanData.proplan);!(g=(w=D.next()).done);g=!0){w.value.realedate&&(f+=1)}}catch(t){b=!0,y=t}finally{try{!g&&D.return&&D.return()}finally{if(b)throw y}}f==_&&(t.planButtonShow=!0),t.$message({message:"批量生产完成",type:"success"})}).catch(function(t){})}).catch(function(){}):this.$message({message:"有零件已生成完成,请不要重复设置",type:"warning"}):this.$message({message:"有零件未设置计划日期，请先提交计划日期",type:"warning"})}},handleSelectionChangeParts:function(t,e){for(var a=this.partAllCurrentId.slice(),i=0;i<t.length;i++)this.partAllId.push(t[i].id);a.sort(),this.partAllId.sort();for(var n=0;n<t.length;n++)for(var o=0;o<a.length;o++)t[n].id==a[o]&&a.splice(o,1);this.partAllId=[].concat(oe()(new ie.a(this.partAllId))),a.sort(),this.partAllId.sort();for(var l=0;l<this.partAllId.length;l++)for(var s=0;s<a.length;s++)a[s]==this.partAllId[l]&&this.partAllId.splice(l,1)},handleSelectionChange:function(){},handleDel:function(){},handleCurrentChange:function(){},handleClose:function(){this.dialogVisible=!1,this.dialogVisible1=!1,this.dialogVisibleBook=!1,this.dialogVisibleDelPart=!1,this.dialogVisibleUpload=!1,this.dialogVisibleBookChakan=!1},addBook:function(){this.partAllId.length>0?this.dialogVisibleBook=!0:this.$message({message:"请选择零件",type:"warning"}),this.bookAddStatus=2},handleJh:function(t,e){this.PlanPart=[],this.initPlan(e.id),this.onePlanId=e.id},handleEditBook:function(t,e){this.dialogVisibleBook=!0,this.bookAddStatus=1,this.onePart=e},handleEditBookSure:function(){var t={parts:[]};1==this.bookAddStatus?(t.parts.push(this.onePart.id),this.bookAddInit(t)):(t.parts=this.partAllId,this.bookAddInit(t))},bookAddInit:function(t){var e=this,a=this.$loading({lock:!0,text:"加载中，请等待",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:document.querySelector(".bookLoading")});de(t).then(function(t){if("100"==t.data.code)e.$message({message:t.data.msg,type:"warning"}),a.close();else if("200"==t.data.code)e.$message({message:"任务书确定成功",type:"success"}),e.initParts(e.searchData),e.$refs.partsTable.clearSelection(),e.dialogVisible=!1,a.close();else{a.close(),e.dialogVisibleBook=!1,e.oneData=t.data;var i=!0,n=!1,o=void 0;try{for(var s,r=l()(e.oneData.parts);!(i=(s=r.next()).done);i=!0){var c=s.value;c.volume_size=JSON.parse(c.volume_size),c.start_date&&(c.start_date=c.start_date.split(" ")[0]),c.due_date&&(c.due_date=c.due_date.split(" ")[0])}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}e.dialogVisible=!0,e.bookId=t.data.id,e.partAllId=[],e.initParts(e.searchData),e.$refs.partsTable.clearSelection()}}).catch(function(t){console.log("添加任务书失败")})},getBookSure:function(){var t={};t.prouid=this.oneData.prouid,t.submit="1";var e=[],a=!0,i=!1,n=void 0;try{for(var o,s=l()(this.oneData.parts);!(a=(o=s.next()).done);a=!0){var r=o.value,c={};c.id=r.id,c.reqmen=r.reqmen,e.push(c)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}t.parts=e,t.customer_id=this.oneData.customer_id,t.no=this.oneData.no,t.prouid?this.bookAddInit(t):this.$message({message:"请选择生产工程师",type:"warning"})},handleEdit:function(){},delPartSure:function(){this.oneData.parts.splice(this.partsDelIndex,1),this.dialogVisibleDelPart=!1},handleDelPart:function(t){this.dialogVisibleDelPart=!0,this.partsDelIndex=t},pickerDate:function(t,e){if(t){var a=e.start_date+" 00:00:00",i=new Date(a).getTime(),n=new Date(t[0]).getTime(),o=new Date(t[1]).getTime();i<=o&&i<=n?(this.$set(e,"plstatime",t[0]),this.$set(e,"plendtime",t[1])):(console.log(i),console.log(o),this.$set(e,"picker_date",[]),this.$refs.singleTable.setCurrentRow(),this.$message({message:"拟启动时刻要大于等于订单拟启动时刻",type:"warning",duration:5e3,showClose:!0})),e.picker_date.length>0&&this.$refs.singleTable.setCurrentRow()}else this.$set(e,"picker_date1",""),this.$set(e,"plstatime",""),this.$set(e,"plendtime","")},onePlanSure:function(){var t={},e=[],a=!1,i=!0,n=!1,o=void 0;try{for(var s,r=l()(this.onePlanData.proplan);!(i=(s=r.next()).done);i=!0){var c=s.value,d={};d.id=c.id,d.plendtime=c.plendtime,d.plstatime=c.plstatime,d.plstatime&&d.plendtime&&(a=!0),e.push(d)}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}a?(t.submit="1",t.proplan=e,this.initPlan(this.onePlanId,t)):this.$message({message:"请至少为一个零件设置计划日期",type:"warning"})},clearAllId:function(){this.partAllId=[],this.$refs.partsTable.clearSelection()},handleEditUpload:function(t,e){this.dialogVisibleUpload=!0,this.productionId=e.id,void 0!==this.$refs.upload&&this.$refs.upload.clearFiles(),this.initPicArr()},submitUpload:function(){this.$refs.upload.submit()},handleRemove:function(t,e){},handlePreview:function(t){},handleExceed:function(t,e){this.$message.warning("当前限制选择 9个文件，本次选择了 "+t.length+" 个文件，共选择了 "+(t.length+e.length)+" 个文件")},myUpload:function(t){var e=this,a=new FormData;a.append("plenid",this.productionId),a.append("file",t.file),he(a).then(function(a){t.onSuccess("上传成功"),e.initPicArr()}).catch(function(a){t.onError("上传失败"),e.$message({message:a.response.data.message,type:"warning"})})},initPicArr:function(){var t=this,e={};e.plenid=this.productionId,this.picarrData=[],this.shipingArrData=[],ve(e).then(function(e){t.picarrData=e.data.images,t.shipingArrData=e.data.videos}).catch(function(t){})},delPic:function(t){var e=this,a={};a.plenid=this.productionId,a.filepath=t,me(a).then(function(t){e.$message({message:"删除成功",type:"success"}),e.initPicArr()}).catch(function(t){})},handleClosePic:function(){this.dialogVisibleUpload=!1,this.initPlan(this.onePlanId)},handleSetOk:function(t,e){var a=this,i="",n=!0,o=!1,s=void 0;try{for(var r,c=l()(this.onePlanDataCopy.proplan);!(n=(r=c.next()).done);n=!0){var d=r.value;d.id==e.id&&(i=d.plendtime)}}catch(t){o=!0,s=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw s}}null==i?this.$message({message:"请先设置计划日期，点击确定提交",type:"warning"}):this.$confirm("你确定生成完成","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={};t.plenid=e.id,fe(t).then(function(t){e.realedate=t.data.realedate.split(" ")[0],a.$message({message:"生产完成",type:"success"});var i=0,n=a.onePlanData.proplan.length,o=!0,s=!1,r=void 0;try{for(var c,d=l()(a.onePlanData.proplan);!(o=(c=d.next()).done);o=!0){c.value.realedate&&(i+=1)}}catch(t){s=!0,r=t}finally{try{!o&&d.return&&d.return()}finally{if(s)throw r}}i==n&&(a.planButtonShow=!0),a.initbook(a.searchData)}).catch(function(t){})}).catch(function(){})},handleSetOkSure:function(){},handleSeeBook:function(t,e){var a=this;_e(e.id).then(function(t){a.dialogVisibleBookChakan=!0,a.oneData=t.data;var e=!0,i=!1,n=void 0;try{for(var o,s=l()(a.oneData.parts);!(e=(o=s.next()).done);e=!0){var r=o.value;console.log(r.volume_size),r.volume_size=JSON.parse(r.volume_size),r.start_date&&(r.start_date=r.start_date.split(" ")[0]),r.jh_data&&(r.jh_data=r.jh_data.split(" ")[0]),r.due_date&&(r.due_date=r.due_date.split(" ")[0])}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}}).catch(function(t){})}},created:function(){this.initTechnology(),this.initManage(),this.initAllMateria(),this.initAllEquipment(),this.searchData.page=1,this.initDepusers()},mounted:function(){this.searchData.page=1;var t=f.a.get("actionArr");t=JSON.parse(t);var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){"add"==n.value&&(this.addShow="true",this.initParts(this.searchData))}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}this.addShow||(this.activeName="second",this.initbook(this.searchData))}},be=(a("BMdL"),Object(g.a)(ge,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"productionP"},[a("el-dialog",{attrs:{title:"批量设置零件计划时刻",visible:t.dialogVisibleTime,width:"450px","before-close":t.handleCloseTime},on:{"update:visible":function(e){t.dialogVisibleTime=e}}},[a("p",[t._v("设置 拟启动时刻 - 拟完工时刻")]),t._v(" "),a("p",[a("el-date-picker",{attrs:{type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["12:00:00","12:00:00"],"value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.plTime,callback:function(e){t.plTime=e},expression:"plTime"}})],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleTime=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.setManyTimeSure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"生产任务书",visible:t.dialogVisibleBookChakan,width:"80%","before-close":t.handleClose,top:"5vh"},on:{"update:visible":function(e){t.dialogVisibleBookChakan=e}}},[a("el-row",{staticClass:"b-title"},[t._v("\n\t\t\t生产任务书"),a("br"),t._v("\n\t\t\t供需方信息区域\n\t\t")]),t._v(" "),a("el-row",{staticClass:"b-row b-row-m"},[t._v("\n\t\t\t生产任务书编号 : "+t._s(t.oneData.no)+"\n\t\t\t"),a("br"),t._v("\n\t\t\t日期  : "+t._s(t.oneData.created_at)+"\n\t\t")]),t._v(" "),a("el-row",{staticClass:"erweima"},[t._v("\n\t\t\t生产任务书二维码 : "),a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.oneData.qrcode_url,alt:""}})]),t._v(" "),a("el-row",{staticClass:"b-row b-row-m"},[t._v("收货方 : "+t._s(t.oneData.cusname))]),t._v(" "),a("el-row",{staticClass:"b-row b-row-m"},[t._v("\n\t\t\t制作方  : "),a("br"),t._v("\n\t\t\t销售工程师  : "+t._s(t.oneData.saler?t.oneData.saler.name:"")+"    "+t._s(t.oneData.saler?t.oneData.saler.phone:"")),a("br"),t._v("\n\t\t\t项目工程师  : "+t._s(t.oneData.pojer?t.oneData.pojer.name:"")+"    "+t._s(t.oneData.pojer?t.oneData.pojer.phone:"")),a("br"),t._v("\n\t\t\t项目经理  : "+t._s(t.oneData.manger?t.oneData.manger.name:"")+"    "+t._s(t.oneData.manger?t.oneData.manger.phone:"")),a("br"),t._v("\n\t\t\t生产工程师  : "+t._s(t.oneData.prouse_id?t.oneData.prouse_id.name:"")+"    "+t._s(t.oneData.prouse_id?t.oneData.prouse_id.phone:"")),a("br")]),t._v(" "),a("el-row",{staticClass:"b-row-t"},[t._v("\n\t\t\t零件清单区域\n\t\t")]),t._v(" "),a("el-row",[a("el-table",{ref:"singleTable",staticClass:"tb-edit",staticStyle:{width:"100%"},attrs:{data:t.oneData.parts,border:"","tooltip-effect":"dark","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange,"row-click":t.handleCurrentChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"简图",align:"center",prop:"diagram"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("img",{attrs:{src:e.row.diagram,alt:"",width:"200px"}}),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("简图")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"volume_size",label:"体积尺寸",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("div",[t._v("长 : "+t._s(e.row.volume_size.xx)+"mm 宽 : "+t._s(e.row.volume_size.zz)+"mm 高 : "+t._s(e.row.volume_size.yy)+"mm 体积 : "+t._s(e.row.volume_size.volume)+"mm³")]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("尺寸")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"modname",label:"成型工艺",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"equname",label:"成型设备",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"matname",label:"成型设备",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"surname",label:"表面处理",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"product_num",label:"数量",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[e.row.remark?a("div",{staticStyle:{width:"150px"}},[t._v(t._s(e.row.remark))]):t._e(),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("备注")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"requirements",label:"处理要求",align:"center",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[e.row.requirements?a("div",{staticStyle:{width:"150px"}},[t._v(t._s(e.row.requirements))]):t._e(),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("处理要求")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orderno",label:"订单号",align:"center",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"start_date",label:"订单拟启动时刻",align:"center",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"due_date",label:"拟到货时刻",align:"center",width:"180"}})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleBookChakan=!1}}},[t._v("关闭")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"上传界面",visible:t.dialogVisibleUpload,width:"550px","before-close":t.handleClosePic},on:{"update:visible":function(e){t.dialogVisibleUpload=e}}},[a("div",{staticStyle:{"margin-bottom":"5px"}},[t._v("已上传成功图片显示")]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"5px"}},[a("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},t._l(t.picarrData,function(e){return a("span",{staticClass:"picbg",staticStyle:{position:"relative",width:"100px",height:"100px",overflow:"hidden",border:"1px solid #D6D6D6",padding:"10px",display:"flex","justify-content":"cneter","align-items":"center","margin-right":"2px","margin-top":"1px"}},[a("a",{attrs:{href:e,target:"_blank"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e,alt:""}})]),a("i",{staticClass:"el-icon-circle-close-outline ",staticStyle:{position:"absolute",top:"2px","z-index":"10",right:"2px",color:"lightblue",cursor:"pointer"},on:{click:function(a){t.delPic(e)}}}),t._v(" \n\t\t\t")])}))]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"5px"}},[t._v("已上传成功视频显示")]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"5px"}},[a("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},t._l(t.shipingArrData,function(e){return a("span",{staticClass:"picbg",staticStyle:{position:"relative",width:"175px",height:"165px",overflow:"hidden",border:"1px solid #D6D6D6",padding:"10px",display:"flex","justify-content":"cneter","align-items":"center","margin-right":"2px","margin-top":"1px"}},[a("video",{staticStyle:{width:"150px",height:"150px"},attrs:{src:e,controls:"controls"}}),t._v(" "),a("i",{staticClass:"el-icon-circle-close-outline ",staticStyle:{position:"absolute",top:"2px","z-index":"10",right:"2px",color:"lightblue",cursor:"pointer"},on:{click:function(a){t.delPic(e)}}}),t._v(" \n\t\t\t")])}))]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"5px"}},[t._v("上传区域")]),t._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo upSear",attrs:{action:"https://jsonplaceholder.typicode.com/posts/","http-request":t.myUpload,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"file-list":t.fileList,limit:9,"on-exceed":t.handleExceed,"auto-upload":!1,"before-upload":t.beforeAvatarUpload,multiple:""}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("上传文件")])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.handleClosePic}},[t._v("确定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisibleDelPart,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleDelPart=e}}},[a("span",[t._v("你确定要删除")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleDelPart=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.delPartSure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisibleBook,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisibleBook=e}}},[a("span",[t._v("确定要生成:生产任务书")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisibleBook=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleEditBookSure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"生产计划",visible:t.dialogVisible1,width:"1000px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible1=e}}},[a("el-row",{staticClass:"b-title"},[t._v("生产计划")]),t._v(" "),a("el-row",{staticClass:"b-row-m b-row"},[t._v("\n\t  \t生产任务书编号  :"+t._s(t.onePlanData.no)+" "),a("br"),t._v("\n\t  \t日期 : "+t._s(t.onePlanData.created_at)+"\n\t  ")]),t._v(" "),a("el-row",[a("el-button",{attrs:{type:"success"},on:{click:t.setManyTime}},[t._v("批量设置零件计划时刻")])],1),t._v(" "),a("el-row",{staticClass:"b-row-m b-row"},[a("el-table",{ref:"singleTable",staticClass:"tb-edit",staticStyle:{width:"100%"},attrs:{data:t.onePlanData.proplan,border:"","tooltip-effect":"dark","highlight-current-row":""},on:{"row-click":t.handleCurrentChange,"selection-change":t.handleSelectionPlanPart}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{label:"名称",align:"center",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{style:{color:e.row.name.indexOf("-重做")>0?"blue":"#444"}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"简图",align:"center",prop:"diagram",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("img",{attrs:{src:e.row.diagram,alt:"",width:"200px"}}),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("简图")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"尺寸",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("div",[t._v("长 : "+t._s(e.row.volume_size.xx)+"mm 宽 : "+t._s(e.row.volume_size.zz)+"mm 高 : "+t._s(e.row.volume_size.yy)+"mm 体积 : "+t._s(e.row.volume_size.volume)+"mm³")]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("尺寸")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"modname",label:"成型工艺",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"equname",label:"成型设备",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"matname",label:"成型材质",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"surname",label:"成型材质",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"product_num",label:"数量",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"requirements",label:"处理要求",align:"center",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[e.row.requirements?a("div",[t._v(t._s(e.row.requirements))]):t._e(),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("处理要求")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orderno",label:"订单号",align:"center",width:"165"}}),t._v(" "),a("el-table-column",{attrs:{prop:"start_date",label:"订单拟启动时刻",align:"center",width:"160"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"拟启动时刻/拟完工时刻",width:"350","render-header":t.renderheader},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"date-show"},[e.row.realedate?t._e():a("span",[a("el-date-picker",{attrs:{"unlink-panels":"",type:"datetimerange","start-placeholder":"拟启动时刻","end-placeholder":"拟完工时刻","default-time":["12:00:00","12:00:00"],"value-format":"yyyy-MM-dd HH:mm:ss"},on:{change:function(a){return t.pickerDate(a,e.row)}},model:{value:e.row.picker_date,callback:function(a){t.$set(e.row,"picker_date",a)},expression:"scope.row.picker_date"}})],1),t._v(" "),e.row.realedate?a("span",[t._v(t._s(e.row.picker_date[0])),a("br"),t._v(t._s(e.row.picker_date[1]))]):t._e()]),t._v(" "),a("span",[t._v(t._s(e.row.plstatime)),a("br"),t._v(t._s(e.row.plendtime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.realedate?a("span",[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleEditUpload(e.$index,e.row)}}},[t._v("上传图片,视频")]),t._v(" "),e.row.picNum?a("span",{staticStyle:{display:"block","font-size":"12px"}},[t._v("已上传图片 "+t._s(e.row.picNum)+" 张")]):t._e(),t._v(" "),e.row.vidNum?a("span",{staticStyle:{display:"block","font-size":"12px"}},[t._v("已上传视频 "+t._s(e.row.vidNum)+" 个")]):t._e()],1):t._e(),t._v(" "),e.row.endTimeShow?a("span",[e.row.realedate?t._e():a("span",[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleSetOk(e.$index,e.row)}}},[t._v("生产完成")])],1)]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"realedate",label:"实际完工时刻",align:"center",width:"160"}})],1),t._v(" "),t.planButtonShow?t._e():a("div",[t.endTimeShow?a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.planAllPartSure()}}},[t._v("批量生产完成")])],1):t._e()])],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"planLoading"},[t.planButtonShow?a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible1=!1}}},[t._v("关闭")]):t._e(),t._v(" "),t.planButtonShow?t._e():a("el-button",{on:{click:function(e){t.dialogVisible1=!1}}},[t._v("取 消")]),t._v(" "),t.planButtonShow?t._e():a("el-button",{attrs:{type:"primary"},on:{click:t.onePlanSure}},[t._v("确 定")])],1)])],1),t._v(" "),a("el-dialog",{attrs:{title:"生产任务书",visible:t.dialogVisible,width:"1000px","before-close":t.handleClose,top:"5vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-row",{staticClass:"b-title"},[t._v("\n\t  \t生产任务书"),a("br"),t._v("\n\t  \t供需方信息区域\n\t  ")]),t._v(" "),a("el-row",{staticClass:"b-row b-row-m"},[t._v("\n\t  \t生产任务书 编号 : "+t._s(t.oneData.no)+"\n\t  \t"),a("br"),t._v("\n\t  \t日期  : "+t._s(t.oneData.created_at)+"\n\t  ")]),t._v(" "),a("el-row",{staticClass:"b-row b-row-m"},[t._v("收货方 : "+t._s(t.oneData.cusname))]),t._v(" "),a("el-row",{staticClass:"b-row b-row-m"},[t._v("\n\t  \t制作方  : "),a("br"),t._v("\n\t  \t销售工程师  : "+t._s(t.oneData.saler?t.oneData.saler.name:"")+"    "+t._s(t.oneData.saler?t.oneData.saler.phone:"")),a("br"),t._v("\n\t  \t项目工程师  : "+t._s(t.oneData.pojer?t.oneData.pojer.name:"")+"    "+t._s(t.oneData.pojer?t.oneData.pojer.phone:"")),a("br"),t._v("\n\t  \t项目经理   : "+t._s(t.oneData.manger?t.oneData.manger.name:"")+"    "+t._s(t.oneData.manger?t.oneData.manger.phone:"")),a("br")]),t._v(" "),a("el-row",{staticClass:"b-row-t"},[t._v("\n\t  \t零件清单区域\n\t  ")]),t._v(" "),a("el-row",[t._v("\n\t\t\t生产工程师 : "),a("el-select",{staticClass:"select-widths",attrs:{size:"small",placeholder:"生产工程师"},model:{value:t.oneData.prouid,callback:function(e){t.$set(t.oneData,"prouid",e)},expression:"oneData.prouid"}},t._l(t.depusersList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),a("el-table",{ref:"singleTable",staticClass:"tb-edit",staticStyle:{width:"100%"},attrs:{data:t.oneData.parts,border:"","tooltip-effect":"dark","highlight-current-row":""},on:{"selection-change":t.handleSelectionChange,"row-click":t.handleCurrentChange}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"名称",align:"center",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{label:"简图",align:"center",prop:"diagram",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("img",{attrs:{src:e.row.diagram,alt:"",width:"200px"}}),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("简图")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"volume_size",label:"体积尺寸",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("div",[t._v("长 : "+t._s(e.row.volume_size.xx)+"mm 宽 : "+t._s(e.row.volume_size.zz)+"mm 高 : "+t._s(e.row.volume_size.yy)+"mm 体积 : "+t._s(e.row.volume_size.volume)+"mm³")]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("尺寸")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"modname",label:"成型工艺",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"equname",label:"成型设备",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"matname",label:"成型设备",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"surname",label:"表面处理",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"product_num",label:"数量",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("div",[t._v(t._s(e.row.remark))]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("备注")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"reqmen",label:"处理要求",align:"center",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:e.row.reqmen,callback:function(a){t.$set(e.row,"reqmen",a)},expression:"scope.row.reqmen"}}),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("处理要求")])],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orderno",label:"订单号",align:"center",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"start_date",label:"订单拟启动时刻",align:"center",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"due_date",label:"拟到货时刻",align:"center",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"mini"},on:{click:function(a){t.handleDelPart(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"bookLoading"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.getBookSure}},[t._v("确 定")])],1)])],1),t._v(" "),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t.addShow?a("el-tab-pane",{attrs:{label:"待加工零件",name:"first"}},[a("el-row",{staticClass:"mb"},[a("el-col",{attrs:{span:8}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"客户名称","prefix-icon":"el-icon-search"},model:{value:t.searchData.sear,callback:function(e){t.$set(t.searchData,"sear",e)},expression:"searchData.sear"}}),t._v(" "),a("el-button",{on:{click:function(e){t.searchSure("parts")}}},[t._v("搜索")]),t._v(" "),a("el-button",{on:{click:function(e){t.initParts(t.searchData)}}},[t._v("刷新列表")])],1),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:16}},[a("el-select",{staticClass:"input-width",attrs:{placeholder:"成型工艺",clearable:""},on:{change:t.selectTechnology},model:{value:t.searchData.mold,callback:function(e){t.$set(t.searchData,"mold",e)},expression:"searchData.mold"}},t._l(t.technologyList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v("\n\t\t\t\t\t  \n\t\t\t\t\t"),a("el-select",{staticClass:"input-width",attrs:{placeholder:"成型设备",clearable:""},model:{value:t.searchData.equi,callback:function(e){t.$set(t.searchData,"equi",e)},expression:"searchData.equi"}},t._l(t.equipmentList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v("\n\t\t\t\t\t  \n\t\t\t\t\t"),a("el-select",{staticClass:"input-width",attrs:{placeholder:"成型材质",clearable:""},model:{value:t.searchData.mate,callback:function(e){t.$set(t.searchData,"mate",e)},expression:"searchData.mate"}},t._l(t.materialList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),a("el-select",{staticClass:"input-width",attrs:{placeholder:"表面处理",clearable:""},model:{value:t.searchData.surf,callback:function(e){t.$set(t.searchData,"surf",e)},expression:"searchData.surf"}},t._l(t.surfaceList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v("\n\t\t\t\t\t  \n\t\t\t\t\t "),a("el-date-picker",{staticClass:"input-width",attrs:{type:"date",placeholder:"选择日期"},model:{value:t.searchData.edat,callback:function(e){t.$set(t.searchData,"edat",e)},expression:"searchData.edat"}})],1)],1),t._v(" "),a("el-row",{staticClass:"mb"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingPart,expression:"loadingPart"}],ref:"partsTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","tooltip-effect":"dark","element-loading-text":"加载中...."},on:{"selection-change":t.handleSelectionChangeParts}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{style:{color:e.row.name.indexOf("-重做")>0?"blue":"#444"}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"简图",align:"center",prop:"diagram"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("img",{attrs:{src:e.row.diagram,alt:"",width:"200px"}}),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("简图")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"尺寸",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("div",[t._v("长 : "+t._s(e.row.volume_size.xx)+"mm 宽 : "+t._s(e.row.volume_size.zz)+"mm 高 : "+t._s(e.row.volume_size.yy)+"mm 体积 : "+t._s(e.row.volume_size.volume)+"mm³")]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("尺寸")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"modname",label:"成型工艺",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"equname",label:"成型设备",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"matname",label:"成型材质",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"surname",label:"表面处理",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"product_num",label:"数量",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cusname",label:"客户名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderno",label:"订单号",align:"center",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.handleEditBook(e.$index,e.row)}}},[t._v("生产")])]}}])})],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-button",{on:{click:t.clearAllId}},[t._v("清空零件选择")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.addBook}},[t._v("批量生产")])],1),t._v(" "),a("el-col",{staticStyle:{display:"flex","justify-content":"flex-end"},attrs:{span:16}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,total:t.linmitTotal,layout:"total, prev, pager, next, jumper",background:""},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChangePage}})],1)],1)],1):t._e(),t._v(" "),a("el-tab-pane",{attrs:{label:"生产任务书",name:"second"}},[a("el-row",{staticClass:"mb"},[a("el-col",{attrs:{span:8}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"客户名称","prefix-icon":"el-icon-search"},model:{value:t.searchData.sear,callback:function(e){t.$set(t.searchData,"sear",e)},expression:"searchData.sear"}}),t._v(" "),a("el-button",{on:{click:function(e){t.searchSure("book")}}},[t._v("搜索")]),t._v(" "),a("el-button",{on:{click:function(e){t.initbook(t.searchData)}}},[t._v("刷新列表")])],1),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:16}},[a("el-select",{staticClass:"input-width",attrs:{placeholder:"成型工艺",clearable:""},on:{change:t.selectTechnology},model:{value:t.searchData.mold,callback:function(e){t.$set(t.searchData,"mold",e)},expression:"searchData.mold"}},t._l(t.technologyList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v("\n\t\t\t\t\t  \n\t\t\t\t\t"),a("el-select",{staticClass:"input-width",attrs:{placeholder:"成型设备",clearable:""},model:{value:t.searchData.equi,callback:function(e){t.$set(t.searchData,"equi",e)},expression:"searchData.equi"}},t._l(t.equipmentList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v("\n\t\t\t\t\t  \n\t\t\t\t\t"),a("el-select",{staticClass:"input-width",attrs:{placeholder:"成型材质",clearable:""},model:{value:t.searchData.mate,callback:function(e){t.$set(t.searchData,"mate",e)},expression:"searchData.mate"}},t._l(t.materialList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v("\n\t\t\t\t\t  \n\t\t\t\t\t"),a("el-select",{staticClass:"input-width",attrs:{placeholder:"表面处理",clearable:""},model:{value:t.searchData.surf,callback:function(e){t.$set(t.searchData,"surf",e)},expression:"searchData.surf"}},t._l(t.surfaceList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v("\n\t\t\t\t\t  \n\t\t\t\t\t"),a("el-select",{staticClass:"input-width",attrs:{placeholder:"状态",clearable:""},model:{value:t.searchData.stat,callback:function(e){t.$set(t.searchData,"stat",e)},expression:"searchData.stat"}},t._l(t.bookListStatus,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v("\n\t\t\t\t\t  \n\t\t\t\t\t "),a("el-date-picker",{staticClass:"input-width",attrs:{type:"date",placeholder:"选择日期"},model:{value:t.searchData.jhdt,callback:function(e){t.$set(t.searchData,"jhdt",e)},expression:"searchData.jhdt"}})],1)],1),t._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingBook,expression:"loadingBook"}],ref:"singleTable",staticStyle:{width:"100%"},attrs:{data:t.bookTableData,border:"","tooltip-effect":"dark","element-loading-text":"加载中...."},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"expand",width:"55"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.parts,border:""}},[a("el-table-column",{attrs:{align:"center",label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{style:{color:e.row.name.indexOf("-重做")>0?"blue":"#444"}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orderno",align:"center",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"modname",align:"center",label:"工艺"}}),t._v(" "),a("el-table-column",{attrs:{prop:"equname",align:"center",label:"设备"}}),t._v(" "),a("el-table-column",{attrs:{prop:"matname",align:"center",label:"材质"}}),t._v(" "),a("el-table-column",{attrs:{prop:"surname",align:"center",label:"表面处理"}}),t._v(" "),a("el-table-column",{attrs:{prop:"product_num",align:"center",label:"数量"}}),t._v(" "),a("el-table-column",{attrs:{label:"简图",align:"center",prop:"diagram"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("img",{attrs:{src:e.row.diagram,alt:"",width:"200px"}}),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("简图")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"尺寸",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("div",[t._v("长 : "+t._s(e.row.volume_size.xx)+"mm 宽 : "+t._s(e.row.volume_size.zz)+"mm 高 : "+t._s(e.row.volume_size.yy)+"mm 体积 : "+t._s(e.row.volume_size.volume)+"mm³")]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("尺寸")])],1)])]}}])})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cusname",label:"客户名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"no",label:"任务书编号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t\t"+t._s("0"==e.row.status?"未开始":1==e.row.status?"正在生产":"生产结束")+"\n\t\t\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){t.handleSeeBook(e.$index,e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.handleJh(e.$index,e.row)}}},[t._v("生产计划")])]}}])})],1)],1),t._v(" "),a("el-row",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"10px"}},[a("el-pagination",{attrs:{"current-page":t.currentPageBook,"page-size":t.pageSizeBook,total:t.linmitTotalBook,layout:"total, prev, pager, next, jumper",background:""},on:{"size-change":t.handleSizeChangeBook,"current-change":t.handleCurrentChangePageBook}})],1)],1)],1)],1)},[],!1,null,null,null));be.options.__file="productions.vue";var ye=be.exports;function we(t){return Object(re.a)({url:"api/depot/parts/list",method:"get",params:t})}function De(t){var e=t;return Object(re.a)({url:"api/depot/parts/send",method:"post",data:e})}function xe(t){return Object(re.a)({url:"api/express/list",method:"get",params:t})}function ke(t){var e=t;return Object(re.a)({url:"api/express/chech",method:"post",data:e})}function Se(t){return Object(re.a)({url:"api/depot/delin/list",method:"get",params:t})}function Ce(t){var e=t;return Object(re.a)({url:"api/depot/setok",method:"post",data:e})}function Pe(t,e){return Object(re.a)({url:"api/depot/get/"+t,method:"get",params:e})}var $e={data:function(){return{loadingPart:!1,loadingOrder:!1,activeName:"first",searchData:{},oneData:{},dialogVisible:!1,dialogVisible1:!1,dialogVisible2:!1,options:[{label:"已完成生产未发货",value:2},{label:"已分批发货",value:3},{label:"发货完成",value:4}],options1:[{label:"已发货",value:0},{label:"客户已收货",value:1},{label:"发货完成",value:2}],tableData:[{id:1},{id:2}],tableData1:[{id:1}],currentPage:1,pageSize:5,linmitTotal:20,partAllCurrentId:[],partAllId:[],orderAllCurrentId:[],orderAllId:[],expressList:[],currentPageOrder:1,pageSizeOrder:5,linmitTotalOrder:20,orderSureObj:{},dismodShowIf:!0,wulliuArr:[],showSH:!0,dayingData:{},dialogVisibleChakan:!1}},methods:{initDelin:function(t){var e=this,a=this.orderAllId.slice();this.loadingOrder=!0,Se(t).then(function(t){e.tableData1=t.data.data,e.pageSizeOrder=5,e.currentPageOrder=t.data.current_page,e.linmitTotalOrder=t.data.total,e.orderAllCurrentId=[];var i=!0,n=!1,o=void 0;try{for(var s,r=l()(e.tableData1);!(i=(s=r.next()).done);i=!0){var c=s.value;e.orderAllCurrentId.push(c.id)}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}e.$nextTick(function(){var t=!0,e=!1,i=void 0;try{for(var n,o=l()(a);!(t=(n=o.next()).done);t=!0){var s=n.value,r=!0,c=!1,d=void 0;try{for(var u,p=l()(this.tableData1.entries());!(r=(u=p.next()).done);r=!0){var h=u.value,v=se()(h,2),m=v[0];v[1];s==this.tableData1[m].id&&this.$refs.orderTable.toggleRowSelection(this.tableData1[m],!0)}}catch(t){c=!0,d=t}finally{try{!r&&p.return&&p.return()}finally{if(c)throw d}}}}catch(t){e=!0,i=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw i}}}),e.loadingOrder=!1}).catch(function(t){console.log(t)})},initParts:function(t){var e=this;this.loadingPart=!0;var a=this.partAllId.slice(),i=[{value:0,label:"等待生产"},{value:1,label:"生产中"},{value:2,label:"生产完成"},{value:3,label:"已分批发货"},{value:4,label:"发货完成"}];we(t).then(function(t){e.tableData=t.data.data,e.pageSize=5,e.currentPage=t.data.current_page,e.linmitTotal=t.data.total,e.partAllCurrentId=[];var n=!0,o=!1,s=void 0;try{for(var r,c=l()(e.tableData);!(n=(r=c.next()).done);n=!0){var d=r.value;d.due_date&&(d.due_date=d.due_date.split(" ")[0]),e.partAllCurrentId.push(d.id);var u=!0,p=!1,h=void 0;try{for(var v,m=l()(i);!(u=(v=m.next()).done);u=!0){var f=v.value;d.status==f.value&&(d.status=f.label)}}catch(t){p=!0,h=t}finally{try{!u&&m.return&&m.return()}finally{if(p)throw h}}}}catch(t){o=!0,s=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw s}}e.$nextTick(function(){var t=!0,e=!1,i=void 0;try{for(var n,o=l()(a);!(t=(n=o.next()).done);t=!0){var s=n.value,r=!0,c=!1,d=void 0;try{for(var u,p=l()(this.tableData.entries());!(r=(u=p.next()).done);r=!0){var h=u.value,v=se()(h,2),m=v[0];v[1];s==this.tableData[m].id&&this.$refs.partsTable.toggleRowSelection(this.tableData[m],!0)}}catch(t){c=!0,d=t}finally{try{!r&&p.return&&p.return()}finally{if(c)throw d}}}}catch(t){e=!0,i=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw i}}}),e.loadingPart=!1}).catch(function(t){console.log("获取已完成零件列表失败")})},initSendOrder:function(t){var e=this;De(t).then(function(t){if("100"==t.data.code)e.$message({message:t.data.msg,type:"warning"});else{e.dialogVisible=!0,e.oneData=r()({},t.data),e.$set(e.oneData,"dismod","快递"),e.dismodShowIf=!0,t.data.savefax?e.$set(e.oneData,"express_code",t.data.savefax):e.$set(e.oneData,"express_code","");var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.oneData.parts);!(a=(o=s.next()).done);a=!0){var c=o.value;c.volume_size=JSON.parse(c.volume_size),c.due_date&&(c.due_date=c.due_date.split(" ")[0])}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}}).catch(function(t){console.log("发货单失败")})},handleClick:function(t){"已完成零件"===t.label?(this.searchData={},this.searchData.page=1,this.initParts(this.searchData)):(this.searchData={},this.searchData.page=1,this.initDelin(this.searchData))},handleSearch:function(t){1==t?(this.searchData.page=1,this.initParts(this.searchData)):(this.searchData.page=1,this.initDelin(this.searchData))},handleSent:function(t,e){if(this.dismodShowIf=!0,e){var a=[];a.push(e.id);var i={parts:a};this.initSendOrder(i)}else{var n={parts:this.partAllId};this.initSendOrder(n)}},handleSelectionChange:function(t){},handleClose:function(){this.dialogVisible=!1,this.dialogVisible1=!1,this.dialogVisible2=!1,this.dialogVisibleChakan=!1},handlePrinting:function(t,e){var a=this;Pe(e.id).then(function(t){a.dayingData=t.data;var e=!0,i=!1,n=void 0;try{for(var o,s=l()(a.dayingData.parts);!(e=(o=s.next()).done);e=!0){var r=o.value;r.volume_size=JSON.parse(r.volume_size)}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}a.$nextTick(function(){this.handlePrintingSure()})}).catch(function(t){console.log("获取打印数据失败")})},handlePrintingSure:function(){var t=window.open("_blank"),e=document.getElementById("subOutputRank-print").innerHTML;return t.document.write(e),t.document.close(),t.print(),t.close(),!0},handleSendSure:function(){var t=this;Ce(r()({},this.orderSureObj)).then(function(e){t.dialogVisible2=!1,t.orderAllId=[],t.$nextTick(function(){this.$refs.orderTable.clearSelection()}),t.initDelin(t.searchData),t.$message({message:"发货单完成",type:"success"})}).catch(function(t){console.log("发货单完成提交失败")})},handleCurrentChangePage:function(t){this.searchData.page=t,this.initParts(this.searchData)},handleSelectionChangeParts:function(t,e){for(var a=this.partAllCurrentId.slice(),i=0;i<t.length;i++)this.partAllId.push(t[i].id);a.sort(),this.partAllId.sort();for(var n=0;n<t.length;n++)for(var o=0;o<a.length;o++)t[n].id==a[o]&&a.splice(o,1);this.partAllId=[].concat(oe()(new ie.a(this.partAllId))),a.sort(),this.partAllId.sort();for(var l=0;l<this.partAllId.length;l++)for(var s=0;s<a.length;s++)a[s]==this.partAllId[l]&&this.partAllId.splice(l,1)},handleSelectionChangeOrder:function(t,e){for(var a=this.orderAllCurrentId.slice(),i=0;i<t.length;i++)this.orderAllId.push(t[i].id);a.sort(),this.orderAllId.sort();for(var n=0;n<t.length;n++)for(var o=0;o<a.length;o++)t[n].id==a[o]&&a.splice(o,1);this.orderAllId=[].concat(oe()(new ie.a(this.orderAllId))),a.sort(),this.orderAllId.sort();for(var l=0;l<this.orderAllId.length;l++)for(var s=0;s<a.length;s++)a[s]==this.orderAllId[l]&&this.orderAllId.splice(l,1)},sureSendOrder:function(){var t=this,e=r()({},this.oneData);if("快递"==e.dismod){if(e.dismod=0,!e.express_code||!e.express_no)return void this.$message({message:"请输入快递公司和单号",type:"warning"})}else if("自送"==e.dismod)e.dismod=1;else{if("自提"!=e.dismod)return void this.$message({message:"请选择发货方式",type:"warning"});e.dismod=2}var a=!0,i=!1,n=void 0;try{for(var o,s=l()(this.expressList);!(a=(o=s.next()).done);a=!0){var c=o.value;e.express_code==c.value&&(e.express_name=c.label)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}var d=!0,u=!1,p=void 0;try{for(var h,v=l()(e.parts);!(d=(h=v.next()).done);d=!0){var m=h.value;delete m.diagram,m.yscount||(m.yscount=m.product_num-m.yscounta)}}catch(t){u=!0,p=t}finally{try{!d&&v.return&&v.return()}finally{if(u)throw p}}e.submit="1";var f=this.$loading({lock:!0,text:"提交中，请等待",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:document.querySelector(".send")});De(e).then(function(e){100==e.data.code?(t.$message({message:e.data.msg,type:"warning"}),f.close()):(t.$message({message:"发货单提交成功",type:"success"}),t.searchData.page=1,t.initParts(t.searchData),t.dialogVisible=!1,t.clearParts(),f.close())}).catch(function(t){console.log("发货单提交失败"),f.close()})},clearParts:function(){this.partAllId=[],this.$nextTick(function(){this.$refs.partsTable.clearSelection()})},handleCurrentChangePageOrder:function(t){this.searchData.page=t,this.initDelin(this.searchData)},dismodShow:function(t){"自送"==t?(this.dismodShowIf=!1,this.$set(this.oneData,"express_no",""),this.$set(this.oneData,"express_code","")):"自提"==t?(this.dismodShowIf=!1,this.$set(this.oneData,"express_no",""),this.$set(this.oneData,"express_code","")):this.dismodShowIf=!0},sendNum:function(t,e){var a=e.product_num-Number(e.yscounta);t&&Number(t)>a&&(this.$message({message:"最大数量为"+a,type:"warning"}),this.$set(e,"yscount",a)),e.yscount&&this.$refs.singleTable.setCurrentRow()},cellHover:function(t){var e=this,a={};a.shipperCode=t.express_code,a.logisticCode=t.express_no,ke(a).then(function(t){0==t.data.length?(e.wulliuArr=[],e.$message({message:"无物流信息",type:"warning"})):"无物流信息"==t.data?(e.wulliuArr=[],e.$message({message:"无物流信息",type:"warning"})):e.wulliuArr=t.data}).catch(function(t){})},handleChakan:function(t,e){var a=this;Pe(e.id).then(function(t){a.dayingData=t.data;var e=!0,i=!1,n=void 0;try{for(var o,s=l()(a.dayingData.parts);!(e=(o=s.next()).done);e=!0){var r=o.value;r.volume_size=JSON.parse(r.volume_size)}}catch(t){i=!0,n=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw n}}a.$nextTick(function(){this.dialogVisibleChakan=!0})}).catch(function(t){console.log("打印数据获取失败")})}},mounted:function(){var t=this;this.searchData={},this.searchData.page=1,this.initParts(this.searchData),xe().then(function(e){t.expressList=[];var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.data);!(a=(o=s.next()).done);a=!0){var r=o.value,c={};c.label=r.exname,c.value=r.code,t.expressList.push(c)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}).catch(function(t){console.log("快递列表获取失败")})}},ze=(a("VE5C"),Object(g.a)($e,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wareHousePc"},[a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible2,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible2=e}}},[a("span",[t._v("你确定要完成")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible2=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleSendSure}},[t._v("确 定")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:"查看",visible:t.dialogVisibleChakan,width:"850px","before-close":t.handleClose,top:"4vh"},on:{"update:visible":function(e){t.dialogVisibleChakan=e}}},[a("div",{staticStyle:{display:"block"}},[a("div",{staticClass:"send_main"},[a("div",{staticClass:"send_main_title"},[t._v("发货单")]),t._v(" "),a("div",{staticClass:"send_line_height"},[t._v("报价单号 : "+t._s(t.dayingData.no))]),t._v(" "),a("div",{staticClass:"send_line_height"},[t._v("发货单二维码")]),t._v(" "),a("div",[a("img",{staticStyle:{width:"100px"},attrs:{src:t.dayingData.qrcode_url,alt:""}})]),t._v(" "),a("div",{staticClass:"send_line_height"},[t._v("客户名称 : "+t._s(t.dayingData.cusname))]),t._v(" "),a("div",{staticClass:"send_line_height"},[t._v("发票收件人信息 : "+t._s(t.dayingData.invoaddr?t.dayingData.invoaddr.linkman_name:"")+" - "+t._s(t.dayingData.invoaddr?t.dayingData.invoaddr.lk_phone:"")+" - "+t._s(t.dayingData.invoaddr?t.dayingData.invoaddr.province:"")+"/"+t._s(t.dayingData.invoaddr?t.dayingData.invoaddr.city:"")+"/"+t._s(t.dayingData.invoaddr?t.dayingData.invoaddr.area:"")+"/"+t._s(t.dayingData.invoaddr?t.dayingData.invoaddr.lk_address:"")+" ")]),t._v(" "),a("div",{staticClass:"send_line_height"},[t._v("零件收货人信息 : "+t._s(t.dayingData.postaddr?t.dayingData.postaddr.linkman_name:"")+" - "+t._s(t.dayingData.postaddr?t.dayingData.postaddr.lk_phone:"")+" - "+t._s(t.dayingData.postaddr?t.dayingData.postaddr.province:"")+"/"+t._s(t.dayingData.postaddr?t.dayingData.postaddr.city:"")+"/"+t._s(t.dayingData.postaddr?t.dayingData.postaddr.area:"")+"/"+t._s(t.dayingData.postaddr?t.dayingData.postaddr.lk_address:"")+" ")]),t._v(" "),a("div",{staticClass:"send_line_height"},t._l(t.dayingData.lkmans,function(e,i){return a("span",[t._v("联系人 : "+t._s(e.linkman_name)+" - "+t._s(e.lk_phone)+" - "+t._s(e.province)+"/"+t._s(e.city)+"/"+t._s(e.area)+"/"+t._s(e.lk_address)+"\n\t\t\t\t\t"),a("br")])})),t._v(" "),a("div",{staticClass:"send_line_height"},[t._v("制作方")]),t._v(" "),a("div",{staticClass:"send_line_height"},[t._v("销售工程师 :"+t._s(t.dayingData.saler?t.dayingData.saler.name:"")+","+t._s(t.dayingData.saler?t.dayingData.saler.phone:""))]),t._v(" "),a("div",{staticClass:"send_line_height"},[t._v("项目工程师 :"+t._s(t.dayingData.pojer?t.dayingData.pojer.name:"")+","+t._s(t.dayingData.pojer?t.dayingData.pojer.phone:"")+" ")]),t._v(" "),a("div",{staticClass:"send_line_height"},[t._v("项目经理 :"+t._s(t.dayingData.manger?t.dayingData.manger.name:"")+","+t._s(t.dayingData.manger?t.dayingData.manger.phone:""))]),t._v(" "),a("div",{staticClass:"send_main_title"},[t._v("零件清单区域")]),t._v(" "),a("ul",t._l(t.dayingData.parts,function(e){return a("li",{staticStyle:{display:"inline-block","margin-bottom":"5px",width:"48%",border:"1px solid #d6d6d6",padding:"10px","margin-left":"6px",height:"200px"}},[a("p",{staticStyle:{"font-size":"16px",margin:"0"}},[t._v(t._s(e.name))]),t._v(" "),a("div",[a("img",{staticStyle:{width:"46%"},attrs:{src:e.diagram,alt:""}}),t._v(" "),a("div",{staticStyle:{display:"inline-block",width:"51%","vertical-align":"top"}},[a("p",{staticStyle:{"font-size":"14px",margin:"0","line-height":"25px","word-wrap":"break-word","word-break":"break-all"}},[t._v(t._s(e.matname)+"    "+t._s(e.equname)+"    ")]),t._v(" "),a("p",{staticStyle:{"font-size":"14px",margin:"0","line-height":"25px"}},[t._v(t._s(e.surname)+"    "+t._s(e.modname))]),t._v(" "),a("p",{staticStyle:{"font-size":"14px",margin:"0","line-height":"25px"}},[t._v("数量 : "+t._s(e.product_num)+"  已送数量:"+t._s(e.yscount?e.yscount:0))])])]),t._v(" "),a("div",{staticStyle:{"font-size":"14px","margin-top":"5px","word-wrap":"break-word","word-break":"break-all"}},[t._v("尺寸:长 : "+t._s(e.volume_size.xx)+"mm 宽 : "+t._s(e.volume_size.zz)+"mm 高\n : "+t._s(e.volume_size.yy)+"mm 体积 : "+t._s(e.volume_size.volume)+"mm³")])])}))])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisibleChakan=!1}}},[t._v("关闭")])],1)]),t._v(" "),a("el-dialog",{staticClass:"dialogSendClass",attrs:{title:"发货单",visible:t.dialogVisible,width:"850px","before-close":t.handleClose,top:"3vh"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-row",{staticClass:"b-title"},[t._v("发货单")]),t._v(" "),a("el-row",{staticClass:"b-row-m b-row",staticStyle:{"line-height":"25px"}},[t._v("\n\t\t  \t报价单号 : "+t._s(t.oneData.no)+"  "),a("br"),t._v("\n\t\t  \t报价日期 : "+t._s(t.oneData.created_at)+" "),a("br"),t._v("\n\t\t\t\t客户名称 : "+t._s(t.oneData.cusname)+" "),a("br")]),t._v(" "),a("el-row",{staticStyle:{"line-height":"25px"}},[t._v("\n\t\t\t\t发票收件人信息 : "+t._s(t.oneData.invoaddr?t.oneData.invoaddr.linkman_name:"")+" - "+t._s(t.oneData.invoaddr?t.oneData.invoaddr.lk_phone:"")+" - "+t._s(t.oneData.invoaddr?t.oneData.invoaddr.province:"")+"/"+t._s(t.oneData.invoaddr?t.oneData.invoaddr.city:"")+"/"+t._s(t.oneData.invoaddr?t.oneData.invoaddr.area:"")+"/"+t._s(t.oneData.invoaddr?t.oneData.invoaddr.lk_address:"")+"\n\t\t\t")]),t._v(" "),a("el-row",{staticStyle:{"line-height":"25px"}},[t._v("\n\t\t\t\t零件收货人信息 : "+t._s(t.oneData.postaddr?t.oneData.postaddr.linkman_name:"")+" - "+t._s(t.oneData.postaddr?t.oneData.postaddr.lk_phone:"")+" - "+t._s(t.oneData.postaddr?t.oneData.postaddr.province:"")+"/"+t._s(t.oneData.postaddr?t.oneData.postaddr.city:"")+"/"+t._s(t.oneData.postaddr?t.oneData.postaddr.area:"")+"/"+t._s(t.oneData.postaddr?t.oneData.postaddr.lk_address:"")+"\n\t\t\t")]),t._v(" "),t._l(t.oneData.lkmans,function(e,i){return a("el-row",{key:i,staticStyle:{"line-height":"25px"}},[t._v("\n\t\t\t\t联系人 : "+t._s(e.linkman_name)+" - "+t._s(e.lk_phone)+" - "+t._s(e.province)+"/"+t._s(e.city)+"/"+t._s(e.area)+"/"+t._s(e.lk_address)+"    \n\t\t  ")])}),t._v(" "),a("el-row",{staticClass:"b-row-m b-row",staticStyle:{"line-height":"25px"}},[t._v("\n\t\t  \t制作方 : "),a("br"),t._v("\n\t\t  \t销售工程师 : "+t._s(t.oneData.saler?t.oneData.saler.name:"")+"    "+t._s(t.oneData.saler?t.oneData.saler.phone:"")),a("br"),t._v("\n\t\t  \t项目工程师 : "+t._s(t.oneData.pojer?t.oneData.pojer.name:"")+"    "+t._s(t.oneData.pojer?t.oneData.pojer.phone:"")),a("br"),t._v("\n\t\t  \t项目经理 : "+t._s(t.oneData.manger?t.oneData.manger.name:"")+"    "+t._s(t.oneData.manger?t.oneData.manger.phone:"")+"；"),a("br")]),t._v(" "),a("el-row",{staticClass:"b-row-m"},[a("el-table",{ref:"singleTable",staticClass:"tb-edit",staticStyle:{width:"100%"},attrs:{data:t.oneData.parts,border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center",fixed:""}}),t._v(" "),a("el-table-column",{attrs:{label:"名称",align:"center",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{style:{color:e.row.name.indexOf("-重做")>0?"blue":"#444"}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"简图",align:"center",prop:"diagram",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("img",{attrs:{src:e.row.diagram,alt:"",width:"200px"}}),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("简图")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"尺寸",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("div",[t._v("长 : "+t._s(e.row.volume_size.xx)+"mm 宽 : "+t._s(e.row.volume_size.zz)+"mm 高 : "+t._s(e.row.volume_size.yy)+"mm 体积 : "+t._s(e.row.volume_size.volume)+"mm³")]),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("尺寸")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"modname",label:"成型工艺",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"equname",label:"成型设备",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"matname",label:"成型材质",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"surname",label:"表面处理",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"发货数量",align:"center",width:"205"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"date-show"},[a("el-input-number",{attrs:{"controls-position":"right",min:0},on:{change:function(a){t.sendNum(a,e.row)}},model:{value:e.row.yscount,callback:function(a){t.$set(e.row,"yscount",a)},expression:"scope.row.yscount"}})],1),t._v(" "),a("span",[t._v(t._s(e.row.yscount?e.row.yscount:e.row.product_num-e.row.yscounta))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"reqmen",label:"处理要求",align:"center",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"处理要求"},model:{value:e.row.reqmen,callback:function(a){t.$set(e.row,"reqmen",a)},expression:"scope.row.reqmen"}}),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("处理要求")])],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orderno",label:"订单号",align:"center",width:"155"}}),t._v(" "),a("el-table-column",{attrs:{prop:"due_date",label:"交货日期",align:"center",width:"155"}})],1)],1),t._v(" "),a("el-row",[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.oneData}},[a("el-row",{staticClass:"b-row-m"},[a("el-form-item",{attrs:{label:"发货方式",prop:"resource"}},[a("el-radio-group",{on:{change:t.dismodShow},model:{value:t.oneData.dismod,callback:function(e){t.$set(t.oneData,"dismod",e)},expression:"oneData.dismod"}},[a("el-radio",{attrs:{label:"快递"}}),t._v(" "),a("el-radio",{attrs:{label:"自送"}}),t._v(" "),a("el-radio",{attrs:{label:"自提"}})],1)],1)],1),t._v(" "),t.dismodShowIf?a("div",[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"快递公司"}},[a("el-select",{staticClass:"input-width",attrs:{placeholder:"请选择"},model:{value:t.oneData.express_code,callback:function(e){t.$set(t.oneData,"express_code",e)},expression:"oneData.express_code"}},t._l(t.expressList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"快递单号"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"请输入快递单号",onkeyup:"value=value.replace(/\\D/g,'')"},model:{value:t.oneData.express_no,callback:function(e){t.$set(t.oneData,"express_no",e)},expression:"oneData.express_no"}})],1)],1)],1)],1):t._e()],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer ",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"send"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.sureSendOrder}},[t._v("确 定")])],1)])],2),t._v(" "),a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"已完成零件",name:"first"}},[a("el-row",{staticClass:"mb"},[a("el-col",{attrs:{span:8}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"客户名称","prefix-icon":"el-icon-search"},model:{value:t.searchData.sear,callback:function(e){t.$set(t.searchData,"sear",e)},expression:"searchData.sear"}}),t._v(" "),a("el-button",{on:{click:function(e){t.handleSearch("1")}}},[t._v("搜索")]),t._v(" "),a("el-button",{on:{click:function(e){t.initParts(t.searchData)}}},[t._v("刷新列表")])],1),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:16}},[a("el-select",{staticClass:"sinput-width",attrs:{placeholder:"生产状态"},model:{value:t.searchData.stat,callback:function(e){t.$set(t.searchData,"stat",e)},expression:"searchData.stat"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v("\n\t\t\t\t\t\t  \n\t\t\t\t\t\t "),a("el-date-picker",{staticStyle:{width:"160px"},attrs:{type:"date",placeholder:"交货日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.searchData.edat,callback:function(e){t.$set(t.searchData,"edat",e)},expression:"searchData.edat"}}),t._v("\n\t\t\t\t\t\t  \n\t\t\t\t\t\t "),a("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"订单编号"},model:{value:t.searchData.orde,callback:function(e){t.$set(t.searchData,"orde",e)},expression:"searchData.orde"}})],1)],1),t._v(" "),a("el-row",{staticClass:"mt"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingPart,expression:"loadingPart"}],ref:"partsTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","tooltip-effect":"dark","element-loading-text":"加载中...."},on:{"selection-change":t.handleSelectionChangeParts}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"零件名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{style:{color:String(e.row.name).indexOf("-重做")>=0?"blue":"#444"}},[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"cusname",label:"客户名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderno",label:"订单号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"简图",align:"center",prop:"diagram"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("img",{attrs:{src:e.row.diagram,alt:"",width:"200px"}}),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("简图")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"product_num",label:"零件数量",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"yscount",label:"已送数量",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"due_date",label:"交货时间",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[("发货完成"==e.row.status?t.showSH=!1:t.showSH=!0)?a("span",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.handleSent(e.$index,e.row)}}},[t._v("发货")])],1):t._e()]}}])})],1)],1),t._v(" "),a("el-row",{staticClass:"mt"},[a("el-col",{attrs:{span:6}},[a("el-button",{on:{click:function(e){t.clearParts()}}},[t._v("清空零件选择")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleSent()}}},[t._v("批量发货")])],1),t._v(" "),a("el-col",{staticStyle:{display:"flex","justify-content":"flex-end"},attrs:{span:18}},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,total:t.linmitTotal,layout:"total, prev, pager, next, jumper",background:""},on:{"current-change":t.handleCurrentChangePage}})],1)],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"发货单",name:"second"}},[a("el-row",{staticClass:"mb"},[a("el-col",{attrs:{span:8}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"客户名称","prefix-icon":"el-icon-search"},model:{value:t.searchData.sear,callback:function(e){t.$set(t.searchData,"sear",e)},expression:"searchData.sear"}}),t._v(" "),a("el-button",{on:{click:function(e){t.handleSearch("2")}}},[t._v("搜索")]),t._v(" "),a("el-button",{on:{click:function(e){t.initDelin(t.searchData)}}},[t._v("刷新列表")])],1),t._v(" "),a("el-col",{staticClass:"right",attrs:{span:16}},[a("el-date-picker",{staticStyle:{width:"160px"},attrs:{type:"date",placeholder:"创建日期","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.searchData.edat,callback:function(e){t.$set(t.searchData,"edat",e)},expression:"searchData.edat"}}),t._v("\n\t\t    \t\t\t  \n\t\t    \t\t\t"),a("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"订单编号"},model:{value:t.searchData.orde,callback:function(e){t.$set(t.searchData,"orde",e)},expression:"searchData.orde"}}),t._v("\n\t\t\t\t\t\t    \n\t\t\t\t\t\t  "),a("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"快递单号"},model:{value:t.searchData.expo,callback:function(e){t.$set(t.searchData,"expo",e)},expression:"searchData.expo"}}),t._v("\n\t\t\t\t\t\t\t   \n\t\t\t\t\t\t\t "),a("el-select",{staticStyle:{width:"160px"},attrs:{placeholder:"状态",clearable:""},model:{value:t.searchData.stat,callback:function(e){t.$set(t.searchData,"stat",e)},expression:"searchData.stat"}},t._l(t.options1,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),a("el-row",{staticClass:"mt"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingOrder,expression:"loadingOrder"}],ref:"orderTable",staticStyle:{width:"100%"},attrs:{data:t.tableData1,border:"","tooltip-effect":"dark","element-loading-text":"加载中...."},on:{"selection-change":t.handleSelectionChangeOrder}},[a("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",align:"center",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"express_name",label:"快递",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"express_no",label:"快递单号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"cusname",label:"客户名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderno",label:"订单号",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"创建日期",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"物流",align:"center",prop:"diagram"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{trigger:"hover",placement:"top"}},[a("div",t._l(t.wulliuArr,function(e){return a("div",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.AcceptStation)+"\n\t\t\t\t\t\t\t\t\t\t\t"),a("br"),t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.AcceptTime)+"\n\t\t\t\t\t\t\t\t\t\t")])})),t._v(" "),a("div",{staticClass:"name-wrapper",attrs:{slot:"reference"},on:{mouseenter:function(a){t.cellHover(e.row)}},slot:"reference"},[a("el-tag",{attrs:{size:"medium"}},[t._v("跟踪")])],1)])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t\t"+t._s(0==e.row.status?"已发货":1==e.row.status?"客户已收货":"发货完成")+"\n\t\t\t\t\t\t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleChakan(e.$index,e.row)}}},[t._v("查看")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handlePrinting(e.$index,e.row)}}},[t._v("打印")])]}}])})],1)],1),t._v(" "),a("el-row",{staticClass:"mt"},[a("el-col",{attrs:{span:6}},[t._v("\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\n\t\t\t\t\t\t")]),t._v(" "),a("el-col",{staticStyle:{display:"flex","justify-content":"flex-end"},attrs:{span:18}},[a("el-pagination",{attrs:{"current-page":t.currentPageOrder,"page-size":t.pageSizeOrder,total:t.linmitTotalOrder,layout:"total, prev, pager, next, jumper",background:""},on:{"current-change":t.handleCurrentChangePageOrder}})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"a4",staticStyle:{display:"none"},attrs:{id:"subOutputRank-print"}},[a("div",{staticClass:"print-main"},[a("div",{staticStyle:{"text-align":"center","font-size":"20px"}},[t._v("发货单")]),t._v(" "),a("div",{staticStyle:{"line-height":"25px"}},[t._v("报价单号 : "+t._s(t.dayingData.no))]),t._v(" "),a("div",{staticStyle:{"line-height":"25px"}},[t._v("订单二维码")]),t._v(" "),a("div",[a("img",{staticStyle:{width:"100px"},attrs:{src:t.dayingData.qrcode_url,alt:""}})]),t._v(" "),a("div",{staticStyle:{"line-height":"25px"}},[t._v("客户名称 : "+t._s(t.dayingData.cusname))]),t._v(" "),a("div",{staticStyle:{"line-height":"25px"}},[t._v("发票收件人信息 : "+t._s(t.dayingData.invoaddr?t.dayingData.invoaddr.linkman_name:"")+" - "+t._s(t.dayingData.invoaddr?t.dayingData.invoaddr.lk_phone:"")+" - "+t._s(t.dayingData.invoaddr?t.dayingData.invoaddr.province:"")+"/"+t._s(t.dayingData.invoaddr?t.dayingData.invoaddr.city:"")+"/"+t._s(t.dayingData.invoaddr?t.dayingData.invoaddr.area:"")+"/"+t._s(t.dayingData.invoaddr?t.dayingData.invoaddr.lk_address:"")+" ")]),t._v(" "),a("div",{staticStyle:{"line-height":"25px"}},[t._v("零件收货人信息 : "+t._s(t.dayingData.postaddr?t.dayingData.postaddr.linkman_name:"")+" - "+t._s(t.dayingData.postaddr?t.dayingData.postaddr.lk_phone:"")+" - "+t._s(t.dayingData.postaddr?t.dayingData.postaddr.province:"")+"/"+t._s(t.dayingData.postaddr?t.dayingData.postaddr.city:"")+"/"+t._s(t.dayingData.postaddr?t.dayingData.postaddr.area:"")+"/"+t._s(t.dayingData.postaddr?t.dayingData.postaddr.lk_address:"")+" ")]),t._v(" "),a("div",t._l(t.dayingData.lkmans,function(e){return a("span",[t._v("\n\t\t\t\t\t联系人 : "+t._s(e.linkman_name)+" - "+t._s(e.lk_phone)+" - "+t._s(e.province)+"/"+t._s(e.city)+"/"+t._s(e.area)+"/"+t._s(e.lk_address)+"\n\t\t\t\t "),a("br")])})),t._v(" "),a("div",{staticStyle:{"line-height":"25px"}},[t._v("制作方")]),t._v(" "),a("div",{staticStyle:{"line-height":"25px"}},[t._v("销售工程师 :"+t._s(t.dayingData.saler?t.dayingData.saler.name:"")+","+t._s(t.dayingData.saler?t.dayingData.saler.phone:""))]),t._v(" "),a("div",{staticStyle:{"line-height":"25px"}},[t._v("项目工程师 :"+t._s(t.dayingData.pojer?t.dayingData.pojer.name:"")+","+t._s(t.dayingData.pojer?t.dayingData.pojer.phone:"")+" ")]),t._v(" "),a("div",{staticStyle:{"line-height":"25px"}},[t._v("项目经理 :"+t._s(t.dayingData.manger?t.dayingData.manger.name:"")+","+t._s(t.dayingData.manger?t.dayingData.manger.phone:""))]),t._v(" "),a("div",{staticStyle:{"text-align":"center","font-size":"20px","margin-bottom":"10px"}},[t._v("零件清单区域")]),t._v(" "),a("ul",{staticStyle:{margin:"0",padding:"0"}},t._l(t.dayingData.parts,function(e){return a("li",{staticStyle:{display:"inline-block","margin-bottom":"5px",width:"46%",border:"1px solid #d6d6d6",padding:"10px","margin-left":"6px",height:"165px"}},[a("p",{staticStyle:{"font-size":"16px",margin:"0"}},[t._v(t._s(e.name))]),t._v(" "),a("div",[a("img",{staticStyle:{width:"45%"},attrs:{src:e.diagram,alt:""}}),t._v(" "),a("div",{staticStyle:{display:"inline-block",width:"2%","vertical-align":"top"}},[t._v(" ")]),t._v(" "),a("div",{staticStyle:{display:"inline-block",width:"50%","vertical-align":"top"}},[a("p",{staticStyle:{"font-size":"14px",margin:"0","word-break":"break-all","word-wrap":"break-word"}},[t._v(t._s(e.matname)+"    "+t._s(e.equname))]),t._v(" "),a("p",{staticStyle:{"font-size":"14px",margin:"0","word-break":"break-all","word-wrap":"break-word"}},[t._v(t._s(e.surname)+"    "+t._s(e.modname))]),t._v(" "),a("p",{staticStyle:{"font-size":"14px",margin:"0"}},[t._v("数量 : "+t._s(e.product_num)+"  已送数量:"+t._s(e.yscount?e.yscount:0))])])]),t._v(" "),a("div",{staticStyle:{"font-size":"13px","word-wrap":"break-word","word-break":"break-all"}},[t._v("尺寸: 长 : "+t._s(e.volume_size.xx)+"mm 宽 : "+t._s(e.volume_size.zz)+"mm 高 : "+t._s(e.volume_size.yy)+"mm 体积 : "+t._s(e.volume_size.volume)+"mm³")])])}))])])],1)},[],!1,null,null,null));ze.options.__file="warehouse.vue";var qe=ze.exports,Te=(a("CGCl"),a("nKsP")),Oe={data:function(){return{listShow:!1,addShowQ:!1,editShowQ:!1,delShowQ:!1,checkShowQ:!1,radioFapiao:!1,allPage:1,currentPage:1,inputPage:"",plTotalPage:"5",searData:{},dialogVisible:!1,delCustomeDialog:!1,checkedGoods:["1","2","3"],show:!1,show1:!1,show2:!1,customerTitle:"添加客户信息",linkmanTitle:"添加联系人",linkmanStatus:1,areaList:{},tableData:[],active:0,oneData:{name:"",tel:"",ticket_info:{},linkman:[],consignee:[],address:""},oneId:"",editIndex:"",oneDataC:{},delLinkStatus:1,labelPosition:"right",rulesC:{linkman_name:[{required:!0,message:"请输入姓名",trigger:"blur"}],lk_address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],lk_phone:[{required:!0,message:"请输入正确手机号码",trigger:"blur"},{validator:P.e,trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}],address1:[{required:!0,message:"请选择所在地区",trigger:"change"}]},customerType:[],areaSelectStatus:1,ruleCustomer:{name:[{required:!0,message:"请输入客户名称",trigger:"blur"}],address1:[{required:!0,message:"请选择所在地区",trigger:"change"}],no:[{required:!0,message:"请输入客户名称",trigger:"blur"}],tel:[{required:!0,message:"请输入联系方式",trigger:"blur"},{validator:P.f,trigger:"blur"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],customer_type_id:[{required:!0,message:"请选择商家行业",validator:P.g,trigger:"blur"}],taxno:[{required:!0,message:"请输入税号",trigger:"blur"},{min:18,max:18,message:"税号为18位数",trigger:"blur"}],bank:[{required:!0,message:"请输入银行名称",trigger:"blur"}],bankno:[{required:!0,message:"请输入银行账号",trigger:"blur"}]}}},methods:{wxjb:function(t){var e=this,a={};a.cid=t.id,this.$dialog.confirm({title:"提示",message:"你确定要解绑微信"}).then(function(){Object(C.l)(a).then(function(t){e.$toast.success({duration:2e3,message:"微信解绑成功"});var a={page:e.currentPage};e.initTableData(a)}).catch(function(t){})}).catch(function(){})},initTableData:function(t){var e=this;Object(C.j)(t).then(function(t){e.tableData=[],e.tableData=t.data.data,e.allPage=t.data.last_page,e.plTotalPage=t.data.last_page+"页",e.currentPage=t.data.current_page,e.tableData.length?e.listShow=!1:e.listShow=!0}).catch(function(t){reject(t)})},addCustomer:function(){this.show=!0,this.customerTitle="添加客户信息",this.oneData={name:"",tel:"",ticket_info:{},linkman:[],consignee:[],address:"",taxno:"",customer_type_id:[],no:""},this.checkShowQ?this.oneData.status="通过":this.oneData.status="不通过",this.radioFapiao=!1,this.$nextTick(function(){this.$refs.ruleFormCustomer.resetFields()})},handleCloseCustomer:function(){this.show=!1},copyConsignee:function(t){var e={},a=!0;delete(e=r()({},t)).customer_id,delete e.defvue,delete e.created_at,delete e.updated_at,e.id=0;var i=!0,n=!1,o=void 0;try{for(var s,c=l()(this.oneData.consignee);!(i=(s=c.next()).done);i=!0){s.value.lk_phone==e.lk_phone&&(a=!1)}}catch(t){n=!0,o=t}finally{try{!i&&c.return&&c.return()}finally{if(n)throw o}}a?(this.oneData.consignee.push(e),this.$toast({message:"设置成功",duration:1500})):this.$toast({message:"该手机号码在收货人里已存在"})},addCustomerSure:function(t){var e=this,a=r()({},this.oneData);a.ticket_info.taxno=a.taxno,a.ticket_info.bank=a.bank,a.ticket_info.bankno=a.bankno,this.radioFapiao||(a.ticket_info.taxno="",a.ticket_info.bank="",a.ticket_info.bankno=""),"通过"==a.status?a.status=1:a.status=0;var i=a.customer_type_id.length;void 0!==i&&(a.customer_type_id=a.customer_type_id[i-1]),delete a.address1,this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;if("添加客户信息"==e.customerTitle)if(e.oneData.address1&&e.oneData.linkman.length>0&&e.oneData.consignee.length>0){var i=e.$loading({lock:!0,text:"提交中，请等待",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:document.querySelector(".customerB")});Object(C.g)(a).then(function(t){e.$toast.success({duration:2e3,message:"添加成功"});e.initTableData({page:1}),e.show=!1,i.close()}).catch(function(t){console.log("添加客户失败"),i.close()})}else e.$toast.fail({duration:2500,message:"所在地区,联系人,收货人不能为空"});else{var n=a.id;a.submit="1";var o=e.$loading({lock:!0,text:"提交中，请等待",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:document.querySelector(".customerB")});Object(C.i)(n,a).then(function(t){e.$toast.success({duration:2e3,message:"修改成功"});var a={page:e.currentPage};e.initTableData(a),e.show=!1,e.oneData={ticket_info:{},linkman:[],consignee:[],customer_type_id:[]},o.close()}).catch(function(t){o.close(),console.log(t)})}})},handleEdit:function(t){var e=this;this.show=!0,this.customerTitle="修改客户信息",this.$nextTick(function(){this.$refs.ruleFormCustomer.resetFields()}),Object(C.i)(t.id).then(function(t){e.num=[],e.oneData=t.data;var a=t.data.customer_type_id;e.customerArr(e.customerTypeId,a),e.oneData.customer_type_id=e.num.reverse(),e.num.push(a),Array.isArray(e.oneData.ticket_info)?e.oneData.ticket_info={}:(e.oneData.ticket_info.taxno||e.oneData.ticket_info.bank||e.oneData.ticket_info.bankno?e.radioFapiao=!0:e.radioFapiao=!1,e.$set(e.oneData,"taxno",e.oneData.ticket_info.taxno),e.$set(e.oneData,"bank",e.oneData.ticket_info.bank),e.$set(e.oneData,"bankno",e.oneData.ticket_info.bankno)),e.oneData.province&&e.oneData.city&&e.oneData.area?e.oneData.address1=e.oneData.province+"/"+e.oneData.city+"/"+e.oneData.area:e.oneData.address1="",1==e.oneData.status?e.oneData.status="通过":e.oneData.status="不通过"}).catch(function(t){console.log(t)})},handleLinkmanDel:function(t,e,a){"linkman"==e?(this.dialogVisible=!0,this.delLinkStatus=1,this.editIndex=a,this.oneDataC=r()({},t)):(this.dialogVisible=!0,this.delLinkStatus=2,this.editIndex=a,this.oneDataC=r()({},t))},addLinkman:function(t){"linkman"==t?(this.linkmanTitle="添加联系人",this.linkmanStatus=1,this.oneDataC={id:0,email:"",zipcode:"",address1:""}):(this.linkmanTitle="添加收货人",this.linkmanStatus=3,this.oneDataC={id:0,email:"",zipcode:"",address1:""}),this.show1=!0},handleLinkmanEdit:function(t,e,a){"linkman"==e?(this.oneDataC=r()({},t),this.linkmanTitle="修改联系人",this.linkmanStatus=2,this.editIndex=a,this.oneDataC.address1=this.oneDataC.province+"/"+this.oneDataC.city+"/"+this.oneDataC.area):(this.oneDataC=r()({},t,a),this.linkmanTitle="修改收货人",this.linkmanStatus=4,this.editIndex=a,this.oneDataC.address1=this.oneDataC.province+"/"+this.oneDataC.city+"/"+this.oneDataC.area),this.show1=!0},addLinkmanSure:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.oneDataC.address1?(1==e.linkmanStatus?(e.oneDataC.id=0,e.oneData.linkman.push(e.oneDataC)):2==e.linkmanStatus?e.$set(e.oneData.linkman,e.editIndex,e.oneDataC):3==e.linkmanStatus?(e.oneDataC.id=0,e.oneData.consignee.push(e.oneDataC)):e.$set(e.oneData.consignee,e.editIndex,e.oneDataC),e.show1=!1):e.$toast.fail({duration:2e3,message:"请选择所在地区"})})},areaCancel:function(){this.show2=!1},areaSure:function(t){if(this.show2=!1,1==this.areaSelectStatus){var e=t[0].name+"/"+t[1].name+"/"+t[2].name;this.oneData=r()({},this.oneData,{area:t[2].name,city:t[1].name,province:t[0].name,address1:e})}else this.oneDataC.province=t[0].name,this.oneDataC.city=t[1].name,this.oneDataC.area=t[2].name,this.oneDataC.address1=t[0].name+"/"+t[1].name+"/"+t[2].name},selectArea:function(t){this.show2=!0,this.areaSelectStatus=1==t?1:2},pingyinDaXie:function(t){var e=J.a.getCamelChars(t);this.$set(this.oneData,"no",e)},replaceType:function(t){var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;s.value=s.id,s.label=s.name,s.children=s.child,delete s.id,delete s.name,delete s.child,s.children.length>0?this.replaceType(s.children):delete s.children}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}return t},customerArr:function(t,e,a){if(t.length>0){var i=!0,n=!1,o=void 0;try{for(var s,r=l()(t);!(i=(s=r.next()).done);i=!0){var c=s.value;if(c.id==e){if(a){var d=a.id;this.num.push(d),this.customerArr(this.customerTypeId,d)}}else this.customerArr(c.child,e,c)}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}}return this.num},handleClose:function(){this.dialogVisible=!1},beforeCloseLinkman:function(t,e){var a=this;if("confirm"==t){var i=function(t){l.$toast.success({duration:2e3,message:"删除成功"}),e(),1==l.delLinkStatus?l.oneData.linkman.splice(t,1):l.oneData.consignee.splice(t,1)},n=this.oneDataC.id,o={id:n},l=this;0==n?i(this.editIndex):Object(C.a)(n,o).then(function(t){i(a.editIndex)}).catch(function(t){console.log(t)})}else e()},handleDel:function(t){this.delCustomeDialog=!0,this.oneId=t.id},beforeCloseCustomer:function(t,e){var a=this;if("confirm"==t){var i=this.oneId,n={id:i};Object(C.h)(i,n).then(function(t){a.$toast.success({duration:2e3,message:"删除成功"});a.initTableData({page:1}),e()}).catch(function(t){console.log(t)})}else e()},handleCurrentPage:function(t){this.searData.page=t,this.initTableData(this.searData)},InputCurrentPage:function(t){this.currentPage=Number(t),this.searData.page=t,this.initTableData(this.searData)},handledefault:function(t,e,a){var i=this,n={};n.cid=this.oneData.id,n.uid=e.id,n.type=1==a?0:1,Object(C.m)(n).then(function(t){if(i.$toast("设置默认地址成功"),1==a){var n=!0,o=!1,s=void 0;try{for(var r,c=l()(i.oneData.linkman);!(n=(r=c.next()).done);n=!0){var d=r.value;"number"==typeof d.defvue&&(d.id==e.id?d.defvue=1:d.defvue=0)}}catch(t){o=!0,s=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw s}}}else{var u=!0,p=!1,h=void 0;try{for(var v,m=l()(i.oneData.consignee);!(u=(v=m.next()).done);u=!0){var f=v.value;"number"==typeof f.defvue&&(f.id==e.id?f.defvue=1:f.defvue=0)}}catch(t){p=!0,h=t}finally{try{!u&&m.return&&m.return()}finally{if(p)throw h}}}}).catch(function(t){})}},created:function(){var t=this;this.areaList=Object(Te.a)();this.initTableData({page:1}),Object(C.k)().then(function(e){var a=JSON.parse(d()(e.data));t.customerTypeId=e.data,t.customerType=t.replaceType(a)}).catch(function(t){})},mounted:function(){var t=f.a.get("actionArr");t=JSON.parse(t);var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;"delete"==s&&(this.delShowQ=!0),"add"==s&&(this.addShowQ=!0),"edit"==s&&(this.editShowQ=!0),"check"==s&&(this.checkShowQ=!0)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}}},je=(a("J7U6"),Object(g.a)(Oe,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mobileCustomer"},[t.addShowQ?a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"small"},on:{click:t.addCustomer}},[t._v("客户")]),t._v("  \n\t\t")],1):t._e(),t._v(" "),t.listShow?a("div",{staticStyle:{"margin-top":"10px"}},[t._v("暂无客户")]):t._e(),t._v(" "),a("van-checkbox-group",{staticClass:"card-goods",model:{value:t.checkedGoods,callback:function(e){t.checkedGoods=e},expression:"checkedGoods"}},t._l(t.tableData,function(e,i){return a("van-row",{key:e.index,staticStyle:{"margin-top":"10px",padding:"5px","border-bottom":"1px solid #e5e5e5"}},[a("van-col",{attrs:{span:"3"}},[t._v("\n\t\t\t\t\t\t\t  \n\t\t\t\t\t\t")]),t._v(" "),a("van-col",{staticClass:"list_main_c",attrs:{span:"21"}},[a("div",[t._v("\n\t\t\t\t\t\t\t\t序号 : "+t._s(i+1)+"  客户名称 : "+t._s(e.name)+"   \n\t\t\t\t\t\t\t")]),t._v(" "),a("div",{staticStyle:{"padding-top":"2px"}},[t._v("联系电话 : "+t._s(e.tel))]),t._v(" "),a("div",{staticStyle:{"padding-top":"2px"}},[t._v("地址 : "+t._s(e.address))]),t._v(" "),a("div",{staticStyle:{"padding-top":"2px"}},[t._v("状态 : "+t._s(0==e.status?"不通过":"通过"))]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"100%","margin-top":"5px"}},[e.openid?a("el-button",{on:{click:function(a){t.wxjb(e)}}},[t._v(" 微信解绑")]):t._e(),t._v(" "),t.editShowQ?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){t.handleEdit(e)}}},[t._v("修改\n\t\t\t\t\t\t\t")]):t._e(),t._v(" "),t.delShowQ?a("el-button",{staticStyle:{"background-color":"#d6d6d6"},attrs:{size:"small"},on:{click:function(a){t.handleDel(e)}}},[t._v("删除")]):t._e()],1)])],1)})),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("van-actionsheet",{attrs:{title:t.customerTitle},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("el-form",{ref:"ruleFormCustomer",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.oneData,"label-position":t.labelPosition,rules:t.ruleCustomer}},[a("el-row",{staticClass:"pl ct",staticStyle:{"margin-top":"10px"}},[a("el-form-item",{attrs:{label:"商家行业",prop:"customer_type_id"}},[a("el-cascader",{staticStyle:{width:"190px"},attrs:{options:t.customerType,"change-on-select":""},model:{value:t.oneData.customer_type_id,callback:function(e){t.$set(t.oneData,"customer_type_id",e)},expression:"oneData.customer_type_id"}})],1)],1),t._v(" "),a("el-row",{staticClass:"pl ct"},[a("el-form-item",{attrs:{label:"客户名称",prop:"name"}},[a("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"客户名称 "},on:{change:t.pingyinDaXie},model:{value:t.oneData.name,callback:function(e){t.$set(t.oneData,"name",e)},expression:"oneData.name"}})],1)],1),t._v(" "),a("el-row",{staticClass:"pl ct"},[a("el-form-item",{attrs:{label:"客户代号",prop:"no"}},[a("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"客户代号 "},model:{value:t.oneData.no,callback:function(e){t.$set(t.oneData,"no",e)},expression:"oneData.no"}})],1)],1),t._v(" "),a("el-row",{staticClass:"pl ct"},[a("el-form-item",{attrs:{label:"所在地区",prop:"address1"}},[a("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"请选择所在地区",readonly:""},on:{focus:function(e){t.selectArea(1)}},model:{value:t.oneData.address1,callback:function(e){t.$set(t.oneData,"address1",e)},expression:"oneData.address1"}})],1)],1),t._v(" "),a("el-row",{staticClass:"pl ct"},[a("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[a("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"详细地址"},model:{value:t.oneData.address,callback:function(e){t.$set(t.oneData,"address",e)},expression:"oneData.address"}})],1)],1),t._v(" "),a("el-row",{staticClass:"pl ct"},[a("el-form-item",{attrs:{label:"联系电话",prop:"tel"}},[a("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"联系电话"},model:{value:t.oneData.tel,callback:function(e){t.$set(t.oneData,"tel",e)},expression:"oneData.tel"}})],1)],1),t._v(" "),a("el-row",{staticClass:"pl "},[a("el-row",[a("el-button",{staticClass:"mb",attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:function(e){t.addLinkman("linkman")}}},[t._v("联系人")]),t._v("   \n\t\t\t\t\t\t"),a("el-button",{staticClass:"mb",attrs:{icon:"el-icon-plus",size:"small",type:"success"},on:{click:function(e){t.addLinkman("consignee")}}},[t._v("收货人")])],1),t._v(" "),a("el-row",{staticStyle:{"margin-bottom":"15px","font-size":"1.1rem","border-bottom":"1px solid #FFA01B","padding-bottom":"5px"}},[t._v("\n\t\t\t\t\t\t联系成员信息\n\t\t\t\t\t\t"),a("svg-icon",{staticStyle:{color:"#FFA01B"},attrs:{"icon-class":"peoples"}})],1),t._v(" "),t.oneData.linkman.length>0?t._e():a("div",{staticStyle:{"margin-bottom":"15px","font-size":"0.9rem",color:"#888888"}},[t._v("暂无联系成员信息")]),t._v(" "),t._l(t.oneData.linkman,function(e,i){return a("el-row",{key:e.index,staticStyle:{"border-bottom":"1px solid #d6d6d6","padding-bottom":"7px","margin-bottom":"10px"}},[a("el-row",[a("el-col",{attrs:{span:17}},[a("div",[a("span",[t._v(t._s(e.linkman_name))]),t._v("   "),a("span",{staticClass:"fs1"},[t._v(t._s(e.lk_phone))])]),t._v(" "),a("div",{staticClass:"fs1",staticStyle:{"padding-top":"2px"}},[t._v(t._s(e.lk_email))])]),t._v(" "),a("el-col",{attrs:{span:7}},[a("i",{staticClass:"el-icon-edit",staticStyle:{color:"#409eff","font-size":"1.1rem"},on:{click:function(a){t.handleLinkmanEdit(e,"linkman",i)}}}),t._v("  \n\t\t\t\t\t\t\t\t"),a("i",{staticClass:"el-icon-delete",staticStyle:{color:"#f56c6c","font-size":"1.1rem"},on:{click:function(a){t.handleLinkmanDel(e,"linkman",i)}}}),t._v("  \n\t\t\t\t\t\t\t\t"),"number"==typeof e.defvue?a("i",{staticClass:"el-icon-location-outline",staticStyle:{"font-size":"1.1rem"},style:{color:e.defvue?"#99FF66":"#999999"},on:{click:function(a){t.handledefault(i,e,"1")}}}):t._e()])],1),t._v(" "),a("div",{staticClass:"fs",staticStyle:{"padding-top":"2px"}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.province)+"/"+t._s(e.city)+"/"+t._s(e.area)+"/"+t._s(e.lk_address)+"\n\t\t\t\t\t\t")]),t._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.copyConsignee(e)}}},[t._v("设为收货成员")])],1)],1)})],2),t._v(" "),a("el-row",{staticClass:"pl"},[a("el-row",{staticStyle:{"margin-bottom":"15px","font-size":"1.1rem","border-bottom":"1px solid #FFA01B","padding-bottom":"5px"}},[t._v("\n\t\t\t\t\t\t收货成员信息\n\t\t\t\t\t\t"),a("svg-icon",{staticStyle:{color:"#FFA01B"},attrs:{"icon-class":"peoples"}})],1),t._v(" "),t.oneData.consignee.length>0?t._e():a("div",{staticStyle:{"margin-bottom":"15px","font-size":"0.9rem",color:"#888888"}},[t._v("暂无收货成员信息")]),t._v(" "),t._l(t.oneData.consignee,function(e,i){return a("el-row",{key:e.index,staticStyle:{"border-bottom":"1px solid #d6d6d6","padding-bottom":"7px","margin-bottom":"10px"}},[a("el-row",[a("el-col",{attrs:{span:17}},[a("div",[a("span",[t._v(t._s(e.linkman_name))]),t._v("   "),a("span",{staticClass:"fs1"},[t._v(t._s(e.lk_phone))])]),t._v(" "),a("div",{staticClass:"fs1"},[t._v(t._s(e.lk_email))])]),t._v(" "),a("el-col",{attrs:{span:7}},[a("i",{staticClass:"el-icon-edit",staticStyle:{color:"#409eff","font-size":"1.1rem"},on:{click:function(a){t.handleLinkmanEdit(e,"consignee",i)}}}),t._v("  \n\t\t\t\t\t\t\t"),a("i",{staticClass:"el-icon-delete",staticStyle:{color:"#f56c6c","font-size":"1.1rem"},on:{click:function(a){t.handleLinkmanDel(e,"consignee",i)}}}),t._v("  \n\t\t\t\t\t\t\t"),"number"==typeof e.defvue?a("i",{staticClass:"el-icon-location-outline",staticStyle:{"font-size":"1.1rem"},style:{color:e.defvue?" #99FF66":"#999999"},on:{click:function(a){t.handledefault(i,e,"2")}}}):t._e()])],1),t._v(" "),a("div",{staticClass:"fs",staticStyle:{"padding-top":"2px"}},[t._v("\n\t\t\t\t\t\t\t"+t._s(e.province)+"/"+t._s(e.city)+"/"+t._s(e.area)+"/"+t._s(e.lk_address)+"\n\t\t\t\t\t\t")])],1)})],2),t._v(" "),a("el-row",{staticClass:"mt pl",staticStyle:{display:"flex","justify-content":"flex-start"}},[t._v("\n\t\t\t\t\t是否需要发票  :  "),t.radioFapiao?a("span",{staticStyle:{display:"flex",width:"15px",height:"15px",border:"1px solid #409EFF","justify-content":"center","align-items":"center",cursor:"pointer"},on:{click:function(e){t.radioFapiao=!1}}},[a("i",{staticStyle:{"margin-top":"-5px",display:"inline-block",width:"7px",height:"13px","border-bottom":"1px solid #409EFF","border-right":"1px solid #409EFF",transform:"rotate(45deg)"}})]):t._e(),t._v(" "),t.radioFapiao?t._e():a("span",{staticStyle:{display:"flex",width:"15px",height:"15px",border:"1px solid #dcdfe6","justify-content":"center","align-items":"center",cursor:"pointer"},on:{click:function(e){t.radioFapiao=!0}}})]),t._v(" "),t.radioFapiao?a("div",{staticStyle:{"margin-top":"15px"}},[a("el-row",{staticClass:"mt pl ct"},[a("el-form-item",{attrs:{label:"税号",prop:"taxno"}},[a("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"税号"},model:{value:t.oneData.taxno,callback:function(e){t.$set(t.oneData,"taxno",e)},expression:"oneData.taxno"}})],1)],1),t._v(" "),a("el-row",{staticClass:"pl ct"},[a("el-form-item",{attrs:{label:"开户银行",prop:"bank"}},[a("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"开户银行"},model:{value:t.oneData.bank,callback:function(e){t.$set(t.oneData,"bank",e)},expression:"oneData.bank"}})],1)],1),t._v(" "),a("el-row",{staticClass:"pl ct"},[a("el-form-item",{attrs:{label:"银行账号",prop:"bankno"}},[a("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"银行账户"},model:{value:t.oneData.bankno,callback:function(e){t.$set(t.oneData,"bankno",e)},expression:"oneData.bankno"}})],1)],1)],1):t._e(),t._v(" "),t.checkShowQ?a("el-row",{staticClass:"pl",staticStyle:{"margin-top":"15px","margin-bottom":"10px"}},[t._v("\n\t\t\t\t\t审核\n\t\t\t\t\t"),a("el-radio-group",{model:{value:t.oneData.status,callback:function(e){t.$set(t.oneData,"status",e)},expression:"oneData.status"}},[a("el-radio",{attrs:{label:"通过"}}),t._v(" "),a("el-radio",{attrs:{label:"不通过"}})],1)],1):t._e()],1),t._v(" "),a("div",{staticClass:"sure customerB"},[a("el-button",{on:{click:function(e){t.show=!1}}},[t._v("取消")]),t._v("  "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addCustomerSure("ruleFormCustomer")}}},[t._v("确定")])],1)],1),t._v(" "),a("van-actionsheet",{attrs:{title:t.linkmanTitle},model:{value:t.show1,callback:function(e){t.show1=e},expression:"show1"}},[a("el-form",{ref:"ruleFormC",staticClass:"demo-form-inline",attrs:{inline:!0,model:t.oneDataC,"label-width":"83px",rules:t.rulesC}},[a("div",{staticClass:"lk_center"},[a("el-form-item",{attrs:{label:"姓名:",prop:"linkman_name"}},[a("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"姓名"},model:{value:t.oneDataC.linkman_name,callback:function(e){t.$set(t.oneDataC,"linkman_name",e)},expression:"oneDataC.linkman_name"}})],1)],1),t._v(" "),a("div",{staticClass:"lk_center"},[a("el-form-item",{attrs:{label:"手机号码:",prop:"lk_phone"}},[a("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"手机号码"},model:{value:t.oneDataC.lk_phone,callback:function(e){t.$set(t.oneDataC,"lk_phone",e)},expression:"oneDataC.lk_phone"}})],1)],1),t._v(" "),a("div",{staticClass:"lk_center"},[a("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[a("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"邮箱"},model:{value:t.oneDataC.email,callback:function(e){t.$set(t.oneDataC,"email",e)},expression:"oneDataC.email"}})],1)],1),t._v(" "),a("div",{staticClass:"lk_center"},[a("el-form-item",{attrs:{label:"所在地区:",prop:"address1"}},[a("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"请选择所在地区",readonly:""},on:{focus:function(e){t.selectArea(2)}},model:{value:t.oneDataC.address1,callback:function(e){t.$set(t.oneDataC,"address1",e)},expression:"oneDataC.address1"}})],1)],1),t._v(" "),a("div",{staticClass:"lk_center"},[a("el-form-item",{attrs:{label:"详细地址:",prop:"lk_address"}},[a("el-input",{staticStyle:{width:"190px"},attrs:{placeholder:"请输入详细地址",type:"textarea"},model:{value:t.oneDataC.lk_address,callback:function(e){t.$set(t.oneDataC,"lk_address",e)},expression:"oneDataC.lk_address"}})],1)],1),t._v(" "),a("div",{staticClass:"lk_center"},[a("el-form-item",{attrs:{label:"邮编",prop:"zipcode"}},[a("el-input",{staticClass:"input-width",attrs:{placeholder:"邮编"},model:{value:t.oneDataC.zipcode,callback:function(e){t.$set(t.oneDataC,"zipcode",e)},expression:"oneDataC.zipcode"}})],1)],1)]),t._v(" "),a("div",{staticClass:"sure"},[a("el-button",{on:{click:function(e){t.show1=!1}}},[t._v("取消")]),t._v("  "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addLinkmanSure("ruleFormC")}}},[t._v("确定")])],1)],1),t._v(" "),a("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-row",{staticStyle:{display:"flex","align-items":"center"}},[a("van-col",{staticStyle:{"padding-left":"5px"},attrs:{span:"19"}},[a("van-pagination",{attrs:{"page-count":t.allPage,"show-page-size":3,"items-per-page":5,"force-ellipses":""},on:{change:t.handleCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("van-col",{staticStyle:{"padding-left":"5px","padding-right":"5px"},attrs:{span:"5"}},[a("el-input",{attrs:{placeholder:t.plTotalPage,onkeyup:"this.value=this.value.replace(/[^0-9-]+/,'')"},on:{change:t.InputCurrentPage},model:{value:t.inputPage,callback:function(e){t.inputPage=e},expression:"inputPage"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"autos"},[a("van-actionsheet",{model:{value:t.show2,callback:function(e){t.show2=e},expression:"show2"}},[a("van-area",{attrs:{"area-list":t.areaList,"columns-num":3,title:"请选择省市区"},on:{confirm:t.areaSure,cancel:t.areaCancel}})],1)],1),t._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeCloseLinkman,title:"删除",message:"你确定要删除"},model:{value:t.dialogVisible,callback:function(e){t.dialogVisible=e},expression:"dialogVisible"}}),t._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeCloseCustomer,title:"删除",message:"你确定要删除"},model:{value:t.delCustomeDialog,callback:function(e){t.delCustomeDialog=e},expression:"delCustomeDialog"}})],1)},[],!1,null,null,null));je.options.__file="customer.vue";var Ne=je.exports,Qe={data:function(){return{listShow:!1,activeNames:[],checkedGoods:[],searData:{sear:"",edat:"",mate:"",mold:"",surf:"",equi:"",page:""},technologyList:[],bookListStatus:[{label:"未开始",value:0},{label:"正在生产",value:1},{label:"生产结束",value:2}],materialList:[],equipmentList:[],surfaceList:[],tableData:[],active:0,allPage:1,currentPage:1,inputPage:"",plTotalPage:"5",perPage:5,showBook:!1,oneData:{},depusersList:[],checked:!1,allId:[],allCurrentId:[],showRiQi:!1,currentDate:new Date,riqiStatus:"",itemData:{},showRiQiSear:!1,currentDateSear:new Date}},methods:{clearSear:function(){this.searData={},this.searData.page=1},initDepusers:function(){var t=this;Object(p.c)().then(function(e){var a=e.data;t.depusersList=t.selectChanage(a,"name")}).catch(function(t){return console.log("获取工程师列表失败")})},selectChanage:function(t,e){var a=[];return t.forEach(function(t,i){var n={};n.value=t.id,n.label=t[e],a.push(n)}),a},initTechnology:function(){var t=this;Object(C.f)().then(function(e){t.technologyList=[];var a=e.data;t.technologyList=t.selectChanage(a,"name")}).catch(function(t){console.log("获取生产工艺列表失败")})},initMateria:function(t){var e=this;Object(p.j)(t).then(function(t){e.materialList=[];var a=t.data;e.materialListPrice=t.data,e.materialList=e.selectChanage(a,"name")}).catch(function(t){console.log("获取材质列表失败")})},initAllMateria:function(){var t=this;Object(C.d)().then(function(e){t.materialList=[];var a=e.data;t.materialListPrice=e.data,t.materialList=t.selectChanage(a,"name")}).catch(function(t){console.log(t),console.log("获取材质列表失败")})},initAllEquipment:function(t){var e=this;Object(C.b)(t).then(function(t){e.equipmentList=[];var a=t.data;e.equipmentList=e.selectChanage(a,"mname")}).catch(function(t){console.log("获取设备列表失败")})},initEquipment:function(t){var e=this;Object(p.d)(t).then(function(t){e.equipmentList=[];var a=t.data;e.equipmentList=e.selectChanage(a,"mname")}).catch(function(t){console.log("获取设备列表失败")})},initManage:function(){var t=this;Object(C.c)().then(function(e){t.surfaceList=[];var a=e.data;t.surfaceList=t.selectChanage(a,"name")}).catch(function(t){console.log("获取表面处理列表失败")})},selectTechnology:function(t){t?(this.$set(this.searData,"equi",""),this.$set(this.searData,"mate",""),this.initEquipment(t),this.initMateria(t)):(this.$set(this.searData,"equi",""),this.$set(this.searData,"mate",""),this.equipmentList=[],this.materialList=[])},inputCurrentPage:function(t){this.currentPage=Number(t),this.searData.page=this.currentPage,this.initParts(this.searData)},handleCloseBook:function(){this.showBook=!1},initParts:function(t){var e=this;ce(t).then(function(t){e.tableData=[],e.tableData=t.data.data,0==e.tableData.length?e.listShow=!0:e.listShow=!1,e.allPage=t.data.last_page,e.plTotalPage=t.data.last_page+"页",e.currentPage=t.data.current_page,e.perPage=Number(t.data.per_page),e.allCurrentId=[],e.checkedGoods=[];var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.tableData);!(a=(o=s.next()).done);a=!0){var r=o.value;r.volume_size=JSON.parse(r.volume_size),e.allCurrentId.push(r.id)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}var c=[],d=!0,u=!1,p=void 0;try{for(var h,v=l()(e.allCurrentId);!(d=(h=v.next()).done);d=!0){var m=h.value,f=!0,_=!1,g=void 0;try{for(var b,y=l()(e.allId);!(f=(b=y.next()).done);f=!0){var w=b.value;m==w&&(c.push(w),e.checkedGoods.push(w))}}catch(t){_=!0,g=t}finally{try{!f&&y.return&&y.return()}finally{if(_)throw g}}}}catch(t){u=!0,p=t}finally{try{!d&&v.return&&v.return()}finally{if(u)throw p}}c.length==e.allCurrentId.length?e.checked=!0:e.checked=!1,0==c.length&&(e.checked=!1)}).catch(function(t){console.log(t)})},handleCurrentPage:function(t){this.searData.page=t,this.initParts(this.searData)},checkedSelect:function(t){if(0!=t.length){var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;this.allId.push(s)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}this.allId=[].concat(oe()(new ie.a(this.allId))),t=[].concat(oe()(new ie.a(t)));var r=this.allCurrentId.slice();r=r.sort(),t=t.sort();for(var c=0;c<r.length;c++)for(var d=0;d<t.length;d++)r[c]==t[d]&&r.splice(c,1);this.allId=this.allId.sort(),r=r.sort();for(var u=0;u<this.allId.length;u++)for(var p=0;p<r.length;p++)this.allId[u]==r[p]&&this.allId.splice(u,1);t.length!=this.allCurrentId.length?this.checked=!1:this.checked=!0}else{this.allId=[].concat(oe()(new ie.a(this.allId))),t=[].concat(oe()(new ie.a(t))),this.allCurrentId.sort(),this.allId.sort();for(var h=0;h<this.allCurrentId.length;h++)for(var v=0;v<this.allId.length;v++)this.allCurrentId[h]==this.allId[v]&&this.allId.splice(v,1)}},handleShenChan:function(t){var e=this,a={parts:[]};a.parts.push(t.id),de(a).then(function(t){e.oneData=t.data;var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.oneData.parts);!(a=(o=s.next()).done);a=!0){var r=o.value;r.volume_size=JSON.parse(r.volume_size),r.start_date=r.start_date.replace(/-/g,"/").split(" ")[0],r.due_date=r.due_date.replace(/-/g,"/").split(" ")[0]}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}e.showBook=!0}).catch(function(t){})},selectRiQi:function(t){this.itemData=t,this.showRiQi=!0},riqiSure:function(t){var e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),n=this.itemData.start_date,o=this.itemData.due_date,l=new Date(n).getTime(),s=new Date(o).getTime(),r=new Date(t).getTime();if(r<=s&&l<=r)this.itemData.jh_data=e+"/"+a+"/"+i,this.showRiQi=!1;else{var c=n.split(" ")[0]+" 至 "+o.split(" ")[0]+",请在该时间段选择交货日期";this.$dialog.alert({message:c}).then(function(){})}},riqiCancel:function(){this.showRiQi=!1},bookSure:function(){var t=this;if(this.oneData.prouid){var e={parts:[]};e.prouid=this.oneData.prouid,e.submit="1";var a=!0,i=!1,n=void 0;try{for(var o,s=l()(this.oneData.parts);!(a=(o=s.next()).done);a=!0){var r=o.value,c={};c.id=r.id,c.reqmen=r.reqmen,e.parts.push(c)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}e.customer_id=this.oneData.customer_id,e.no=this.oneData.no;var d=this.$loading({lock:!0,text:"提交中，请等待",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:document.querySelector(".bookLoading")});de(e).then(function(e){t.showBook=!1,t.$toast.success("添加任务书成功"),t.searData.page=1,t.initParts(t.searData),t.allId=[],t.checkedGoods=[],d.close()}).catch(function(t){d.close()})}else this.$toast("请选择生产工程师")},handleDelOneparts:function(t){this.oneData.parts.splice(t,1)},allChecked:function(t){if(t){var e=!0,a=!1,i=void 0;try{for(var n,o=l()(this.tableData);!(e=(n=o.next()).done);e=!0){var s=n.value;this.checkedGoods.push(s.id)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}this.checkedGoods=[].concat(oe()(new ie.a(this.checkedGoods)))}else this.checkedGoods.length==this.allCurrentId.length&&(this.checkedGoods=[])},riqiSureSear:function(t){if(t){var e=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate();this.$set(this.searData,"edat",e),this.showRiQiSear=!1}else this.showRiQiSear=!1,this.$set(this.searData,"edat",""),console.log("没有值")},bookAddInitMany:function(){var t=this,e={parts:[]};e.parts=this.allId,de(e).then(function(e){if("100"==e.data.code)t.$message({message:e.data.msg,type:"warning"});else{t.oneData=e.data;var a=!0,i=!1,n=void 0;try{for(var o,s=l()(t.oneData.parts);!(a=(o=s.next()).done);a=!0){var r=o.value;r.volume_size=JSON.parse(r.volume_size),r.start_date=r.start_date.replace(/-/g,"/").split(" ")[0],r.due_date=r.due_date.replace(/-/g,"/").split(" ")[0]}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}t.showBook=!0}}).catch({})},onSubmit:function(){this.searData.page=1,this.initParts(this.searData)},seePicture:function(t){Object(v.a)({images:[t],asyncClose:!0})},jinzhiJianpan:function(){document.activeElement.blur()}},created:function(){this.initTechnology(),this.initManage(),this.initParts(this.searData),this.initDepusers(),this.initAllMateria(),this.initAllEquipment()},mounted:function(){}},Ie=(a("ny/z"),Object(g.a)(Qe,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"productionOneMo"},[a("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("van-collapse-item",{attrs:{title:"搜索",name:"1"}},[a("el-form",{staticClass:"center",attrs:{model:t.searData}},[a("el-form-item",[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入客户名称"},model:{value:t.searData.sear,callback:function(e){t.$set(t.searData,"sear",e)},expression:"searData.sear"}})],1),t._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择成型工艺",clearable:""},on:{change:t.selectTechnology},model:{value:t.searData.mold,callback:function(e){t.$set(t.searData,"mold",e)},expression:"searData.mold"}},t._l(t.technologyList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择成型设备",clearable:""},model:{value:t.searData.equi,callback:function(e){t.$set(t.searData,"equi",e)},expression:"searData.equi"}},t._l(t.equipmentList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择成型材质",clearable:""},model:{value:t.searData.mate,callback:function(e){t.$set(t.searData,"mate",e)},expression:"searData.mate"}},t._l(t.materialList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择表面处理",clearable:""},model:{value:t.searData.surf,callback:function(e){t.$set(t.searData,"surf",e)},expression:"searData.surf"}},t._l(t.surfaceList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择日期",readonly:""},on:{focus:function(e){t.showRiQiSear=!0}},model:{value:t.searData.edat,callback:function(e){t.$set(t.searData,"edat",e)},expression:"searData.edat"}})],1),t._v(" "),a("div",[a("span",[a("el-button",{attrs:{size:"small"},on:{click:t.clearSear}},[t._v("清空")])],1),t._v("\n\t\t\t\t\t\t  \n\t\t\t\t\t\t\t"),a("span",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSubmit}},[t._v("查询")])],1)])],1)],1)],1),t._v(" "),a("van-row",{staticStyle:{"padding-left":"5px","margin-top":"10px","padding-bottom":"10px","border-bottom":"1px solid rgb(229, 229, 229)",display:"flex","align-items":"center"}},[a("van-col",{attrs:{span:"6"}},[a("van-checkbox",{on:{change:t.allChecked},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("全选")])],1),t._v(" "),a("van-col",{staticStyle:{"vertical-align":"top"},attrs:{span:"18"}},[a("el-button",{attrs:{size:"mini"},on:{click:t.bookAddInitMany}},[t._v("批量生产")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.initParts(t.searData)}}},[t._v("刷新列表")])],1)],1),t._v(" "),t.listShow?a("van-row",{staticStyle:{"margin-top":"10px"}},[t._v("无待加工零件")]):t._e(),t._v(" "),a("van-checkbox-group",{staticClass:"card-goods",on:{change:t.checkedSelect},model:{value:t.checkedGoods,callback:function(e){t.checkedGoods=e},expression:"checkedGoods"}},t._l(t.tableData,function(e,i){return a("van-row",{key:e.index,staticStyle:{"margin-top":"10px",padding:"5px","border-bottom":"1px solid #e5e5e5"}},[a("van-row",[a("van-col",{attrs:{span:"2"}},[a("van-checkbox",{key:e.id,staticClass:"card-goods__item",attrs:{name:e.id}})],1),t._v(" "),a("van-col",{staticStyle:{height:"80px",display:"flex","align-items":"center"},attrs:{span:"8"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.diagram,alt:""},on:{click:function(a){t.seePicture(e.diagram)}}})]),t._v(" "),a("van-col",{attrs:{span:"1"}},[t._v(" ")]),t._v(" "),a("van-col",{staticClass:"font_d",attrs:{span:"13"}},[a("div",[a("span",{staticStyle:{"font-size":"17px"},style:{color:e.name.indexOf("-重做")>0?"blue":"#444"}},[t._v(t._s(e.name)+" ")])]),t._v(" "),a("div",[t._v(t._s(e.cusname))]),t._v(" "),a("div",[t._v(t._s(e.orderno))]),t._v(" "),a("div",[t._v("数量:"+t._s(e.product_num))])])],1),t._v(" "),a("div",{staticStyle:{"font-size":"0.8rem","line-height":"1.2rem","margin-top":"5px"}},[t._v(t._s(e.modname)+"    "+t._s(e.equname)+"    "+t._s(e.matname)+"    "+t._s(e.surname))]),t._v(" "),a("div",{staticStyle:{"font-size":"0.8rem","line-height":"1.2rem","word-wrap":"break-word","word-break":"break-all"}},[t._v("尺寸 : 长 : "+t._s(e.volume_size.xx)+"mm 宽 : "+t._s(e.volume_size.zz)+"mm 高\n : "+t._s(e.volume_size.yy)+"mm 体积 : "+t._s(e.volume_size.volume)+"mm³")]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"100%","padding-bottom":"5px"}},[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.handleShenChan(e)}}},[t._v("生产")])],1)],1)})),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-row",{staticStyle:{display:"flex","align-items":"center"}},[a("van-col",{staticStyle:{"padding-left":"5px"},attrs:{span:"19"}},[a("van-pagination",{attrs:{"page-count":t.allPage,"show-page-size":3,"items-per-page":t.perPage,"force-ellipses":""},on:{change:t.handleCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("van-col",{staticStyle:{"padding-left":"5px","padding-right":"5px"},attrs:{span:"5"}},[a("el-input",{attrs:{placeholder:t.plTotalPage,onkeyup:"this.value=this.value.replace(/[^0-9-]+/,'')"},on:{change:function(e){t.inputCurrentPage(e)}},model:{value:t.inputPage,callback:function(e){t.inputPage=e},expression:"inputPage"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"quanping"},[a("van-actionsheet",{attrs:{title:"生产任务书"},model:{value:t.showBook,callback:function(e){t.showBook=e},expression:"showBook"}},[a("div",{staticClass:"book"},[a("h3",[t._v("生产任务书"),a("br"),t._v("供需方信息区域")]),t._v(" "),a("div",{staticStyle:{border:"1px solid #d6d6d6",padding:"6px"}},[a("div",[t._v("生产任务书编号 : "+t._s(t.oneData.no))]),t._v(" "),a("div",[t._v("日期 : "+t._s(t.oneData.created_at))]),t._v(" "),a("div",[t._v("收货方 : "+t._s(t.oneData.cusname))])]),t._v(" "),a("div",{staticStyle:{border:"1px solid #d6d6d6","margin-top":"10px",padding:"6px"}},[a("div",[t._v("制作方")]),t._v(" "),a("div",[t._v("销售工程师 : "+t._s(t.oneData.saler?t.oneData.saler.name:"")+"    "+t._s(t.oneData.saler?t.oneData.saler.phone:""))]),t._v(" "),a("div",[t._v("项目工程师 : "+t._s(t.oneData.pojer?t.oneData.pojer.name:"")+"    "+t._s(t.oneData.pojer?t.oneData.pojer.phone:""))]),t._v(" "),a("div",[t._v("项目经理 : "+t._s(t.oneData.manger?t.oneData.manger.name:"")+"    "+t._s(t.oneData.manger?t.oneData.manger.phone:""))])]),t._v(" "),a("h3",[t._v("零件清单区域")]),t._v(" "),a("p",[t._v("\n\t\t\t\t\t\t生产工程师\n\t\t\t\t\t\t"),a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"生产工程师"},model:{value:t.oneData.prouid,callback:function(e){t.$set(t.oneData,"prouid",e)},expression:"oneData.prouid"}},t._l(t.depusersList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("ul",{staticClass:"partsLi"},t._l(t.oneData.parts,function(e,i){return a("li",{staticStyle:{position:"relative"}},[a("i",{staticClass:"el-icon-circle-close-outline",staticStyle:{position:"absolute",right:"5px",top:"5px",color:"#999999","font-size":"1.1rem"},on:{click:function(e){t.handleDelOneparts(i)}}}),t._v(" "),a("van-row",{staticClass:"l_m_p"},[a("van-col",{attrs:{span:10}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.diagram,alt:""},on:{click:function(a){t.seePicture(e.diagram)}}})]),t._v(" "),a("van-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),a("van-col",{attrs:{span:13}},[a("p",{style:{color:e.name.indexOf("-重做")>0?"blue":"#444"}},[t._v(t._s(e.name))]),t._v(" "),a("p",[t._v(t._s(e.orderno))]),t._v(" "),a("p",[t._v(t._s(e.modname)+"   "+t._s(e.equname)+"   "+t._s(e.matname)+"   "+t._s(e.surname))])])],1),t._v(" "),a("p",[t._v("订单拟启动时刻 : "+t._s(e.start_date))]),t._v(" "),a("p",[t._v("拟到货时刻 : "+t._s(e.due_date))]),t._v(" "),a("p",[t._v("备注 :"+t._s(e.remark))]),t._v(" "),a("p",{staticStyle:{"word-wrap":"break-word","word-break":"break-all"}},[t._v("尺寸 : 长 : "+t._s(e.volume_size.xx)+"mm 宽 : "+t._s(e.volume_size.zz)+"mm 高\n : "+t._s(e.volume_size.yy)+"mm 体积 : "+t._s(e.volume_size.volume)+"mm³")]),t._v(" "),a("p",{staticStyle:{"margin-top":"10px"}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入处理要求"},model:{value:e.reqmen,callback:function(a){t.$set(e,"reqmen",a)},expression:"item.reqmen"}})],1)],1)})),t._v(" "),a("div",{staticClass:"bookLoading",staticStyle:{margin:"10px 0","padding-bottom":"10px",display:"flex","justify-content":"flex-end"}},[a("el-button",{on:{click:function(e){t.showBook=!1}}},[t._v("取消")]),t._v("  "),a("el-button",{attrs:{type:"primary"},on:{click:t.bookSure}},[t._v("确定")])],1)])])],1),t._v(" "),a("van-actionsheet",{attrs:{title:"选择日期"},model:{value:t.showRiQi,callback:function(e){t.showRiQi=e},expression:"showRiQi"}},[a("van-datetime-picker",{attrs:{type:"date"},on:{confirm:t.riqiSure,cancel:t.riqiCancel},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),t._v(" "),a("van-actionsheet",{attrs:{title:"选择日期"},model:{value:t.showRiQiSear,callback:function(e){t.showRiQiSear=e},expression:"showRiQiSear"}},[a("van-datetime-picker",{attrs:{type:"date"},on:{confirm:t.riqiSureSear,cancel:function(e){t.riqiSureSear()}},model:{value:t.currentDateSear,callback:function(e){t.currentDateSear=e},expression:"currentDateSear"}})],1)],1)},[],!1,null,null,null));Ie.options.__file="productionOne.vue";var Ve=Ie.exports,Ee={data:function(){return{showManyTime:!1,planButtonShow:!1,searData:{},active:0,activeNames:[],technologyList:[],bookListStatus:[{label:"未开始",value:0},{label:"正在生产",value:1},{label:"生产结束",value:2}],materialList:[],equipmentList:[],surfaceList:[],bookTableData:[],allPage:1,currentPage:1,inputPage:"",plTotalPage:"5",perPage:5,showBook:!1,showPlan:!1,oneData:{},checkedGoods:[],oneId:"",onePartsData:{},showPicture:!1,picarrData:[],uploadLoading:!1,diashengSure:!1,onePlanDataCopy:{},diaManyshengSure:!1,showRiQi:!1,currentDate:new Date,riqiStatus:"",itemData:{},showRiQiSear:!1,currentDateSear:new Date,endTimeShow:!0,quanxuanShow:!0,setplTimeShow:!1,piliTime:new Date,piliTimeOne:"",piliTimeTwo:"",piliTimeStatus:"1",scSuccess:"已上传图片",shipingArrData:[],currentData:{},listShow:!1}},methods:{pTime:function(t){this.piliTime=new Date,this.piliTimeStatus="start"==t?1:2,this.setplTimeShow=!0},setplTimeSure:function(t){var e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),n=t.getHours(),o=t.getMinutes();n<10&&(n="0"+n),o<10&&(o="0"+o);var l=e+"/"+a+"/"+i+" "+n+":"+o+":00";1==this.piliTimeStatus?this.piliTimeTwo?new Date(t).getTime()<=new Date(this.piliTimeTwo).getTime()?(this.piliTimeOne=l,this.setplTimeShow=!1):this.$toast("拟启动时刻要小于等于拟完工时刻"):(this.piliTimeOne=l,this.setplTimeShow=!1):this.piliTimeOne?new Date(this.piliTimeOne).getTime()<=new Date(t).getTime()?(this.piliTimeTwo=l,this.setplTimeShow=!1):this.$toast("拟完工时刻要大于等于拟启动时刻"):(this.setplTimeShow=!1,this.$toast("请先选择拟启动时刻"))},setplTimeCancel:function(){this.setplTimeShow=!1},manyTime:function(){if(this.piliTimeOne="",this.piliTimeTwo="",this.checkedGoods.length>0){var t=!1,e=!0,a=!1,i=void 0;try{for(var n,o=l()(this.oneData.proplan);!(e=(n=o.next()).done);e=!0){var s=n.value,r=!0,c=!1,d=void 0;try{for(var u,p=l()(this.checkedGoods);!(r=(u=p.next()).done);r=!0){u.value==s.id&&s.realedate&&(t=!0)}}catch(t){c=!0,d=t}finally{try{!r&&p.return&&p.return()}finally{if(c)throw d}}}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}t?this.$toast("已选择零件中有生产完成的"):this.showManyTime=!0}else this.$toast("请选择零件")},setmanyTimeSure:function(){if(this.piliTimeOne)if(this.piliTimeTwo){var t=!1,e=new Date(this.piliTimeOne).getTime(),a=new Date(this.piliTimeTwo).getTime(),i=!0,n=!1,o=void 0;try{for(var s,r=l()(this.oneData.proplan);!(i=(s=r.next()).done);i=!0){var c=s.value,d=!0,u=!1,p=void 0;try{for(var h,v=l()(this.checkedGoods);!(d=(h=v.next()).done);d=!0){var m=h.value;if(c.id==m){var f=new Date(c.start_date).getTime();f<=e&&f<=a?(this.$set(c,"plstatime",this.piliTimeOne),this.$set(c,"plendtime",this.piliTimeTwo)):t=!0}}}catch(t){u=!0,p=t}finally{try{!d&&v.return&&v.return()}finally{if(u)throw p}}}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}t&&this.$toast({message:"部分零件未设置成功，原因是:拟启动时刻要大于拟订单启动时刻",duration:5e3}),this.showManyTime=!1}else this.$toast("请选择拟完工时刻");else this.$toast("请选择拟启动时刻")},clearSear:function(){this.searData={},this.searData.page=1},selectChanage:function(t,e){var a=[];return t.forEach(function(t,i){var n={};n.value=t.id,n.label=t[e],a.push(n)}),a},initTechnology:function(){var t=this;Object(C.f)().then(function(e){t.technologyList=[];var a=e.data;t.technologyList=t.selectChanage(a,"name")}).catch(function(t){console.log("获取生产工艺列表失败")})},initMateria:function(t){var e=this;Object(p.j)(t).then(function(t){e.materialList=[];var a=t.data;e.materialListPrice=t.data,e.materialList=e.selectChanage(a,"name")}).catch(function(t){console.log("获取材质列表失败")})},initAllMateria:function(){var t=this;Object(C.d)().then(function(e){t.materialList=[];var a=e.data;t.materialListPrice=e.data,t.materialList=t.selectChanage(a,"name")}).catch(function(t){console.log(t),console.log("获取材质列表失败")})},initAllEquipment:function(t){var e=this;Object(C.b)(t).then(function(t){e.equipmentList=[];var a=t.data;e.equipmentList=e.selectChanage(a,"mname")}).catch(function(t){console.log("获取设备列表失败")})},initEquipment:function(t){var e=this;Object(p.d)(t).then(function(t){e.equipmentList=[];var a=t.data;e.equipmentList=e.selectChanage(a,"mname")}).catch(function(t){console.log("获取设备列表失败")})},initManage:function(){var t=this;Object(C.c)().then(function(e){t.surfaceList=[];var a=e.data;t.surfaceList=t.selectChanage(a,"name")}).catch(function(t){console.log("获取表面处理列表失败")})},selectTechnology:function(t){t?(this.$set(this.searData,"equi",""),this.$set(this.searData,"mate",""),this.initEquipment(t),this.initMateria(t)):(this.$set(this.searData,"equi",""),this.$set(this.searData,"mate",""),this.equipmentList=[],this.materialList=[])},selectRiQi:function(t,e){this.itemData=t,this.showRiQi=!0,this.riqiStatus=e},riqiSure:function(t){var e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),n=t.getHours(),o=t.getMinutes();n<10&&(n="0"+n),o<10&&(o="0"+o);var l=e+"/"+a+"/"+i+" "+n+":"+o+":00";if("plstatime"==this.riqiStatus){var s=new Date(l).getTime();if(new Date(this.itemData.start_date).getTime()<=s){if(this.itemData.plendtime)if(new Date(l).getTime()<=new Date(this.itemData.plendtime).getTime())this.showRiQi=!1,this.itemData.plstatime=e+"/"+a+"/"+i+" "+n+":"+o+":00";else{var r="拟启动时刻要小于或等于"+this.itemData.plendtime;this.$dialog.alert({message:r}).then(function(){})}else this.showRiQi=!1,this.itemData.plstatime=e+"/"+a+"/"+i+" "+n+":"+o+":00"}else{this.itemData.plstatime="";var c="拟启动时刻要大于或等于"+this.itemData.start_date;this.$dialog.alert({message:c}).then(function(){})}}else if("plendtime"==this.riqiStatus)if(this.itemData.plstatime){var d,u="";if(d=new Date(t).getTime(),this.itemData.plstatime&&(u=new Date(this.itemData.plstatime).getTime()),d>=u)this.itemData.plendtime=e+"/"+a+"/"+i+" "+n+":"+o+":00",this.showRiQi=!1;else{var p="拟完工时刻要大于或等于"+this.itemData.plstatime;this.$dialog.alert({message:p}).then(function(){})}}else{var h="请选择拟启动时刻"+this.itemData.start_date;this.$dialog.alert({message:h}).then(function(){}),this.showRiQi=!1}},riqiCancel:function(){this.showRiQi=!1},riqiSureSear:function(t){if(t){var e=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate();this.$set(this.searData,"edat",e),this.showRiQiSear=!1}else this.showRiQiSear=!1,this.$set(this.searData,"edat",""),console.log("没有值")},initbook:function(t){var e=this;ue(t).then(function(t){e.bookTableData=[],e.allPage=t.data.last_page,e.plTotalPage=t.data.last_page+"页",e.currentPage=t.data.current_page,e.bookTableData=t.data.data,e.perPage=Number(t.data.per_page),e.bookTableData.length?e.listShow=!1:e.listShow=!0}).catch(function(t){console.log("获取生产任务书列表失败")})},handleCurrentPage:function(t){this.searData.page=t,this.initbook(this.searData)},handleChakan:function(t){var e=this;_e(t.id).then(function(t){e.showBook=!0,e.oneData=t.data;var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.oneData.parts);!(a=(o=s.next()).done);a=!0){var r=o.value;r.volume_size=JSON.parse(r.volume_size),r.start_date=r.start_date.replace(/-/g,"/").split(" ")[0],r.jh_data=r.jh_data.replace(/-/g,"/").split(" ")[0]}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}).catch(function(t){console.log(t)})},onSubmit:function(){this.searData.page=1,this.initbook(this.searData)},handlePlan:function(t){var e=this;this.currentData=t,this.planButtonShow=!1,this.quanxuanShow=!0,this.oneId=t.id,pe(t.id).then(function(t){e.showPlan=!0,e.onePlanDataCopy=JSON.parse(d()(t.data)),e.oneData=t.data,e.endTimeShow=!1;var a=0,i=function(t){ve({plenid:t.id}).then(function(a){var i=Number(a.data.images.length),n=Number(a.data.videos.length);e.$set(t,"picNum",i),e.$set(t,"vidNum",n)}).catch(function(t){}),t.volume_size=JSON.parse(t.volume_size),t.jhdata&&(t.jhdata=t.jhdata.replace(/-/g,"/").split(" ")[0]),t.plendtime&&(t.plendtime=t.plendtime.replace(/-/g,"/"),t.endTimeShow=!0,e.endTimeShow=!0),t.plstatime&&(t.plstatime=t.plstatime.replace(/-/g,"/")),t.realedate&&(t.realedate=t.realedate.replace(/-/g,"/").split(" ")[0],a+=1),t.start_date&&(t.start_date=t.start_date.replace(/-/g,"/").split(" ")[0])},n=!0,o=!1,s=void 0;try{for(var r,c=l()(e.oneData.proplan);!(n=(r=c.next()).done);n=!0){i(r.value)}}catch(t){o=!0,s=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw s}}e.oneData.proplan.length==a&&(e.planButtonShow=!0),e.checkedGoods=[]}).catch(function(t){})},InputCurrentPage:function(t){this.currentPage=Number(t),this.searData.page=this.currentPage,this.initbook(this.searData)},checkedSelect:function(t){},handleClearAllId:function(){this.quanxuanShow=!0,this.checkedGoods=[]},handleAllId:function(){this.quanxuanShow=!1,this.checkedGoods=[];var t=!0,e=!1,a=void 0;try{for(var i,n=l()(this.oneData.proplan);!(t=(i=n.next()).done);t=!0){var o=i.value;this.checkedGoods.push(o.id)}}catch(t){e=!0,a=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw a}}},handleEndtime:function(t,e){new Date(t).getTime()<new Date(e.plstatime).getTime()&&(this.$message({message:"计划结束日期要大于计划开始日期",type:"warning"}),e.plendtime="")},planSure:function(){var t=this,e={},a=[],i=!1,n=!0,o=!1,s=void 0;try{for(var r,c=l()(this.oneData.proplan);!(n=(r=c.next()).done);n=!0){var d=r.value,u={};u.id=d.id,u.plendtime=d.plendtime,u.plstatime=d.plstatime,u.plendtime&&u.plstatime&&(i=!0),a.push(u)}}catch(t){o=!0,s=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw s}}if(i){e.submit="1",e.proplan=a;var p=this.oneId,h=this.$loading({lock:!0,text:"提交中，请等待",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:document.querySelector(".planLoading")});pe(p,e).then(function(e){t.$toast.success("设置成功"),t.showPlan=!1,t.initbook(t.searchData),h.close()}).catch(function(t){h.close(),console.log("生产计划时间设置失败")})}else this.$toast("请至少为一个零件设置计划日期")},dateFocus:function(){},produceSure:function(t){var e="",a=!0,i=!1,n=void 0;try{for(var o,s=l()(this.onePlanDataCopy.proplan);!(a=(o=s.next()).done);a=!0){var r=o.value;r.id==t.id&&(e=r.plendtime)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}null==e?this.$toast("请先设置计划时间，点击确定"):(this.diashengSure=!0,this.shengData=t)},handleShengSure:function(){var t=this,e={};e.plenid=this.shengData.id,fe(e).then(function(e){t.$toast.success("生产完成"),t.$set(t.shengData,"realedate",e.data.realedate),t.initbook(t.searData),t.diashengSure=!1}).catch(function(t){})},handleCloseS:function(){this.diashengSure=!1,this.diaManyshengSure=!1},handlemanyProduce:function(){var t={};if(t.plenid=this.checkedGoods,t.plenid.length>0){var e=!0,a=!0,i=!0,n=!1,o=void 0;try{for(var s,r=l()(this.onePlanDataCopy.proplan);!(i=(s=r.next()).done);i=!0){var c=s.value,d=!0,u=!1,p=void 0;try{for(var h,v=l()(t.plenid);!(d=(h=v.next()).done);d=!0){var m=h.value;c.id==m&&null==c.plendtime&&(e=!1)}}catch(t){u=!0,p=t}finally{try{!d&&v.return&&v.return()}finally{if(u)throw p}}}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}var f=!0,_=!1,g=void 0;try{for(var b,y=l()(this.oneData.proplan);!(f=(b=y.next()).done);f=!0){var w=b.value,D=!0,x=!1,k=void 0;try{for(var S,C=l()(t.plenid);!(D=(S=C.next()).done);D=!0){var P=S.value;w.id==P&&w.realedate&&(a=!1)}}catch(t){x=!0,k=t}finally{try{!D&&C.return&&C.return()}finally{if(x)throw k}}}}catch(t){_=!0,g=t}finally{try{!f&&y.return&&y.return()}finally{if(_)throw g}}e?a?this.diaManyshengSure=!0:this.$toast("有零件已生成完成，请勿重复设置"):this.$toast("有零件未设置计划时间")}else this.$toast("请选择零件")},manyProduceSure:function(t){var e=this,a={};a.plenid=this.checkedGoods,a.plenid.length>0?fe(a).then(function(a){e.initbook(e.searData);var i=!0,n=!1,o=void 0;try{for(var s,r=l()(a.data);!(i=(s=r.next()).done);i=!0){var c=s.value,d=!0,u=!1,p=void 0;try{for(var h,v=l()(e.oneData.proplan);!(d=(h=v.next()).done);d=!0){var m=h.value;c.id==m.id&&e.$set(m,"realedate",c.realedate)}}catch(t){u=!0,p=t}finally{try{!d&&v.return&&v.return()}finally{if(u)throw p}}}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}var f=0,_=e.oneData.proplan.length,g=!0,b=!1,y=void 0;try{for(var w,D=l()(e.oneData.proplan);!(g=(w=D.next()).done);g=!0){w.value.realedate&&(f+=1)}}catch(t){b=!0,y=t}finally{try{!g&&D.return&&D.return()}finally{if(b)throw y}}f==_&&(e.planButtonShow=!0),t(),e.$toast.success("批量生产完成")}).catch(function(e){console.log("批量生产出错"),t()}):(this.$toast("请选择零件"),t())},shangPicture:function(t){var e=document.getElementById("inputFile");this.onePartsData=t,document.getElementById("inputFile").value=null,e.click()},inputShangeSure:function(t){var e=this,a=document.getElementById("inputFile").files,i=!0,n=!1,o=void 0;try{for(var s,r=l()(a);!(i=(s=r.next()).done);i=!0){var c=s.value;if(c.size/1024/1024<5){this.uploadLoading=!0;var d=new FormData;d.append("plenid",this.onePartsData.id),d.append("file",c),he(d).then(function(t){e.$toast.success("上传成功"),e.uploadLoading=!1}).catch(function(t){e.uploadLoading=!1,e.$toast.success("上传失败")}),this.handlePlan(this.currentData)}else this.$toast("该文件超过5m，不能上传")}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}},SeePicture:function(t,e){this.onePartsData=t,this.initPicArr(e)},handleClosePic:function(){this.showPicture=!1},handleClosePlan:function(){this.showPlan=!1},initPicArr:function(t){var e=this,a={};a.plenid=this.onePartsData.id,this.picarrData=[],ve(a).then(function(a){"images"==t?(e.picarrData=a.data.images,e.scSuccess="已上传图片"):(e.scSuccess="已上传视频",e.shipingArrData=a.data.videos),e.showPicture=!0}).catch(function(t){console.log(t)})},beforeClose:function(t,e){var a=this;if("confirm"===t){var i={};i.plenid=this.shengData.id,fe(i).then(function(t){a.$toast.success("生产完成"),a.$set(a.shengData,"realedate",t.data.realedate),a.initbook(a.searData);var i=0,n=a.oneData.proplan.length,o=!0,s=!1,r=void 0;try{for(var c,d=l()(a.oneData.proplan);!(o=(c=d.next()).done);o=!0){c.value.realedate&&(i+=1)}}catch(t){s=!0,r=t}finally{try{!o&&d.return&&d.return()}finally{if(s)throw r}}i==n&&(a.planButtonShow=!0),e()}).catch(function(t){})}else e()},beforeClosePiLiang:function(t,e){"confirm"===t?this.manyProduceSure(e):e()},dlepicture:function(t,e){var a=this,i={};i.plenid=this.onePartsData.id,i.filepath=t,me(i).then(function(t){a.$toast.success("删除成功"),a.initPicArr(e)}).catch(function(t){}),this.handlePlan(this.currentData)},jinzhiJianpan:function(){document.activeElement.blur()},seeDaPicture:function(t){Object(v.a)({images:[t],asyncClose:!0})}},created:function(){this.initTechnology(),this.initManage(),this.searData.page=1,this.initbook(this.searData),this.initAllMateria(),this.initAllEquipment()},mounted:function(){}},Le=(a("j85J"),Object(g.a)(Ee,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"productionTwoMo"},[a("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("van-collapse-item",{attrs:{title:"搜索",name:"1"}},[a("el-form",{staticClass:"center",attrs:{model:t.searData}},[a("el-form-item",[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入客户名称"},model:{value:t.searData.sear,callback:function(e){t.$set(t.searData,"sear",e)},expression:"searData.sear"}})],1),t._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择成型工艺",clearable:""},on:{change:t.selectTechnology},model:{value:t.searData.mold,callback:function(e){t.$set(t.searData,"mold",e)},expression:"searData.mold"}},t._l(t.technologyList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择成型设备",clearable:""},model:{value:t.searData.equi,callback:function(e){t.$set(t.searData,"equi",e)},expression:"searData.equi"}},t._l(t.equipmentList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择成型材质",clearable:""},model:{value:t.searData.mate,callback:function(e){t.$set(t.searData,"mate",e)},expression:"searData.mate"}},t._l(t.materialList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择表面处理",clearable:""},model:{value:t.searData.surf,callback:function(e){t.$set(t.searData,"surf",e)},expression:"searData.surf"}},t._l(t.surfaceList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择日期",readonly:""},on:{focus:function(e){t.showRiQiSear=!0}},model:{value:t.searData.edat,callback:function(e){t.$set(t.searData,"edat",e)},expression:"searData.edat"}})],1),t._v(" "),a("div",[a("span",[a("el-button",{attrs:{size:"small"},on:{click:t.clearSear}},[t._v("清空")])],1),t._v("\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t"),a("span",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSubmit}},[t._v("查询")])],1)])],1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.initbook(t.searData)}}},[t._v("刷新列表")])],1),t._v(" "),t.listShow?a("div",{staticStyle:{"margin-top":"10px"}},[t._v("暂无生产任务书")]):t._e(),t._v(" "),t._l(t.bookTableData,function(e,i){return a("van-row",{key:e.index,staticStyle:{"margin-top":"10px",padding:"5px","border-bottom":"1px solid #e5e5e5"}},[a("van-col",{attrs:{span:"3"}},[t._v("\n\t\t\t\t\t  \n\t\t\t\t")]),t._v(" "),a("van-col",{staticClass:"maindiv",attrs:{span:"21"}},[a("div",[t._v("\n\t\t\t\t\t\t客户名称 : "+t._s(e.cusname)+"   \n\t\t\t\t\t")]),t._v(" "),a("div",[t._v("任务书编号 : "+t._s(e.no))]),t._v(" "),a("div",[t._v("状态 : "+t._s(0==e.status?"未开始":1==e.status?"正在生产":"生产结束"))]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"100%",padding:"10px 0 5px"}},[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.handleChakan(e)}}},[t._v("生产任务书")]),t._v(" "),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){t.handlePlan(e)}}},[t._v("生产计划")])],1)])],1)}),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-row",{staticStyle:{display:"flex","align-items":"center"}},[a("van-col",{staticStyle:{"padding-left":"5px"},attrs:{span:"19"}},[a("van-pagination",{attrs:{"page-count":t.allPage,"show-page-size":3,"items-per-page":t.perPage,"force-ellipses":""},on:{change:t.handleCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("van-col",{staticStyle:{"padding-left":"5px","padding-right":"5px"},attrs:{span:"5"}},[a("el-input",{attrs:{placeholder:t.plTotalPage,onkeyup:"this.value=this.value.replace(/[^0-9-]+/,'')"},on:{change:function(e){t.InputCurrentPage(e)}},model:{value:t.inputPage,callback:function(e){t.inputPage=e},expression:"inputPage"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"quanping"},[a("van-actionsheet",{attrs:{title:"生产计划"},model:{value:t.showPlan,callback:function(e){t.showPlan=e},expression:"showPlan"}},[a("div",{staticClass:"book",staticStyle:{position:"relative"}},[t.uploadLoading?a("div",{staticStyle:{position:"absolute","z-index":"100",height:"100%",width:"100%",display:"flex","align-items":"center","justify-content":"center"}},[a("div",{staticStyle:{display:"flex","justify-content":"center","align-items":"center","background-color":"rgba(0,0,0,0.7)",padding:"20px","border-radius":"5px"}},[a("van-loading",{attrs:{type:"spinner",size:"40px"}}),t._v("  "),a("p",{staticStyle:{color:"#ffffff","vertical-align":"middle",padding:"0"}},[t._v("上传中，请等待")])],1)]):t._e(),t._v(" "),a("h3",{staticStyle:{"margin-top":"8px"}},[t._v("生产计划信息")]),t._v(" "),a("div",[t._v("生产任务书编号 : "+t._s(t.oneData.no))]),t._v(" "),a("div",[t._v("日期 : "+t._s(t.oneData.created_at))]),t._v(" "),a("div",[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:t.manyTime}},[t._v("批量设置零件计划日期")])],1),t._v(" "),a("h3",[t._v("零件清单区域")]),t._v(" "),a("ul",{staticClass:"partsLi"},[t.planButtonShow?t._e():a("div",[a("span",[t.quanxuanShow?a("el-button",{attrs:{size:"small"},on:{click:t.handleAllId}},[t._v("全选零件")]):t._e(),t._v(" "),t.quanxuanShow?t._e():a("el-button",{attrs:{size:"small"},on:{click:t.handleClearAllId}},[t._v("取消选择")])],1),t._v(" "),a("span",[t.endTimeShow?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.handlemanyProduce}},[t._v("批量生产完成")]):t._e()],1)]),t._v(" "),a("van-checkbox-group",{staticClass:"card-goods",on:{change:t.checkedSelect},model:{value:t.checkedGoods,callback:function(e){t.checkedGoods=e},expression:"checkedGoods"}},t._l(t.oneData.proplan,function(e){return a("li",[a("van-row",{staticStyle:{display:"flex","align-items":"center","margin-bottom":"5px"}},[a("van-col",{attrs:{span:"2"}},[a("van-checkbox",{key:e.id,staticClass:"card-goods__item",attrs:{name:e.id}})],1),t._v(" "),a("van-col",{style:{color:e.name.indexOf("-重做")>0?"blue":"#444"},attrs:{span:"21"}},[t._v("\n\t\t\t\t\t\t\t\t\t"+t._s(e.name)+"\n\t\t\t\t\t\t\t\t")])],1),t._v(" "),a("van-row",{staticClass:"l_m_p"},[a("van-col",{attrs:{span:10}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.diagram,alt:""},on:{click:function(a){t.seeDaPicture(e.diagram)}}})]),t._v(" "),a("van-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),a("van-col",{attrs:{span:13}},[a("p",[t._v(t._s(e.orderno))]),t._v(" "),a("p",[t._v(t._s(e.modname)+"        ")]),t._v(" "),a("p",[t._v(t._s(e.equname))]),t._v(" "),a("p",[t._v(t._s(e.matname))]),t._v(" "),a("p",[t._v(t._s(e.surname))])])],1),t._v(" "),a("p",[t._v("订单拟启动时刻 : "+t._s(e.start_date))]),t._v(" "),a("p",[t._v("实际完工时刻 : "+t._s(e.realedate))]),t._v(" "),a("p",[t._v("尺寸 : 长 : "+t._s(e.volume_size.xx)+"mm 宽 : "+t._s(e.volume_size.zz)+"mm 高 : "+t._s(e.volume_size.yy)+"mm 体积 : "+t._s(e.volume_size.volume)+"mm³")]),t._v(" "),a("p",[t._v("处理要求 :"+t._s(e.requirements))]),t._v(" "),e.realedate?a("p",[t._v("拟启动时刻 : "+t._s(e.plstatime))]):t._e(),t._v(" "),e.realedate?a("p",[t._v("拟完工时刻 : "+t._s(e.plendtime))]):t._e(),t._v(" "),e.picNum?a("p",[t._v("已上传图片 "+t._s(e.picNum)+" 张")]):t._e(),t._v(" "),e.vidNum?a("p",[t._v("已上传视频 "+t._s(e.vidNum)+" 个")]):t._e(),t._v(" "),e.realedate?t._e():a("div",[a("div",{staticStyle:{margin:"10px 0"}},[a("el-input",{attrs:{placeholder:"请选择拟启动时刻",readonly:""},on:{focus:function(a){t.selectRiQi(e,"plstatime")}},model:{value:e.plstatime,callback:function(a){t.$set(e,"plstatime",a)},expression:"item.plstatime"}})],1),t._v(" "),a("div",{staticStyle:{margin:"10px 0"}},[a("el-input",{attrs:{placeholder:"请选择拟完工时刻",readonly:""},on:{focus:function(a){t.selectRiQi(e,"plendtime")}},model:{value:e.plendtime,callback:function(a){t.$set(e,"plendtime",a)},expression:"item.plendtime"}})],1)]),t._v(" "),a("div",[a("van-row",{staticStyle:{"margin-top":"15px"}},[a("van-col",{attrs:{span:8}},[a("span",[e.realedate?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.shangPicture(e)}}},[t._v("上传")]):t._e()],1)]),t._v(" "),a("van-col",{staticStyle:{"text-align":"center"},attrs:{span:8}},[a("span",[e.realedate?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.SeePicture(e,"images")}}},[t._v("查看图片")]):t._e()],1)]),t._v(" "),a("van-col",{staticStyle:{"text-align":"right"},attrs:{span:8}},[a("span",[e.realedate?a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.SeePicture(e,"video")}}},[t._v("查看视频")]):t._e()],1),t._v(" "),e.endTimeShow?a("span",[e.realedate?t._e():a("span",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.produceSure(e)}}},[t._v("生产完成")])],1)]):t._e()])],1)],1)],1)}))],1),t._v(" "),a("div",{staticClass:"planLoading",staticStyle:{margin:"25px 0 15px","padding-bottom":"10px",display:"flex","justify-content":"flex-end"}},[t.planButtonShow?a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showPlan=!1}}},[t._v("关闭")]):t._e(),t._v(" "),t.planButtonShow?t._e():a("el-button",{on:{click:function(e){t.showPlan=!1}}},[t._v("取消")]),t._v(" "),t.planButtonShow?t._e():a("el-button",{attrs:{type:"primary"},on:{click:t.planSure}},[t._v("确定")])],1)])])],1),t._v(" "),a("div",{staticClass:"quanping"},[a("van-actionsheet",{attrs:{title:"生产任务书"},model:{value:t.showBook,callback:function(e){t.showBook=e},expression:"showBook"}},[a("div",{staticClass:"book"},[a("h3",[t._v("生产任务书"),a("br"),t._v("供需方信息区域")]),t._v(" "),a("div",{staticStyle:{border:"1px solid #d6d6d6",padding:"6px"}},[a("div",[t._v("生产任务书编号 : "+t._s(t.oneData.no))]),t._v(" "),a("div",[t._v("日期 : "+t._s(t.oneData.created_at))]),t._v(" "),a("div",[t._v("收货方 : "+t._s(t.oneData.cusname))]),t._v(" "),a("div",[t._v("生产任务书二维码 ")]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("img",{staticStyle:{width:"120px"},attrs:{src:t.oneData.qrcode_url,alt:""}})])]),t._v(" "),a("div",{staticStyle:{border:"1px solid #d6d6d6",padding:"6px","margin-top":"10px"}},[a("div",[t._v("制作方")]),t._v(" "),a("div",[t._v("销售工程师 : "+t._s(t.oneData.saler?t.oneData.saler.name:"")+"    "+t._s(t.oneData.saler?t.oneData.saler.phone:""))]),t._v(" "),a("div",[t._v("项目工程师 : "+t._s(t.oneData.pojer?t.oneData.pojer.name:"")+"    "+t._s(t.oneData.pojer?t.oneData.pojer.phone:""))]),t._v(" "),a("div",[t._v("项目经理 : "+t._s(t.oneData.manger?t.oneData.manger.name:"")+"    "+t._s(t.oneData.manger?t.oneData.manger.phone:""))]),t._v(" "),a("div",[t._v("生产工程师 : "+t._s(t.oneData.prouse_id?t.oneData.prouse_id.name:"")+"    "+t._s(t.oneData.prouse_id?t.oneData.prouse_id.phone:""))])]),t._v(" "),a("h3",[t._v("零件清单区域")]),t._v(" "),a("ul",{staticClass:"partsLi"},t._l(t.oneData.parts,function(e){return a("li",[a("van-row",{staticClass:"l_m_p"},[a("van-col",{attrs:{span:10}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.diagram,alt:""},on:{click:function(a){t.seeDaPicture(e.diagram)}}})]),t._v(" "),a("van-col",{attrs:{span:1}},[t._v(" ")]),t._v(" "),a("van-col",{attrs:{span:13}},[a("p",[t._v(t._s(e.name))]),t._v(" "),a("p",[t._v(t._s(e.orderno))]),t._v(" "),a("p",[t._v(t._s(e.modname)+"   "+t._s(e.equname)+"   "+t._s(e.matname)+"   "+t._s(e.surname))]),t._v(" "),a("p",[t._v("启动时间 : "+t._s(e.start_date))])])],1),t._v(" "),a("p",[t._v("备注 : "+t._s(e.remark))]),t._v(" "),a("p",[t._v("尺寸 : 长 : "+t._s(e.volume_size.xx)+"mm 宽 : "+t._s(e.volume_size.zz)+"mm 高 : "+t._s(e.volume_size.yy)+"mm 体积 : "+t._s(e.volume_size.volume)+"mm³")]),t._v(" "),a("p",[t._v("处理要求 : "+t._s(e.requirements))])],1)})),t._v(" "),a("div",{staticStyle:{margin:"10px 0","padding-bottom":"10px",display:"flex","justify-content":"flex-end"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showBook=!1}}},[t._v("关闭")])],1)])])],1),t._v(" "),a("div",{staticClass:"quanping"},[a("van-actionsheet",{attrs:{title:t.scSuccess},model:{value:t.showPicture,callback:function(e){t.showPicture=e},expression:"showPicture"}},[t._l(t.picarrData,function(e){return"已上传图片"==t.scSuccess?a("div",{staticStyle:{position:"relative",display:"flex","justify-content":"center","align-items":"center",padding:"10px 0"}},[a("img",{staticStyle:{width:"80%"},attrs:{src:e,alt:""}}),t._v(" "),a("div",{staticStyle:{position:"absolute","z-index":"2",right:"10%",top:"10px"}},[a("el-button",{on:{click:function(a){t.dlepicture(e,"images")}}},[t._v("删除")])],1)]):t._e()}),t._v(" "),t._l(t.shipingArrData,function(e){return"已上传视频"==t.scSuccess?a("div",{staticStyle:{position:"relative",display:"flex","justify-content":"center","align-items":"center",padding:"10px 0"}},[a("video",{staticStyle:{width:"80%"},attrs:{src:e,controls:""}}),t._v(" "),a("div",{staticStyle:{position:"absolute","z-index":"2",right:"10%",top:"10px"}},[a("el-button",{on:{click:function(a){t.dlepicture(e,"videos")}}},[t._v("删除")])],1)]):t._e()})],2)],1),t._v(" "),a("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"inputFile",multiple:""},on:{change:function(e){t.inputShangeSure()}}}),t._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeClose,title:"提示"},model:{value:t.diashengSure,callback:function(e){t.diashengSure=e},expression:"diashengSure"}},[a("div",{staticStyle:{"text-align":"center","font-size":"0.9rem",margin:"0.5rem"}},[t._v("你确定生产完成")])]),t._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeClosePiLiang,title:"提示"},model:{value:t.diaManyshengSure,callback:function(e){t.diaManyshengSure=e},expression:"diaManyshengSure"}},[a("div",{staticStyle:{"text-align":"center","font-size":"0.9rem",margin:"0.5rem"}},[t._v("你确定要批量生产完成")])]),t._v(" "),a("van-actionsheet",{attrs:{title:"选择日期"},model:{value:t.showRiQi,callback:function(e){t.showRiQi=e},expression:"showRiQi"}},[a("van-datetime-picker",{attrs:{type:"datetime"},on:{confirm:t.riqiSure,cancel:t.riqiCancel},model:{value:t.currentDate,callback:function(e){t.currentDate=e},expression:"currentDate"}})],1),t._v(" "),a("van-actionsheet",{attrs:{title:"选择日期"},model:{value:t.showRiQiSear,callback:function(e){t.showRiQiSear=e},expression:"showRiQiSear"}},[a("van-datetime-picker",{attrs:{type:"date"},on:{confirm:t.riqiSureSear,cancel:function(e){t.riqiSureSear()}},model:{value:t.currentDateSear,callback:function(e){t.currentDateSear=e},expression:"currentDateSear"}})],1),t._v(" "),a("van-actionsheet",{attrs:{title:"选择时刻"},model:{value:t.setplTimeShow,callback:function(e){t.setplTimeShow=e},expression:"setplTimeShow"}},[a("van-datetime-picker",{attrs:{type:"datetime"},on:{confirm:t.setplTimeSure,cancel:t.setplTimeCancel},model:{value:t.piliTime,callback:function(e){t.piliTime=e},expression:"piliTime"}})],1),t._v(" "),a("div",{staticClass:"quanping"},[a("van-actionsheet",{attrs:{title:"设置零件的计划时刻"},model:{value:t.showManyTime,callback:function(e){t.showManyTime=e},expression:"showManyTime"}},[a("div",{staticStyle:{width:"90%",margin:"0 auto"}},[a("p",[t._v("设置拟启动时刻")]),t._v(" "),a("el-input",{attrs:{placeholder:"请选择拟启动时刻",readonly:""},on:{focus:function(e){t.pTime("start")}},model:{value:t.piliTimeOne,callback:function(e){t.piliTimeOne=e},expression:"piliTimeOne"}}),t._v(" "),a("p",[t._v("设置拟完工时刻")]),t._v(" "),a("el-input",{attrs:{placeholder:"请选择拟启动时刻",readonly:""},on:{focus:function(e){t.pTime("end")}},model:{value:t.piliTimeTwo,callback:function(e){t.piliTimeTwo=e},expression:"piliTimeTwo"}}),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"20px"}},[a("div",[a("el-button",{on:{click:function(e){t.showManyTime=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.setmanyTimeSure}},[t._v("确定")])],1)])],1)])],1)],2)},[],!1,null,null,null));Le.options.__file="productionTwo.vue";var Fe={data:function(){return{show1:!0,show2:!1,activeName:"first",addShow:!1}},methods:{handleClick:function(t){"待加工零件"==t.label?(this.show1=!0,this.show2=!1):(this.show1=!1,this.show2=!0)}},created:function(){var t=f.a.get("actionArr");t=JSON.parse(t);var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){"add"==n.value&&(this.addShow="true")}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}this.addShow||(this.activeName="second",this.show2=!0)},mounted:function(){},components:{productionOne:Ve,productionTwo:Le.exports}},Ae=Object(g.a)(Fe,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t.addShow?a("el-tab-pane",{attrs:{label:"待加工零件",name:"first"}},[t.show1?a("div",[a("productionOne")],1):t._e()]):t._e(),t._v(" "),a("el-tab-pane",{attrs:{label:"生产任务书",name:"second"}},[t.show2?a("div",[a("productionTwo")],1):t._e()])],1)],1)},[],!1,null,null,null);Ae.options.__file="prouduction.vue";var Be=Ae.exports,Me={data:function(){return{options:[{label:"已完成生产未发货",value:2},{label:"已分批发货",value:3},{label:"发货完成",value:4}],activeNames:[],searData:{},checkedGoods:[],allCurrentId:[],allId:[],checked:!1,tableData:[],allPage:1,currentPage:1,inputPage:"",plTotalPage:"5",perPage:5,active:0,oneData:{},showSendOrder:!1,expressList:[],optionSend:[{value:"0",label:"快递"},{value:"1",label:"自送"},{value:"2",label:"自提"}],kuaidiShow:!0,showRiQiSear:!1,currentDateSear:new Date,listShow:!1}},methods:{clearSear:function(){this.searData={},this.searData.page=1},initSendOrder:function(t){var e=this;De(t).then(function(t){if("100"==t.data.code)e.$message({message:t.data.msg,type:"warning"});else{e.showSendOrder=!0,e.oneData=r()({},t.data),t.data.savefax?e.$set(e.oneData,"express_code",t.data.savefax):e.$set(e.oneData,"express_code",""),e.$set(e.oneData,"dismod","0"),e.kuaidiShow=!0;var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.oneData.parts);!(a=(o=s.next()).done);a=!0){var c=o.value;c.volume_size=JSON.parse(c.volume_size),c.due_date&&(c.due_date=c.due_date.replace(/-/g,"/").split(" ")[0]),c.yscounta?c.zyscounta=Number(c.product_num)-Number(c.yscounta):c.zyscounta=Number(c.product_num)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}}).catch(function(t){console.log("发货单失败")})},initParts:function(t){var e=this;we(t).then(function(t){e.tableData=[],e.tableData=t.data.data,e.allPage=t.data.last_page,e.plTotalPage=t.data.last_page+"页",e.currentPage=t.data.current_page,e.perPage=Number(t.data.per_page),e.allCurrentId=[],e.checkedGoods=[];var a=[{value:0,label:"等待生产"},{value:1,label:"生产中"},{value:2,label:"生产完成"},{value:3,label:"已分批发货"},{value:4,label:"发货完成"}],i=!0,n=!1,o=void 0;try{for(var s,r=l()(e.tableData);!(i=(s=r.next()).done);i=!0){var c=s.value,d=!0,u=!1,p=void 0;try{for(var h,v=l()(a);!(d=(h=v.next()).done);d=!0){var m=h.value;c.status==m.value&&(c.status=m.label)}}catch(t){u=!0,p=t}finally{try{!d&&v.return&&v.return()}finally{if(u)throw p}}}}catch(t){n=!0,o=t}finally{try{!i&&r.return&&r.return()}finally{if(n)throw o}}var f=!0,_=!1,g=void 0;try{for(var b,y=l()(e.tableData);!(f=(b=y.next()).done);f=!0){var w=b.value;w.volume_size=JSON.parse(w.volume_size),w.due_date&&(w.due_date=w.due_date.replace(/-/g,"/").split(" ")[0]),e.allCurrentId.push(w.id)}}catch(t){_=!0,g=t}finally{try{!f&&y.return&&y.return()}finally{if(_)throw g}}var D=[],x=!0,k=!1,S=void 0;try{for(var C,P=l()(e.allCurrentId);!(x=(C=P.next()).done);x=!0){var $=C.value,z=!0,q=!1,T=void 0;try{for(var O,j=l()(e.allId);!(z=(O=j.next()).done);z=!0){var N=O.value;$==N&&(D.push(N),e.checkedGoods.push(N))}}catch(t){q=!0,T=t}finally{try{!z&&j.return&&j.return()}finally{if(q)throw T}}}}catch(t){k=!0,S=t}finally{try{!x&&P.return&&P.return()}finally{if(k)throw S}}D.length==e.allCurrentId.length?e.checked=!0:e.checked=!1,e.tableData.length?e.listShow=!1:e.listShow=!0}).catch(function(t){console.log(t)})},onSubmit:function(){this.searData.page=1,this.initParts(this.searData)},allChecked:function(t){if(t){var e=!0,a=!1,i=void 0;try{for(var n,o=l()(this.tableData);!(e=(n=o.next()).done);e=!0){var s=n.value;this.checkedGoods.push(s.id)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}this.checkedGoods=[].concat(oe()(new ie.a(this.checkedGoods)))}else this.checkedGoods.length==this.allCurrentId.length&&(this.checkedGoods=[])},checkedSelect:function(t){if(0!=t.length){var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;this.allId.push(s)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}this.allId=[].concat(oe()(new ie.a(this.allId))),t=[].concat(oe()(new ie.a(t)));var r=this.allCurrentId.slice();r=r.sort(),t=t.sort();for(var c=0;c<r.length;c++)for(var d=0;d<t.length;d++)r[c]==t[d]&&r.splice(c,1);this.allId=this.allId.sort(),r=r.sort();for(var u=0;u<this.allId.length;u++)for(var p=0;p<r.length;p++)this.allId[u]==r[p]&&this.allId.splice(u,1);t.length!=this.allCurrentId.length?this.checked=!1:this.checked=!0}else{this.allId=[].concat(oe()(new ie.a(this.allId))),t=[].concat(oe()(new ie.a(t))),this.allCurrentId.sort(),this.allId.sort();for(var h=0;h<this.allCurrentId.length;h++)for(var v=0;v<this.allId.length;v++)this.allCurrentId[h]==this.allId[v]&&this.allId.splice(v,1)}},handleCurrentPage:function(t){this.searData.page=Number(t),this.initParts(this.searData)},riqiSureSear:function(t){if(t){var e=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate();this.$set(this.searData,"edat",e),this.showRiQiSear=!1}else this.showRiQiSear=!1,this.$set(this.searData,"edat",""),console.log("没有值")},handleSend:function(t){if(t){var e=[];e.push(t.id);var a={parts:e};this.initSendOrder(a)}else{var i={parts:this.allId};this.initSendOrder(i)}},partsNum:function(t,e){t.indexOf(".")>0&&this.$toast("送货数量要为整数");var a=Number(e.product_num)-Number(e.yscounta);Number(t)>a&&this.$toast("零件数量不能超过"+a)},selectKuaidi:function(t){this.kuaidiShow=0==t},inputCurrentPage:function(t){this.currentPage=Number(t),this.searData.page=this.currentPage,this.initParts(this.searData)},handleCloseSendOrder:function(){this.showSendOrder=!1},seeDaPicture:function(t){Object(v.a)({images:[t],asyncClose:!0})},jinzhiJianpan:function(){document.activeElement.blur()},SendSure:function(){var t=this,e=r()({},this.oneData);if(0==e.dismod||e.dismod)if(0!=e.dismod||e.express_code&&e.express_no){e.dismod=Number(e.dismod);var a=!0,i=!1,n=void 0;try{for(var o,s=l()(this.expressList);!(a=(o=s.next()).done);a=!0){var c=o.value;e.express_code==c.value&&(e.express_name=c.label)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}var d=!1,u=!0,p=!1,h=void 0;try{for(var v,m=l()(e.parts);!(u=(v=m.next()).done);u=!0){var f=v.value;delete f.diagram,f.yscount=f.zyscounta;var _=Number(f.product_num)-Number(f.yscounta);Number(f.yscount)>_&&(d=!0),String(f.yscount).indexOf(".")>0&&(d=!0)}}catch(t){p=!0,h=t}finally{try{!u&&m.return&&m.return()}finally{if(p)throw h}}if(d)this.$toast("发货零件数量有误");else{e.submit="1";var g=this.$loading({lock:!0,text:"提交中，请等待",spinner:"el-icon-loading",background:"rgba(255, 255, 255, 1)",target:document.querySelector(".send")});De(e).then(function(e){100==e.data.code?(t.$message({message:e.data.msg,type:"warning"}),g.close()):(t.showSendOrder=!1,t.$toast.success("发货单提交成功"),t.searData.page=1,t.initParts(t.searchData),g.close())}).catch(function(t){console.log("发货单提交失败"),g.close()})}}else this.$toast("请输入快递公司和单号");else this.$toast("请选择发货方式")}},created:function(){var t=this;this.searData.page=1,this.initParts(this.searData),xe().then(function(e){t.expressList=[];var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.data);!(a=(o=s.next()).done);a=!0){var r=o.value,c={};c.label=r.exname,c.value=r.code,t.expressList.push(c)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}}).catch(function(t){console.log("快递列表获取失败")})}},Re=(a("NxWF"),Object(g.a)(Me,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"successPartsM"},[a("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("van-collapse-item",{attrs:{title:"搜索",name:"1"}},[a("el-form",{staticClass:"center",attrs:{model:t.searData}},[a("el-form-item",[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入客户名称"},model:{value:t.searData.sear,callback:function(e){t.$set(t.searData,"sear",e)},expression:"searData.sear"}})],1),t._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择生产状态",clearable:""},model:{value:t.searData.mold,callback:function(e){t.$set(t.searData,"mold",e)},expression:"searData.mold"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入订单编号"},model:{value:t.searData.orde,callback:function(e){t.$set(t.searData,"orde",e)},expression:"searData.orde"}})],1),t._v(" "),a("el-form-item",[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择日期",readonly:""},on:{focus:function(e){t.showRiQiSear=!0}},model:{value:t.searData.edat,callback:function(e){t.$set(t.searData,"edat",e)},expression:"searData.edat"}})],1),t._v(" "),a("div",[a("span",[a("el-button",{attrs:{size:"small"},on:{click:t.clearSear}},[t._v("清空")])],1),t._v("\n\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t"),a("span",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSubmit}},[t._v("查询")])],1)])],1)],1)],1),t._v(" "),a("van-row",{staticStyle:{"padding-left":"5px","margin-top":"10px","padding-bottom":"10px","border-bottom":"1px solid rgb(229, 229, 229)",display:"flex","align-items":"center"}},[a("van-col",{attrs:{span:"6"}},[a("van-checkbox",{on:{change:t.allChecked},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("全选")])],1),t._v(" "),a("van-col",{staticStyle:{"vertical-align":"top"},attrs:{span:"18"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.handleSend()}}},[t._v("批量发货")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.initParts(t.searData)}}},[t._v("刷新列表")])],1)],1),t._v(" "),t.listShow?a("div",{staticStyle:{"margin-top":"10px"}},[t._v("暂无已完成零件")]):t._e(),t._v(" "),a("van-checkbox-group",{staticClass:"card-goods",on:{change:t.checkedSelect},model:{value:t.checkedGoods,callback:function(e){t.checkedGoods=e},expression:"checkedGoods"}},t._l(t.tableData,function(e,i){return a("van-row",{key:e.index,staticStyle:{"margin-top":"10px",padding:"5px","border-bottom":"1px solid #e5e5e5"}},[a("van-row",[a("van-col",{attrs:{span:"2"}},[a("van-checkbox",{key:e.id,staticClass:"card-goods__item",attrs:{name:e.id}})],1),t._v(" "),a("van-col",{staticStyle:{height:"80px",display:"flex","align-items":"center"},attrs:{span:"8"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.diagram,alt:""},on:{click:function(a){t.seeDaPicture(e.diagram)}}})]),t._v(" "),a("van-col",{attrs:{span:"1"}},[t._v(" ")]),t._v(" "),a("van-col",{staticClass:"font_d",attrs:{span:"13"}},[a("div",[a("span",{staticStyle:{"font-size":"1rem"},style:{color:e.name.indexOf("-重做")>0?"blue":"#444"}},[t._v(t._s(e.name)+" ")])]),t._v(" "),a("div",[t._v(t._s(e.cusname))]),t._v(" "),a("div",[t._v(t._s(e.orderno))]),t._v(" "),a("div",[t._v(t._s(e.status))])])],1),t._v(" "),a("div",{staticStyle:{"font-size":"0.8rem","line-height":"1.2rem","margin-top":"5px"}},[t._v("零件交货日期:"+t._s(e.due_date))]),t._v(" "),a("div",{staticStyle:{"font-size":"0.8rem","line-height":"1.2rem"}},[t._v("数量:"+t._s(e.product_num)+"    已送数量:"+t._s(e.yscount))]),t._v(" "),a("div",{staticStyle:{"font-size":"0.8rem","line-height":"1.2rem","word-wrap":"break-word","word-break":"break-all"}},[t._v("尺寸 : 长 : "+t._s(e.volume_size.xx)+"mm 宽 : "+t._s(e.volume_size.zz)+"mm 高\n : "+t._s(e.volume_size.yy)+"mm 体积 : "+t._s(e.volume_size.volume)+"mm³")]),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"100%","padding-bottom":"5px"}},["发货完成"!=e.status?a("el-button",{attrs:{size:"small"},on:{click:function(a){t.handleSend(e)}}},[t._v("发货")]):t._e()],1)],1)})),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-row",{staticStyle:{display:"flex","align-items":"center"}},[a("van-col",{staticStyle:{"padding-left":"5px"},attrs:{span:"19"}},[a("van-pagination",{attrs:{"page-count":t.allPage,"show-page-size":3,"items-per-page":t.perPage,"force-ellipses":""},on:{change:t.handleCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("van-col",{staticStyle:{"padding-left":"5px","padding-right":"5px"},attrs:{span:"5"}},[a("el-input",{attrs:{placeholder:t.plTotalPage,onkeyup:"this.value=this.value.replace(/[^0-9-]+/,'')"},on:{change:function(e){t.inputCurrentPage(e)}},model:{value:t.inputPage,callback:function(e){t.inputPage=e},expression:"inputPage"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"quanping"},[a("van-actionsheet",{attrs:{title:"发货单"},model:{value:t.showSendOrder,callback:function(e){t.showSendOrder=e},expression:"showSendOrder"}},[a("div",{staticClass:"book",staticStyle:{"margin-top":"5px"}},[a("div",{staticStyle:{border:"1px solid #d6d6d6",padding:"5%"}},[a("div",[t._v("生产任务书编号 : "+t._s(t.oneData.no))]),t._v(" "),a("div",[t._v("报价日期 : "+t._s(t.oneData.created_at))]),t._v(" "),a("div",[t._v("客户名称 : "+t._s(t.oneData.cusname))]),t._v(" "),a("div",[t._v("收发票方 : "+t._s(t.oneData.invoaddr?t.oneData.invoaddr.linkman_name:"")+" - "+t._s(t.oneData.invoaddr?t.oneData.invoaddr.lk_phone:"")+" - "+t._s(t.oneData.invoaddr?t.oneData.invoaddr.province:"")+"/"+t._s(t.oneData.invoaddr?t.oneData.invoaddr.city:"")+"/"+t._s(t.oneData.invoaddr?t.oneData.invoaddr.area:"")+"/"+t._s(t.oneData.invoaddr?t.oneData.invoaddr.lk_address:"")+" ")]),t._v(" "),a("div",[t._v("收货方 : "+t._s(t.oneData.postaddr?t.oneData.postaddr.linkman_name:"")+" - "+t._s(t.oneData.postaddr?t.oneData.postaddr.lk_phone:"")+" - "+t._s(t.oneData.postaddr?t.oneData.postaddr.province:"")+"/"+t._s(t.oneData.postaddr?t.oneData.postaddr.city:"")+"/"+t._s(t.oneData.postaddr?t.oneData.postaddr.area:"")+"/"+t._s(t.oneData.postaddr?t.oneData.postaddr.lk_address:"")+" ")])]),t._v(" "),a("div",{staticStyle:{border:"1px solid #d6d6d6",padding:"5%","margin-top":"10px"}},[a("div",[t._v("联系人 ")]),t._v(" "),a("div",t._l(t.oneData.lkmans,function(e){return a("span",[t._v("\n\t\t\t\t\t\t"+t._s(e.linkman_name)+" - "+t._s(e.lk_phone)+" - "+t._s(e.province)+"/"+t._s(e.city)+"/"+t._s(e.area)+"/"+t._s(e.lk_address)+"\n\t\t\t\t\t\t"),a("br")])}))]),t._v(" "),a("div",{staticStyle:{border:"1px solid #d6d6d6",padding:"5%","margin-top":"10px"}},[a("div",[t._v("制作方")]),t._v(" "),a("div",[t._v("销售工程师 : "+t._s(t.oneData.saler?t.oneData.saler.name:"")+"    "+t._s(t.oneData.saler?t.oneData.saler.phone:""))]),t._v(" "),a("div",[t._v("项目工程师 : "+t._s(t.oneData.pojer?t.oneData.pojer.name:"")+"    "+t._s(t.oneData.pojer?t.oneData.pojer.phone:""))]),t._v(" "),a("div",[t._v("项目经理 : "+t._s(t.oneData.manger?t.oneData.manger.name:"")+"    "+t._s(t.oneData.manger?t.oneData.manger.phone:""))])]),t._v(" "),a("h3",[t._v("零件清单区域")]),t._v(" "),a("ul",{staticClass:"partsLi"},t._l(t.oneData.parts,function(e){return a("li",[a("van-row",{staticClass:"l_m_p"},[a("van-col",{attrs:{span:10}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.diagram,alt:""}})]),t._v(" "),a("van-col",{attrs:{span:1}},[t._v("\n\t\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t\t")]),t._v(" "),a("van-col",{attrs:{span:13}},[a("p",{style:{color:e.name.indexOf("-重做")>0?"blue":"#444"}},[t._v(t._s(e.name))]),t._v(" "),a("p",[t._v(t._s(e.orderno))]),t._v(" "),a("p",[t._v(t._s(e.modname)+"   "+t._s(e.equname)+"   "+t._s(e.matname)+"   "+t._s(e.surname))])])],1),t._v(" "),a("p",[t._v("数量 : "+t._s(e.product_num)+"   已送数量 : "+t._s(e.yscounta?e.yscounta:0))]),t._v(" "),a("p",[t._v("处理要求 : "+t._s(e.requirements))]),t._v(" "),a("p",[t._v("交货日期 : "+t._s(e.due_date))]),t._v(" "),a("p",[t._v("尺寸 : 长 : "+t._s(e.volume_size.xx)+"mm 宽 : "+t._s(e.volume_size.zz)+"mm 高\n : "+t._s(e.volume_size.yy)+"mm 体积 : "+t._s(e.volume_size.volume)+"mm³")]),t._v(" "),a("p",{staticStyle:{"margin-top":"0.5rem"}},[t._v("发货数量\n\t\t\t\t\t\t\t"),a("span",{staticStyle:{display:"inline-block"}},[t._v("  \n\t        \t\t "),a("el-input",{staticStyle:{width:"200px"},attrs:{type:"number",placeholder:"请输入发货数量"},on:{change:function(a){t.partsNum(a,e)}},model:{value:e.zyscounta,callback:function(a){t.$set(e,"zyscounta",a)},expression:"item.zyscounta"}})],1)])],1)})),t._v(" "),a("div",{staticStyle:{"margin-top":"1rem"}},[a("el-row",[t._v("\n\t\t\t\t\t\t\t发货方式  \n\t\t\t\t\t\t\t"),a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择发货方式"},on:{change:function(e){t.selectKuaidi(e)}},model:{value:t.oneData.dismod,callback:function(e){t.$set(t.oneData,"dismod",e)},expression:"oneData.dismod"}},t._l(t.optionSend,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),t.kuaidiShow?a("el-row",{staticStyle:{"margin-top":"0.5rem"}},[t._v("\n\t\t\t\t\t\t\t快递公司  \n\t\t\t\t\t\t\t\t"),a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"请选择快递公司"},model:{value:t.oneData.express_code,callback:function(e){t.$set(t.oneData,"express_code",e)},expression:"oneData.express_code"}},t._l(t.expressList,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):t._e(),t._v(" "),t.kuaidiShow?a("el-row",{staticStyle:{"margin-top":"0.5rem"}},[t._v("\n\t\t\t\t\t\t\t快递单号  \n\t\t\t\t\t\t\t"),a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入快递单号",onkeyup:"value=value.replace(/\\D/g,'')"},model:{value:t.oneData.express_no,callback:function(e){t.$set(t.oneData,"express_no",e)},expression:"oneData.express_no"}})],1):t._e()],1),t._v(" "),a("div",{staticClass:"send",staticStyle:{margin:"10px 0","padding-bottom":"10px",display:"flex","justify-content":"flex-end"}},[a("el-button",{on:{click:function(e){t.showSendOrder=!1}}},[t._v("取消")]),t._v("  "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.SendSure()}}},[t._v("确定")])],1)])])],1),t._v(" "),a("van-actionsheet",{attrs:{title:"选择日期"},model:{value:t.showRiQiSear,callback:function(e){t.showRiQiSear=e},expression:"showRiQiSear"}},[a("van-datetime-picker",{attrs:{type:"date"},on:{confirm:t.riqiSureSear,cancel:function(e){t.riqiSureSear()}},model:{value:t.currentDateSear,callback:function(e){t.currentDateSear=e},expression:"currentDateSear"}})],1)],1)},[],!1,null,"3cf8bb1c",null));Re.options.__file="wareHouseOne.vue";var He=Re.exports,Ge={data:function(){return{activeNames:[],searData:{},options1:[{label:"已发货",value:0},{label:"客户已收货",value:1},{label:"发货完成",value:2}],active:0,tableData:[],allPage:1,currentPage:1,inputPage:"",plTotalPage:"5",perPage:5,checkedGoods:[],allCurrentId:[],allId:[],checked:!1,showQueRen:!1,orderSureObj:{},showSendOrder:!1,oneData:{},wulliuArr:[],showgengzhong:!1,showRiQiSear:!1,currentDateSear:new Date,listShow:!1}},methods:{clearSear:function(){this.searData={},this.searData.page=1},initDelin:function(t){var e=this;Se(t).then(function(t){e.tableData=[],e.tableData=t.data.data,e.allPage=t.data.last_page,e.plTotalPage=t.data.last_page+"页",e.currentPage=t.data.current_page,e.perPage=Number(t.data.per_page),e.allCurrentId=[],e.checkedGoods=[];var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.tableData);!(a=(o=s.next()).done);a=!0){var r=o.value;e.allCurrentId.push(r.id)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}var c=[],d=!0,u=!1,p=void 0;try{for(var h,v=l()(e.allCurrentId);!(d=(h=v.next()).done);d=!0){var m=h.value,f=!0,_=!1,g=void 0;try{for(var b,y=l()(e.allId);!(f=(b=y.next()).done);f=!0){var w=b.value;m==w&&(c.push(w),e.checkedGoods.push(w))}}catch(t){_=!0,g=t}finally{try{!f&&y.return&&y.return()}finally{if(_)throw g}}}}catch(t){u=!0,p=t}finally{try{!d&&v.return&&v.return()}finally{if(u)throw p}}c.length==e.allCurrentId.length?e.checked=!0:e.checked=!1,e.tableData.length?e.listShow=!1:e.listShow=!0}).catch(function(t){console.log(t)})},checkedSelect:function(t){if(0!=t.length){var e=!0,a=!1,i=void 0;try{for(var n,o=l()(t);!(e=(n=o.next()).done);e=!0){var s=n.value;this.allId.push(s)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}this.allId=[].concat(oe()(new ie.a(this.allId))),t=[].concat(oe()(new ie.a(t)));var r=this.allCurrentId.slice();r=r.sort(),t=t.sort();for(var c=0;c<r.length;c++)for(var d=0;d<t.length;d++)r[c]==t[d]&&r.splice(c,1);this.allId=this.allId.sort(),r=r.sort();for(var u=0;u<this.allId.length;u++)for(var p=0;p<r.length;p++)this.allId[u]==r[p]&&this.allId.splice(u,1);t.length!=this.allCurrentId.length?this.checked=!1:this.checked=!0}else{this.allId=[].concat(oe()(new ie.a(this.allId))),t=[].concat(oe()(new ie.a(t))),this.allCurrentId.sort(),this.allId.sort();for(var h=0;h<this.allCurrentId.length;h++)for(var v=0;v<this.allId.length;v++)this.allCurrentId[h]==this.allId[v]&&this.allId.splice(v,1)}},allChecked:function(t){if(t){var e=!0,a=!1,i=void 0;try{for(var n,o=l()(this.tableData);!(e=(n=o.next()).done);e=!0){var s=n.value;this.checkedGoods.push(s.id)}}catch(t){a=!0,i=t}finally{try{!e&&o.return&&o.return()}finally{if(a)throw i}}this.checkedGoods=[].concat(oe()(new ie.a(this.checkedGoods)))}else this.checkedGoods.length==this.allCurrentId.length&&(this.checkedGoods=[])},onSubmit:function(){this.searData.page=1,this.initDelin(this.searData)},riqiSureSear:function(t){if(t){var e=t.getFullYear()+"/"+(t.getMonth()+1)+"/"+t.getDate();this.$set(this.searData,"edat",e),this.showRiQiSear=!1}else this.showRiQiSear=!1,this.$set(this.searData,"edat",""),console.log("没有值")},seeDaPicture:function(t){Object(v.a)({images:[t],asyncClose:!0})},handleCurrentPage:function(t){this.searData.page=Number(t),this.initDelin(this.searData)},inputCurrentPage:function(t){this.currentPage=Number(t),this.searData.page=this.currentPage,this.initDelin(this.searData)},handleSuccess:function(t){t?(this.orderSureObj={depos:[t.id]},this.showQueRen=!0):(this.orderSureObj={depos:this.allId},this.orderSureObj.depos.length>0?this.showQueRen=!0:this.$message({message:"请选择完成的发货单",type:"warning"}))},handleSee:function(t){var e=this;Pe(t.id).then(function(t){e.oneData=t.data;var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e.oneData.parts);!(a=(o=s.next()).done);a=!0){var r=o.value;r.volume_size=JSON.parse(r.volume_size),r.due_date&&(r.due_date=r.due_date.replace(/-/g,"/").split(" ")[0])}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}e.$nextTick(function(){this.showSendOrder=!0})}).catch(function(t){console.log("失败")})},handleGengzong:function(t){var e=this,a={};a.shipperCode=t.express_code,a.logisticCode=t.express_no,ke(a).then(function(t){0==t.data.length?(e.wulliuArr=[],e.$message({message:"无物流信息",type:"warning"})):"无物流信息"==t.data?(e.wulliuArr=[],e.$message({message:"无物流信息",type:"warning"})):(e.wulliuArr=t.data,e.showgengzhong=!0)}).catch(function(t){})},beforeCloseSure:function(t,e){var a=this;if("confirm"===t){Ce(r()({},this.orderSureObj)).then(function(t){a.allId=[],a.checkedGoods=[],a.checked=!1,a.initDelin(a.searData),a.$toast.success("确认完成"),e()}).catch(function(t){console.log("发货单完成提交失败")})}else e()},beforeClose:function(){done()},jinzhiJianpan:function(){document.activeElement.blur()}},created:function(){this.searData.page=1,this.initDelin(this.searData)}},Je=(a("KGpz"),Object(g.a)(Ge,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wareHouseTwoM"},[a("van-collapse",{model:{value:t.activeNames,callback:function(e){t.activeNames=e},expression:"activeNames"}},[a("van-collapse-item",{attrs:{title:"搜索",name:"1"}},[a("el-form",{staticClass:"center",attrs:{model:t.searData}},[a("el-form-item",[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入客户名称"},model:{value:t.searData.sear,callback:function(e){t.$set(t.searData,"sear",e)},expression:"searData.sear"}})],1),t._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择状态",clearable:""},model:{value:t.searData.stat,callback:function(e){t.$set(t.searData,"stat",e)},expression:"searData.stat"}},t._l(t.options1,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("el-form-item",[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入快递单号"},model:{value:t.searData.expo,callback:function(e){t.$set(t.searData,"expo",e)},expression:"searData.expo"}})],1),t._v(" "),a("el-form-item",[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请输入订单编号"},model:{value:t.searData.orde,callback:function(e){t.$set(t.searData,"orde",e)},expression:"searData.orde"}})],1),t._v(" "),a("el-form-item",[a("el-input",{staticStyle:{width:"70%"},attrs:{placeholder:"请选择日期",readonly:""},on:{focus:function(e){t.showRiQiSear=!0}},model:{value:t.searData.edat,callback:function(e){t.$set(t.searData,"edat",e)},expression:"searData.edat"}})],1),t._v(" "),a("div",[a("span",[a("el-button",{attrs:{size:"small"},on:{click:t.clearSear}},[t._v("清空")])],1),t._v("\n\t\t\t\t\t\t \n\t\t\t\t\t\t"),a("span",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSubmit}},[t._v("查询")])],1)])],1)],1)],1),t._v(" "),a("div",{staticStyle:{"margin-top":"5px"}},[a("el-button",{attrs:{size:"mini"},on:{click:function(e){t.initDelin(t.searData)}}},[t._v("刷新列表")])],1),t._v(" "),t.listShow?a("div",{staticStyle:{"margin-top":"10px"}},[t._v("暂无发货单")]):t._e(),t._v(" "),a("van-checkbox-group",{staticClass:"card-goods",on:{change:t.checkedSelect},model:{value:t.checkedGoods,callback:function(e){t.checkedGoods=e},expression:"checkedGoods"}},t._l(t.tableData,function(e,i){return a("van-row",{key:e.index,staticStyle:{"margin-top":"10px",padding:"5px","border-bottom":"1px solid #e5e5e5"}},[a("van-row",[a("van-col",{attrs:{span:"2"}},[t._v("\n\t\t\t\t\t \n\t\t\t\t\t")]),t._v(" "),a("van-col",{staticClass:"list_main_k",attrs:{span:"22"}},[e.express_no?a("div",[t._v("快递单号 : "+t._s(e.express_no))]):t._e(),t._v(" "),e.express_name?a("div",[t._v("快递名称 : "+t._s(e.express_name))]):t._e(),t._v(" "),a("div",[t._v("客户名称 : "+t._s(e.cusname))]),t._v(" "),a("div",[t._v("订单号 : "+t._s(e.orderno))]),t._v(" "),a("div",[t._v("创建日期 :"+t._s(e.created_at))]),t._v(" "),a("div",[t._v(t._s(0==e.status?"已发货":1==e.status?"客户已收货":"发货完成"))])])],1),t._v(" "),a("div",{staticStyle:{display:"flex","justify-content":"flex-end",width:"100%","padding-bottom":"5px"}},[a("span",[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.handleSee(e)}}},[t._v("查看")])],1),t._v("  \n\t\t\t\t\t"),a("span",[a("el-button",{attrs:{size:"small"},on:{click:function(a){t.handleGengzong(e)}}},[t._v("跟踪")])],1),t._v("  \n\t\t\t\t\t")])],1)})),t._v(" "),a("div",{staticStyle:{height:"30px"}}),t._v(" "),a("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("van-row",{staticStyle:{display:"flex","align-items":"center"}},[a("van-col",{staticStyle:{"padding-left":"5px"},attrs:{span:"19"}},[a("van-pagination",{attrs:{"page-count":t.allPage,"show-page-size":3,"items-per-page":t.perPage,"force-ellipses":""},on:{change:t.handleCurrentPage},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1),t._v(" "),a("van-col",{staticStyle:{"padding-left":"5px","padding-right":"5px"},attrs:{span:"5"}},[a("el-input",{attrs:{placeholder:t.plTotalPage,onkeyup:"this.value=this.value.replace(/[^0-9-]+/,'')"},on:{change:function(e){t.inputCurrentPage(e)}},model:{value:t.inputPage,callback:function(e){t.inputPage=e},expression:"inputPage"}})],1)],1)],1),t._v(" "),a("van-dialog",{attrs:{"show-cancel-button":"","before-close":t.beforeCloseSure,title:"提示"},model:{value:t.showQueRen,callback:function(e){t.showQueRen=e},expression:"showQueRen"}},[a("div",{staticStyle:{"text-align":"center","font-size":"0.9rem","margin-top":"1rem"}},[t._v("你确认要完成")])]),t._v(" "),a("div",{staticClass:"quanping"},[a("van-actionsheet",{attrs:{title:"跟踪"},model:{value:t.showgengzhong,callback:function(e){t.showgengzhong=e},expression:"showgengzhong"}},[a("div",{staticStyle:{"font-size":"0.9rem",width:"80%",margin:"1rem auto 0"}},[t._l(t.wulliuArr,function(e){return a("div",{staticStyle:{"margin-bottom":"5px","padding-bottom":"5px","border-bottom":"1px solid #d6d6d6"}},[t._v("\n\t\t\t\t\t\t"+t._s(e.AcceptStation)+"\n\t\t\t\t\t\t"),a("br"),t._v("\n\t\t\t\t\t\t"+t._s(e.AcceptTime)+"\n\t\t\t\t\t")])}),t._v(" "),a("div",{staticClass:"send",staticStyle:{margin:"10px 0","padding-bottom":"10px",display:"flex","justify-content":"flex-end"}},[a("el-button",{on:{click:function(e){t.showgengzhong=!1}}},[t._v("关闭")])],1)],2)])],1),t._v(" "),a("div",{staticClass:"quanping"},[a("van-actionsheet",{attrs:{title:"发货单"},model:{value:t.showSendOrder,callback:function(e){t.showSendOrder=e},expression:"showSendOrder"}},[a("div",{staticClass:"book"},[a("h3",[t._v("发货单")]),t._v(" "),a("div",{staticStyle:{border:"1px solid #d6d6d6",padding:"5%"}},[a("div",[t._v("生产任务书编号 : "+t._s(t.oneData.no))]),t._v(" "),a("div",[t._v("报价日期 : "+t._s(t.oneData.created_at))]),t._v(" "),a("div",[t._v("发货单二维码")]),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("img",{staticStyle:{width:"120px"},attrs:{src:t.oneData.qrcode_url,alt:""}})]),t._v(" "),a("div",[t._v("客户名称 : "+t._s(t.oneData.cusname))]),t._v(" "),a("div",[t._v("发票收件人信息 : "+t._s(t.oneData.invoaddr?t.oneData.invoaddr.linkman_name:"")+" - "+t._s(t.oneData.invoaddr?t.oneData.invoaddr.lk_phone:"")+" - "+t._s(t.oneData.invoaddr?t.oneData.invoaddr.province:"")+"/"+t._s(t.oneData.invoaddr?t.oneData.invoaddr.city:"")+"/"+t._s(t.oneData.invoaddr?t.oneData.invoaddr.area:"")+"/"+t._s(t.oneData.invoaddr?t.oneData.invoaddr.lk_address:"")+" ")]),t._v(" "),a("div",[t._v("零件收货人信息 : "+t._s(t.oneData.postaddr?t.oneData.postaddr.linkman_name:"")+" - "+t._s(t.oneData.postaddr?t.oneData.postaddr.lk_phone:"")+" - "+t._s(t.oneData.postaddr?t.oneData.postaddr.province:"")+"/"+t._s(t.oneData.postaddr?t.oneData.postaddr.city:"")+"/"+t._s(t.oneData.postaddr?t.oneData.postaddr.area:"")+"/"+t._s(t.oneData.postaddr?t.oneData.postaddr.lk_address:"")+" ")])]),t._v(" "),a("div",{staticStyle:{border:"1px solid #d6d6d6",padding:"5%","margin-top":"10px"}},[a("div",[t._v("联系人 ")]),t._v(" "),a("div",t._l(t.oneData.lkmans,function(e){return a("span",[t._v("\n\t\t\t\t\t"+t._s(e.linkman_name)+" - "+t._s(e.lk_phone)+" - "+t._s(e.province)+"/"+t._s(e.city)+"/"+t._s(e.area)+"/"+t._s(e.lk_address)+"\n\t\t\t\t\t"),a("br")])}))]),t._v(" "),a("div",{staticStyle:{border:"1px solid #d6d6d6",padding:"5%","margin-top":"10px"}},[a("div",[t._v("制作方")]),t._v(" "),a("div",[t._v("销售工程师 : "+t._s(t.oneData.saler?t.oneData.saler.name:"")+"    "+t._s(t.oneData.saler?t.oneData.saler.phone:""))]),t._v(" "),a("div",[t._v("项目工程师 : "+t._s(t.oneData.pojer?t.oneData.pojer.name:"")+"    "+t._s(t.oneData.pojer?t.oneData.pojer.phone:""))]),t._v(" "),a("div",[t._v("项目经理 : "+t._s(t.oneData.manger?t.oneData.manger.name:"")+"    "+t._s(t.oneData.manger?t.oneData.manger.phone:""))])]),t._v(" "),a("h3",[t._v("零件清单区域")]),t._v(" "),a("ul",{staticClass:"partsLi"},t._l(t.oneData.parts,function(e){return a("li",[a("van-row",{staticClass:"l_m_p"},[a("van-col",{attrs:{span:10}},[a("img",{staticStyle:{width:"100%"},attrs:{src:e.diagram,alt:""},on:{click:function(a){t.seeDaPicture(e.diagram)}}})]),t._v(" "),a("van-col",{attrs:{span:1}},[t._v("\n\t\t\t\t\t\t\t\t \n\t\t\t\t\t\t\t")]),t._v(" "),a("van-col",{attrs:{span:13}},[a("p",{staticStyle:{"font-size":"0.9rem"}},[t._v(t._s(e.name))]),t._v(" "),a("p",[t._v(t._s(e.orderno))]),t._v(" "),a("p",[t._v(t._s(e.modname)+"   "+t._s(e.equname)+"   "+t._s(e.matname)+"   "+t._s(e.surname))])])],1),t._v(" "),a("p",[t._v("数量 : "+t._s(e.product_num)+"   已送数量 : "+t._s(e.yscounta?e.yscounta:0))]),t._v(" "),a("p",[t._v("处理要求 : "+t._s(e.requirements))]),t._v(" "),a("p",[t._v("交货日期 : "+t._s(e.due_date))]),t._v(" "),a("p",[t._v("尺寸 : 长 : "+t._s(e.volume_size.xx)+"mm 宽 : "+t._s(e.volume_size.zz)+"mm 高\n : "+t._s(e.volume_size.yy)+"mm 体积 : "+t._s(e.volume_size.volume)+"mm³")])],1)})),t._v(" "),a("div",{staticClass:"send",staticStyle:{margin:"10px 0","padding-bottom":"10px",display:"flex","justify-content":"flex-end"}},[a("el-button",{on:{click:function(e){t.showSendOrder=!1}}},[t._v("关闭")])],1)])])],1),t._v(" "),a("van-actionsheet",{attrs:{title:"选择日期"},model:{value:t.showRiQiSear,callback:function(e){t.showRiQiSear=e},expression:"showRiQiSear"}},[a("van-datetime-picker",{attrs:{type:"date"},on:{confirm:t.riqiSureSear,cancel:function(e){t.riqiSureSear()}},model:{value:t.currentDateSear,callback:function(e){t.currentDateSear=e},expression:"currentDateSear"}})],1)],1)},[],!1,null,"f551d7ea",null));Je.options.__file="wareHouseTwo.vue";var Ke={data:function(){return{show1:!0,show2:!0,activeName:"first"}},methods:{handleClick:function(t){"已完成零件"==t.label?(this.show1=!0,this.show2=!1):(this.show1=!1,this.show2=!0)}},created:function(){},mounted:function(){},components:{wareHouseOne:He,wareHouseTwo:Je.exports}},We=Object(g.a)(Ke,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"已完成零件",name:"first"}},[t.show1?a("div",[a("wareHouseOne")],1):t._e()]),t._v(" "),a("el-tab-pane",{attrs:{label:"发货单",name:"second"}},[t.show2?a("div",[a("wareHouseTwo")],1):t._e()])],1)],1)},[],!1,null,null,null);We.options.__file="wareHouse.vue";var Ye=We.exports,Ue=a("wk8/"),Xe=a("X4fA"),Ze={name:"modules",data:function(){return{activeName:"adfasdfa",activeName2:"first",showA:!0,showB:!0,showC:!0,showD:!0,pc:!0,oneData:{info:!1,sale:!1,prod:!1,depo:!1},oneDataRole:{},loadingShow:"",pictLoading:!0,dialogVisibleFlow:!1,flowend:"",dialogVisibleMoFlow:!1}},methods:{goBack:function(){var t=!0,e=f.a.get("pr_idArr");e=JSON.parse(e);var a=!0,i=!1,n=void 0;try{for(var o,s=l()(e);!(a=(o=s.next()).done);a=!0){"admin"==o.value&&(t=!1)}}catch(t){i=!0,n=t}finally{try{!a&&s.return&&s.return()}finally{if(i)throw n}}t&&(Xe.b,this.$store.dispatch("LogOut").then(function(){}),window.setTimeout(function(){location.reload()},1e3))},handleClick:function(t,e){var a=this;"信息配置"==t.label?(this.showA=!1,this.showB=!1,this.showC=!1,this.showD=!1,setTimeout(function(){a.showA=!0},1)):"我要报价"==t.label?(this.showA=!1,this.showB=!1,this.showC=!1,this.showD=!1,setTimeout(function(){a.showB=!0},1)):"我要生产"==t.label?(this.showA=!1,this.showB=!1,this.showC=!1,this.showD=!1,setTimeout(function(){a.showC=!0},1)):(this.showA=!1,this.showB=!1,this.showC=!1,this.showD=!1,setTimeout(function(){a.showD=!0},1)),this.flowShow()},selectDepart:function(t){var e=this,a={};a.rid=t,Object(Ue.j)(a).then(function(t){e.oneDataRole=t.data,e.oneDataRole.depcode=JSON.parse(e.oneDataRole.depcode),e.oneDataRole.action=JSON.parse(e.oneDataRole.action),e.showModule(),e.flowShow(),e.pictLoading=!1}).catch(function(t){})},handleClose:function(){this.dialogVisibleFlow=!1,this.dialogVisibleMoFlow=!1},flowShow:function(){var t="";t="first"==this.activeName?"moduleflowA":"second"==this.activeName?"moduleflowB":"third"==this.activeName?"moduleflowC":"moduleflowD",this.flowSelect(t)},flowSelect:function(t){null!=localStorage.getItem(t)||1==localStorage.getItem("seconduse")&&(localStorage.setItem(t,"1"),/Android|webOS|iPhone|BlackBerry/i.test(navigator.userAgent)?this.dialogVisibleMoFlow=!0:this.dialogVisibleFlow=!0)},showModule:function(t){var e=this.oneDataRole.depcode,a=[{value:4,label:"info"},{value:1,label:"sale"},{value:2,label:"prod"},{value:3,label:"depo"}],i=[],n=!0,o=!1,s=void 0;try{for(var r,c=l()(e);!(n=(r=c.next()).done);n=!0){var d=r.value,u=!0,p=!1,h=void 0;try{for(var v,m=l()(a);!(u=(v=m.next()).done);u=!0){var f=v.value;d==f.label&&i.push(f)}}catch(t){p=!0,h=t}finally{try{!u&&m.return&&m.return()}finally{if(p)throw h}}}}catch(t){o=!0,s=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw s}}var _=i.sort(function(t){return function(e,a){var i=e[t];return a[t]-i}}("value")),g=!0,b=!1,y=void 0;try{for(var w,D=l()(_);!(g=(w=D.next()).done);g=!0){var x=w.value;"info"==x.label?(this.activeName="first",this.oneData.info=!0):"sale"==x.label?(this.activeName="second",this.oneData.sale=!0):"prod"==x.label?(this.activeName="third",this.oneData.prod=!0):"depo"==x.label&&(this.activeName="fourth",this.oneData.depo=!0)}}catch(t){b=!0,y=t}finally{try{!g&&D.return&&D.return()}finally{if(b)throw y}}},pcHelp:function(){this.dialogVisibleFlow=!0},moHelp:function(){this.dialogVisibleMoFlow=!0},seePicture:function(t){Object(v.a)({images:[t],asyncClose:!0})}},created:function(){var t=this.$store.state.stlData.loadingS;0!=n()(t)&&t.close();var e=f.a.get("pr_id");this.selectDepart(e),/Android|webOS|iPhone|BlackBerry/i.test(navigator.userAgent)?this.pc=!1:this.pc=!0},mounted:function(){this.$nextTick(function(){window.history&&window.history.pushState&&(history.pushState(null,null,document.URL),window.addEventListener("popstate",this.goBack,!1))})},destroyed:function(){window.removeEventListener("popstate",this.goBack,!1)},components:{customers:Z,produce:Pt,order:ee,productions:ye,warehouse:qe,mobileOrder:G,mobuileCustomer:Ne,mobuileProduction:Be,mobuileWareHouse:Ye}},ta=(a("cwOq"),Object(g.a)(Ze,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-actionsheet",{attrs:{title:"流程提示"},model:{value:t.dialogVisibleMoFlow,callback:function(e){t.dialogVisibleMoFlow=e},expression:"dialogVisibleMoFlow"}},[i("div",{staticStyle:{width:"90%",margin:"0 auto","margin-top":"10px"}},["first"==t.activeName?i("div",[i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("操作流程 : 第一步 : 添加客户")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("操作流程 : 第二步 : 添加生产信息")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("操作流程 : 第三步 : 可前往我要报价添加订单")]),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:a("Ovbn"),alt:""}})]),t._v(" "),i("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:a("y/Gp"),alt:""}})])]):"second"==t.activeName?i("div",[i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("我要报价的操作流程 : ")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("第一步 : 添加订单")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("第二步 : 生成报价单")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("第三步 : 审核和编辑报价单")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("第四步 : 审核通过后将生成报价单二维码发送给客户(新客户才需要)")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("温馨提示 :第一次使用本系统")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("1.请前往信息部(添加客户和生产信息)")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("2.请前往用户管理(添加公司成员和分配权限)")]),t._v(" "),i("div",[t._v("一，我要报价(图)")]),t._v(" "),i("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:a("71V4"),alt:""}})]),t._v(" "),i("div",[t._v("二，添加订单(图)")]),t._v(" "),i("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:a("zA7f"),alt:""}})]),t._v(" "),i("div",[t._v("三，审核报价单(图)")]),t._v(" "),i("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:a("wb0a"),alt:""}})])]):"third"==t.activeName?i("div",[i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("一,待加工零件的操作流程 : ")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("第一步: 选择要生产的零件")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("第二步: 选择生产工程师")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("第三步: 编辑零件列表(设置交货时间和处理要求)")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("温馨提示 :我要报价添加订单,即客户确认报价单后，零件才入库")]),t._v(" "),i("div",{staticStyle:{height:"15px"}}),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("二,生产任务书的操作流程 :")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("第一步 : 设置生产计划")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("第二步 : 设置生产计划时间(即开始生产)")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("第三步 : 在生产计划里点击生产完成(即生产结束)")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("第四步 : 在生产计划里可上传完成的零件图片(根据需要上传)")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("温馨提示 : 需先在待加工零件库生成生产任务书, ")]),t._v(" "),i("div",[t._v("一,待加工零件(操作图)")]),t._v(" "),i("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:a("3oGs"),alt:""}})]),t._v(" "),i("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:a("faSW"),alt:""}})]),t._v(" "),i("div",{staticStyle:{"margin-top":"10px"}},[t._v("二,生产任务书(操作图)")]),t._v(" "),i("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:a("Nkjn"),alt:""}})]),t._v(" "),i("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:a("F/pr"),alt:""}})])]):i("div",[i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("一,已完成零件库的操作流程 :")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("选择要送货的零件进行配送 ")]),t._v(" "),i("div",{staticStyle:{height:"15px"}}),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("二,生产任务书的操作流程 : ")]),t._v(" "),i("div",{staticStyle:{"font-size":"1rem","line-height":"1.5rem"}},[t._v("可查看物流信息")]),t._v(" "),i("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:a("HwkY"),alt:""}})]),t._v(" "),i("div",{staticStyle:{"text-align":"center","margin-top":"10px"}},[i("img",{staticStyle:{width:"100%"},attrs:{src:a("KdAI"),alt:""}})])]),t._v(" "),i("div",{staticStyle:{display:"flex","justify-content":"flex-end","margin-top":"15px","margin-bottom":"15px","margin-right":"10px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisibleMoFlow=!1}}},[t._v("关闭")])],1)])]),t._v(" "),i("el-dialog",{attrs:{title:"流程提示",visible:t.dialogVisibleFlow,width:"60%","before-close":t.handleClose,top:"4vh"},on:{"update:visible":function(e){t.dialogVisibleFlow=e}}},["first"==t.activeName?i("div",[i("div",{staticStyle:{"font-size":"18px","line-height":"22px"}},[t._v("操作流程 : 第一步 : 添加客户")]),t._v(" "),i("div",{staticStyle:{"font-size":"18px","line-height":"22px"}},[t._v("操作流程 : 第二步 : 添加生产信息")]),t._v(" "),i("div",{staticStyle:{"font-size":"18px","line-height":"22px"}},[t._v("操作流程 : 第三步 : 可前往我要报价添加订单")])]):"second"==t.activeName?i("div",[i("div",{staticStyle:{"font-size":"18px","line-height":"25px"}},[t._v("操作流程 : 添加订单 --\x3e 生成报价单 --\x3e 审核和编辑报价单")]),t._v(" "),i("div",{staticStyle:{"font-size":"18px","line-height":"25px"}},[t._v("温馨提示 : 如果是新客户，需要将生成的报价单二维码码发送给客户(报价单需要审核通过)")]),t._v(" "),i("div",{staticStyle:{"font-size":"18px","line-height":"25px"}},[t._v("添加订单")]),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("img",{staticStyle:{width:"90%",border:"1px solid #d6d6d6",padding:"10px"},attrs:{src:a("OiVn"),alt:""}})]),t._v(" "),i("div",{staticStyle:{"font-size":"18px","line-height":"25px","margin-top":"10px","margin-bottom":"10px"}},[t._v("添加零件")]),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("img",{staticStyle:{width:"90%",border:"1px solid #d6d6d6",padding:"10px"},attrs:{src:a("Pp+X"),alt:""}})]),t._v(" "),i("div",{staticStyle:{"font-size":"18px","line-height":"25px","margin-top":"10px","margin-bottom":"10px"}},[t._v("编辑报价单")]),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("img",{staticStyle:{width:"90%",border:"1px solid #d6d6d6",padding:"10px"},attrs:{src:a("ykMJ"),alt:""}})])]):"third"==t.activeName?i("div",[i("div",{staticStyle:{"font-size":"18px","line-height":"22px"}},[t._v("一,待加工零件的操作流程 : 选择要生产的零件,选择生产工程师--\x3e编辑零件列表(设置交货时间和处理要求,鼠标单击便可修改)  就可以生成 生产任务书 ")]),t._v(" "),i("div",{staticStyle:{height:"15px"}}),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("img",{staticStyle:{width:"90%",border:"1px solid #d6d6d6",padding:"10px"},attrs:{src:a("Yuo+"),alt:""}})]),t._v(" "),i("div",{staticStyle:{"font-size":"18px","line-height":"22px","margin-top":"10px"}},[t._v("二,生产任务书的操作流程 : 设置生产计划 -- >设置生产计划时间(开始生产) --\x3e 生产完成需要到生成计划中点击生产完成按钮(可上传完成图片) ")]),t._v(" "),i("div",{staticStyle:{height:"15px"}}),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("img",{staticStyle:{width:"90%",border:"1px solid #d6d6d6",padding:"10px"},attrs:{src:a("qjd3"),alt:""}})])]):i("div",[i("div",{staticStyle:{"font-size":"18px","line-height":"22px"}},[t._v("已完成零件的操作流程 : 选择要送货的零件进行配送 ")]),t._v(" "),i("div",{staticStyle:{height:"15px"}}),t._v(" "),i("div",{staticStyle:{"font-size":"18px","line-height":"22px"}},[t._v("生产任务书的操作流程 :查看物流信息 ")])]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisibleFlow=!1}}},[t._v("关闭")])],1)]),t._v(" "),i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("业务管理")]),t._v(" "),t.pc?i("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.pcHelp}},[t._v("帮助")]):i("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:t.moHelp}},[t._v("帮助")])],1),t._v(" "),i("el-tabs",{staticClass:"loadingS",attrs:{type:"card"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t.oneData.sale?i("el-tab-pane",{attrs:{label:"我要报价",name:"second"}},[t.showB?i("div",[t.pc?i("div",[i("order")],1):i("div",[i("mobileOrder")],1)]):t._e()]):t._e(),t._v(" "),t.oneData.prod?i("el-tab-pane",{attrs:{label:"我要生产",name:"third"}},[t.showC?i("div",[t.pc?i("div",[i("productions")],1):i("div",[i("mobuileProduction")],1)]):t._e()]):t._e(),t._v(" "),t.oneData.depo?i("el-tab-pane",{attrs:{label:"我要发货",name:"fourth"}},[t.showD?i("div",[t.pc?i("div",[i("warehouse")],1):i("div",[i("mobuileWareHouse")],1)]):t._e()]):t._e(),t._v(" "),t.oneData.info?i("el-tab-pane",{attrs:{label:"信息配置",name:"first"}},[t.showA?i("div",[i("el-tabs",{model:{value:t.activeName2,callback:function(e){t.activeName2=e},expression:"activeName2"}},[i("el-tab-pane",{attrs:{label:"客户管理",name:"first"}},[t.pc?i("div",[i("customers")],1):i("div",[i("mobuileCustomer")],1)]),t._v(" "),i("el-tab-pane",{attrs:{label:"生产信息",name:"second"}},[i("produce")],1)],1)],1):t._e()]):t._e()],1)],1)],1)},[],!1,null,"fe274b76",null));ta.options.__file="index.vue";e.default=ta.exports},HwkY:function(t,e,a){t.exports=a.p+"static/img/msend1.cd97999.png"},"J+My":function(t,e,a){},J7U6:function(t,e,a){"use strict";var i=a("0ias");a.n(i).a},KGpz:function(t,e,a){"use strict";var i=a("ztef");a.n(i).a},KdAI:function(t,e,a){t.exports=a.p+"static/img/msend2.a26ba83.png"},LJKu:function(t,e,a){"use strict";var i=a("SBpm");a.n(i).a},Nkjn:function(t,e,a){t.exports=a.p+"static/img/msheng3.c41b96b.png"},NxWF:function(t,e,a){"use strict";var i=a("J+My");a.n(i).a},OiVn:function(t,e,a){t.exports=a.p+"static/img/xiao1.b0d2fbb.png"},Ovbn:function(t,e,a){t.exports=a.p+"static/img/mcustomer1.3177562.png"},OxyJ:function(t,e,a){},PFDm:function(t,e,a){},"Pp+X":function(t,e,a){t.exports=a.p+"static/img/xiao3.fe42f5f.png"},PsHb:function(t,e,a){"use strict";var i=a("wWUl");a.n(i).a},"R8/t":function(t,e,a){"use strict";var i=a("S2Dj");a.n(i).a},S2Dj:function(t,e,a){},SBpm:function(t,e,a){},SLIR:function(t,e,a){},VE5C:function(t,e,a){"use strict";var i=a("3Vum");a.n(i).a},YLtl:function(t,e,a){},"Yuo+":function(t,e,a){t.exports=a.p+"static/img/sheng1.b75516a.png"},ZtWk:function(t,e,a){"use strict";var i=a("YLtl");a.n(i).a},aJHp:function(t,e,a){},ac2h:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"i",function(){return o}),a.d(e,"c",function(){return l}),a.d(e,"k",function(){return s}),a.d(e,"j",function(){return r}),a.d(e,"d",function(){return c}),a.d(e,"g",function(){return d}),a.d(e,"f",function(){return u}),a.d(e,"m",function(){return p}),a.d(e,"l",function(){return h}),a.d(e,"n",function(){return v}),a.d(e,"o",function(){return m}),a.d(e,"e",function(){return f}),a.d(e,"h",function(){return _}),a.d(e,"b",function(){return g}),a.d(e,"p",function(){return b}),a.d(e,"q",function(){return y});var i=a("t3Un");function n(t){return Object(i.a)({url:"api/sales/order/customlist",method:"get",params:t})}function o(t){return Object(i.a)({url:"api/sales/order/customlinkman/"+t,method:"get",params:""})}function l(t){return Object(i.a)({url:"api/sales/order/depusers/",method:"get",params:t})}function s(t){var e=t;return Object(i.a)({url:"api/sales/order/add",method:"post",data:e})}function r(t,e){return Object(i.a)({url:"api/sales/material/list/"+t,method:"get",params:e})}function c(t,e){return Object(i.a)({url:"api/sales/equipment/list/"+t,method:"get",params:e})}function d(t,e){return Object(i.a)({url:"api/sales/order/quotation/"+t,method:"get",params:e})}function u(t){return Object(i.a)({url:"api/sales/order/list",method:"get",params:t})}function p(t,e){var a=e;return Object(i.a)({url:"api/sales/order/edit/"+t,method:"post",data:a})}function h(t,e){return Object(i.a)({url:"api/sales/order/del/"+t,method:"get",params:e})}function v(t){var e=t;return Object(i.a)({url:"api/sales/order/quotation/chack",method:"post",data:e})}function m(t,e){var a=e;return Object(i.a)({url:"api/sales/order/quotation/update/"+t,method:"post",data:a})}function f(t){var e=t;return Object(i.a)({url:"api/sales/order/quotation/updateqrurl",method:"post",data:e})}function _(t){var e=t;return Object(i.a)({url:"api/sales/fastorder/add",method:"post",data:e})}function g(t){var e=t;return Object(i.a)({url:"api/fastorder/get",method:"post",data:e})}function b(t){var e=t;return Object(i.a)({url:"api/sales/order/reistparts",method:"post",data:e})}function y(t){var e=t;return Object(i.a)({url:"api/sales/order/reloadorder",method:"post",data:e})}},cZQI:function(t,e,a){},cwOq:function(t,e,a){"use strict";var i=a("aJHp");a.n(i).a},f1HF:function(t,e,a){},fY5j:function(t,e,a){"use strict";var i=a("EOgP");a.n(i).a},faSW:function(t,e,a){t.exports=a.p+"static/img/msheng2.ba2722a.png"},"gDS+":function(t,e,a){t.exports={default:a("oh+g"),__esModule:!0}},i5Dx:function(t,e,a){"use strict";var i=a("uOCA");a.n(i).a},j85J:function(t,e,a){"use strict";var i=a("8Wt5");a.n(i).a},kBnk:function(t,e,a){},lELS:function(t,e,a){"use strict";var i=a("8GNM");a.n(i).a},"ny/z":function(t,e,a){"use strict";var i=a("f1HF");a.n(i).a},obHA:function(t,e,a){},"oh+g":function(t,e,a){var i=a("WEpk"),n=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return n.stringify.apply(n,arguments)}},pOOa:function(t,e,a){},qUKI:function(t,e,a){"use strict";var i=a("OxyJ");a.n(i).a},qjd3:function(t,e,a){t.exports=a.p+"static/img/sheng2.509af42.png"},"t/QI":function(t,e,a){"use strict";var i=a("obHA");a.n(i).a},tGiI:function(t,e,a){"use strict";var i,n,o,l,s,r=a("GQeE"),c=a.n(r),d={data:function(){return{allstl:{},allstlimg:{},arrLength:"",manyPercentage:0}},methods:{selectButton:function(){document.getElementById("file").value=null,document.getElementById("load").style.display="none",document.getElementById("loadend").style.display="none",document.getElementById("file").click(),this.manyPercentage=0},start:function(t){var e=this;this.allstl={},this.allstlimg={};var a=(t.target||window.event.srcElement).value;if("stl"==a.substring(a.lastIndexOf(".")+1)){document.getElementById("load").style.display="",document.getElementById("loadend").style.display="none";var i=document.getElementById("file").files;D=i.length,this.manyPercentage=Math.floor(30*Math.random()+1),setTimeout(function(){console.log("执行了"),e.manyPercentage=30+Math.floor(20*Math.random()+1);for(var t=0;t<i.length;t++){var a=i[t].name;s=i[t],e.init(a)}},500)}else alert("请选择STL格式文件！")},init:function(t,e){(i=0==u?new THREE.OrthographicCamera(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,1,1e4):new THREE.PerspectiveCamera(p,window.innerWidth/window.innerHeight,2,1e4)).position.set(h,v,m),i.up.set(b,y,w),n=new THREE.Vector3(f,_,g),i.lookAt(n),(o=new THREE.Scene).fog=new THREE.Fog(16777215,1,1e4);var a=new THREE.STLLoader,r=this,c=t.split(".")[0];a.load(s,function(t){(o=new THREE.Scene).fog=new THREE.Fog(16777215,1,1e4),o.add(new THREE.AmbientLight(3355443)),k(-1,1,1,16777215,1.35),k(1,-1,-1,16777215,1),(l=new THREE.WebGLRenderer({antialias:!0})).setClearColor(o.fog.color),l.setSize(800,600),l.gammaInput=!0,l.gammaOutput=!0,l.shadowMapEnabled=!0,l.shadowMapCullFace=THREE.CullFaceBack,window.addEventListener("resize",S,!1),t.center(),t.computeBoundingBox();for(var e=new THREE.MeshPhongMaterial({color:8421504,specular:1118481,shininess:200}),a=new THREE.Mesh(t,e),s=0,d=(new THREE.Geometry).fromBufferGeometry(a.geometry),u=0;u<d.faces.length;u++){var p=d.faces[u].a,h=d.faces[u].b,v=d.faces[u].c,m=new THREE.Vector3(d.vertices[p].x,d.vertices[p].y,d.vertices[p].z),D=new THREE.Vector3(d.vertices[h].x,d.vertices[h].y,d.vertices[h].z),C=new THREE.Vector3(d.vertices[v].x,d.vertices[v].y,d.vertices[v].z);new THREE.Triangle(C,D,m);s+=x(C,D,m)}var P,$,z;P=t.boundingBox.max.x-t.boundingBox.min.x,$=t.boundingBox.max.y-t.boundingBox.min.y,z=t.boundingBox.max.z-t.boundingBox.min.z;var q=parseInt($),T=parseInt(P),O=parseInt(z),j={xx:T,yy:q,zz:O,volume:Math.abs(parseInt(s))};r.allstl[c]=j;var N=r.allstl;r.$store.commit("stlSizeChange",N),a.castShadow=!0,a.receiveShadow=!0,o.add(a),function(t,e,a,o){var l=Math.max(3*o.boundingBox.max.x,3*o.boundingBox.max.y,3*o.boundingBox.max.z);(i=new THREE.PerspectiveCamera(45,4/3,.1,1e4)).position.set(0,0,l),i.up.set(b,y,w),n=new THREE.Vector3(f,_,g),i.lookAt(n)}(0,0,0,t),r.animate(c)}),o.add(new THREE.AmbientLight(3355443)),k(-1,1,1,16777215,1.35),k(1,-1,-1,16777215,1),(l=new THREE.WebGLRenderer({antialias:!0})).setClearColor(o.fog.color),l.setSize(800,600),l.gammaInput=!0,l.gammaOutput=!0,l.shadowMapEnabled=!0,l.shadowMapCullFace=THREE.CullFaceBack,window.addEventListener("resize",S,!1)},animate:function(t){!function(t,e){l.render(o,i);var a=new Image,n=l.domElement.toDataURL("image/jpeg");a.src=n,t.allstlimg[e]=n;var s=t.allstlimg;t.$store.commit("stlImgChange",s);var r=c()(t.allstlimg).length,d=D-r;4==d&&(t.manyPercentage=60+Math.floor(8*Math.random()+1));3==d&&(t.manyPercentage=70+Math.floor(8*Math.random()+1));2==d&&(t.manyPercentage=80+Math.floor(8*Math.random()+1));1==d&&(t.manyPercentage=90+Math.floor(8*Math.random()+1));r==D&&(t.manyPercentage=100,document.getElementById("loadend").style.display="block",document.getElementById("load").style.display="none")}(this,t)}}},u=1,p=45,h=200,v=200,m=200,f=0,_=0,g=0,b=0,y=1,w=0,D=0;function x(t,e,a){return 1/6*(t.x*e.y*a.z+a.x*t.y*e.z+e.x*a.y*t.z-a.x*e.y*t.z-e.x*t.y*a.z-t.x*a.y*e.z)}function k(t,e,a,i,n){var l=new THREE.DirectionalLight(i,n);l.position.set(t,e,a),o.add(l)}function S(){i.aspect=window.innerWidth/window.innerHeight,i.updateProjectionMatrix(),l.setSize(window.innerWidth,window.innerHeight)}var C=d,P=(a("t/QI"),a("KHd+")),$=Object(P.a)(C,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{attrs:{id:"wrap"}},[a("div",{staticClass:"loti"},[a("div",{staticClass:"lotiwrap"},[a("div",{attrs:{id:"box"}},[a("div",{attrs:{id:"select"}},[a("el-row",{staticStyle:{display:"flex","align-items":"center"}},[a("el-col",{attrs:{span:5}},[a("el-button",{on:{click:t.selectButton}},[t._v("选择stl文件")])],1),t._v(" "),a("el-col",{attrs:{span:18}},[a("div",{staticStyle:{display:"none"},attrs:{id:"load"}},[t._v("  加载中!请不要关闭窗口")]),t._v(" "),a("div",{staticStyle:{display:"none"},attrs:{id:"loadend"}},[t._v("  加载结束")])])],1),t._v(" "),a("input",{staticClass:"file ",staticStyle:{display:"none"},attrs:{type:"file",id:"file",accept:"stl",multiple:"multiple"},on:{change:function(e){t.start(e)}}})],1),t._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":18,percentage:t.manyPercentage}})],1)])])])])])},[],!1,null,"4913260c",null);$.options.__file="stl.vue";e.a=$.exports},tHKO:function(t,e,a){"use strict";var i=a("wAkD");a.n(i).a},uOCA:function(t,e,a){},wAkD:function(t,e,a){},wWUl:function(t,e,a){},wb0a:function(t,e,a){t.exports=a.p+"static/img/mobao1.6175445.png"},"wk8/":function(t,e,a){"use strict";a.d(e,"b",function(){return n}),a.d(e,"i",function(){return o}),a.d(e,"g",function(){return l}),a.d(e,"e",function(){return s}),a.d(e,"a",function(){return r}),a.d(e,"c",function(){return c}),a.d(e,"j",function(){return d}),a.d(e,"d",function(){return u}),a.d(e,"h",function(){return p}),a.d(e,"f",function(){return h}),a.d(e,"k",function(){return v}),a.d(e,"l",function(){return m});var i=a("t3Un");function n(t){return Object(i.a)({url:"api/manage/depuser/list",method:"get",params:t})}function o(t,e){var a=e;return Object(i.a)({url:"api/manage/depuser/edit/"+t,method:"post",data:a})}function l(t){var e=t;return Object(i.a)({url:"api/manage/depuser/del",method:"post",data:e})}function s(t){var e=t;return Object(i.a)({url:"api/manage/depuser/add",method:"post",data:e})}function r(t){return Object(i.a)({url:"api/manage/depart/list",method:"get",params:t})}function c(t){return Object(i.a)({url:"api/manage/userrole/list",method:"get",params:t})}function d(t){var e=t;return Object(i.a)({url:"api/manage/userrole/get",method:"post",data:e})}function u(t){var e=t;return Object(i.a)({url:"api/manage/userrole/add",method:"post",data:e})}function p(t){var e=t;return Object(i.a)({url:"api/manage/userrole/get",method:"post",data:e})}function h(t){var e=t;return Object(i.a)({url:"api/manage/userrole/del",method:"post",data:e})}function v(t){var e=t;return Object(i.a)({url:"api/wechat/bind",method:"post",data:e})}function m(t){var e=t;return Object(i.a)({url:"api/wechat/untying",method:"post",data:e})}},xLd2:function(t,e,a){"use strict";var i=a("/Y8H");a.n(i).a},xhmh:function(t,e,a){"use strict";var i=a("kBnk");a.n(i).a},"y/Gp":function(t,e,a){t.exports=a.p+"static/img/mcustomer2.af0436a.png"},ykMJ:function(t,e,a){t.exports=a.p+"static/img/xiao2.03ba00d.png"},zA7f:function(t,e,a){t.exports=a.p+"static/img/mxiao2.df655d1.png"},zF47:function(t,e,a){},ztef:function(t,e,a){}}]);